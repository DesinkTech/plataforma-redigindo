!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Annotorious=t():(e.OpenSeadragon=e.OpenSeadragon||{},e.OpenSeadragon.Annotorious=t())}(window,function(){return d=[
/*!**********************************************************!*\
  !*** ./node_modules/preact/compat/dist/compat.module.js ***!
  \**********************************************************/
/*! exports provided: useState, useReducer, useEffect, useLayoutEffect, useRef, useImperativeHandle, useMemo, useCallback, useContext, useDebugValue, useErrorBoundary, createElement, createContext, createRef, Fragment, Component, default, version, Children, render, hydrate, unmountComponentAtNode, createPortal, createFactory, cloneElement, isValidElement, findDOMNode, PureComponent, memo, forwardRef, unstable_batchedUpdates, Suspense, SuspenseList, lazy */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ../recogito-client-core/node_modules/react-contenteditable/lib/react-contenteditable.js (referenced with cjs require) */function(e,t,n){"use strict";n.r(t),n.d(t,"version",function(){return L}),n.d(t,"Children",function(){return g}),n.d(t,"render",function(){return k}),n.d(t,"hydrate",function(){return z}),n.d(t,"unmountComponentAtNode",function(){return H}),n.d(t,"createPortal",function(){return C}),n.d(t,"createFactory",function(){return M}),n.d(t,"cloneElement",function(){return B}),n.d(t,"isValidElement",function(){return F}),n.d(t,"findDOMNode",function(){return U}),n.d(t,"PureComponent",function(){return u}),n.d(t,"memo",function(){return h}),n.d(t,"forwardRef",function(){return f}),n.d(t,"unstable_batchedUpdates",function(){return V}),n.d(t,"Suspense",function(){return b}),n.d(t,"SuspenseList",function(){return _}),n.d(t,"lazy",function(){return x});var r=n(/*! preact/hooks */2);n.d(t,"useState",function(){return r.k}),n.d(t,"useReducer",function(){return r.i}),n.d(t,"useEffect",function(){return r.d}),n.d(t,"useLayoutEffect",function(){return r.g}),n.d(t,"useRef",function(){return r.j}),n.d(t,"useImperativeHandle",function(){return r.f}),n.d(t,"useMemo",function(){return r.h}),n.d(t,"useCallback",function(){return r.a}),n.d(t,"useContext",function(){return r.b}),n.d(t,"useDebugValue",function(){return r.c}),n.d(t,"useErrorBoundary",function(){return r.e});var a=n(/*! preact */1);function o(e,t){for(var n in t)e[n]=t[n];return e}function i(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}n.d(t,"createElement",function(){return a.f}),n.d(t,"createContext",function(){return a.e}),n.d(t,"createRef",function(){return a.g}),n.d(t,"Fragment",function(){return a.b}),n.d(t,"Component",function(){return a.a});var s,l,c,u=(s=a.a,c=s,(l=p).prototype=Object.create(c.prototype),(l.prototype.constructor=l).__proto__=c,p.prototype.shouldComponentUpdate=function(e,t){return i(this.props,e)||i(this.state,t)},p);function p(e){var t;return(t=s.call(this,e)||this).isPureReactComponent=!0,t}function h(t,r){function n(e){var t=this.props.ref,n=t==e.ref;return!n&&t&&(t.call?t(null):t.current=null),r?!r(this.props,e)||!n:i(this.props,e)}function e(e){return this.shouldComponentUpdate=n,Object(a.f)(t,o({},e))}return e.prototype.isReactComponent=!0,e.displayName="Memo("+(t.displayName||t.name)+")",e.t=!0,e}var d=a.i.__b;function f(n){function e(e){var t=o({},e);return delete t.ref,n(t,e.ref)}return e.prototype.isReactComponent=e.t=!0,e.displayName="ForwardRef("+(n.displayName||n.name)+")",e}a.i.__b=function(e){e.type&&e.type.t&&e.ref&&(e.props.ref=e.ref,e.ref=null),d&&d(e)};function m(e,r){return e?Object(a.k)(e).reduce(function(e,t,n){return e.concat(r(t,n))},[]):null}var g={map:m,forEach:m,count:function(e){return e?Object(a.k)(e).length:0},only:function(e){if(1!==(e=Object(a.k)(e)).length)throw new Error("Children.only() expects only one child.");return e[0]},toArray:a.k},y=a.i.__e;function v(e){return e&&((e=o({},e)).__c=null,e.__k=e.__k&&e.__k.map(v)),e}function b(){this.__u=0,this.o=null,this.__b=null}function w(e){var t=e.__.__c;return t&&t.u&&t.u(e)}function x(t){var n,r,o;function e(e){if(n||(n=t()).then(function(e){r=e.default||e},function(e){o=e}),o)throw o;if(!r)throw n;return Object(a.f)(r,e)}return e.displayName="Lazy",e.t=!0,e}function _(){this.i=null,this.l=null}a.i.__e=function(e,t,n){if(e.then)for(var r,o=t;o=o.__;)if((r=o.__c)&&r.__c)return r.__c(e,t.__c);y(e,t,n)},(b.prototype=new a.a).__c=function(e,t){var n=this;null==n.o&&(n.o=[]),n.o.push(t);function r(){i||(i=!0,o?o(a):a())}var o=w(n.__v),i=!1;t.__c=t.componentWillUnmount,t.componentWillUnmount=function(){r(),t.__c&&t.__c()};var a=function(){var e;if(!--n.__u)for(n.__v.__k[0]=n.state.u,n.setState({u:n.__b=null});e=n.o.pop();)e.forceUpdate()};n.__u++||n.setState({u:n.__b=n.__v.__k[0]}),e.then(r,r)},b.prototype.render=function(e,t){return this.__b&&(this.__v.__k[0]=v(this.__b),this.__b=null),[Object(a.f)(a.a,null,t.u?null:e.children),t.u&&e.fallback]};function S(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(n=e.i;n;){for(;3<n.length;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}}(_.prototype=new a.a).u=function(n){var r=this,o=w(r.__v),i=r.l.get(n);return i[0]++,function(e){function t(){r.props.revealOrder?(i.push(e),S(r,n,i)):e()}o?o(t):t()}},_.prototype.render=function(e){this.i=null,this.l=new Map;var t=Object(a.k)(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},_.prototype.componentDidUpdate=_.prototype.componentDidMount=function(){var n=this;n.l.forEach(function(e,t){S(n,t,e)})};var E,T=((E=P.prototype).getChildContext=function(){return this.props.context},E.render=function(e){return e.children},P);function P(){}function O(e){var t=this,n=e.container,r=Object(a.f)(T,{context:t.context},e.vnode);return t.s&&t.s!==n&&(t.v.parentNode&&t.s.removeChild(t.v),Object(a.c)(t.h),t.p=!1),e.vnode?t.p?(n.__k=t.__k,Object(a.j)(r,n),t.__k=n.__k):(t.v=document.createTextNode(""),Object(a.h)("",n),n.appendChild(t.v),t.p=!0,t.s=n,Object(a.j)(r,n,t.v),t.__k=t.v.__k):t.p&&(t.v.parentNode&&t.s.removeChild(t.v),Object(a.c)(t.h)),t.h=r,t.componentWillUnmount=function(){t.v.parentNode&&t.s.removeChild(t.v),Object(a.c)(t.h)},null}function C(e,t){return Object(a.f)(O,{vnode:e,container:t})}var A=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;a.a.prototype.isReactComponent={};var R="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;function k(e,t,n){if(null==t.__k)for(;t.firstChild;)t.removeChild(t.firstChild);return Object(a.j)(e,t),"function"==typeof n&&n(),e?e.__c:null}function z(e,t,n){return Object(a.h)(e,t),"function"==typeof n&&n(),e?e.__c:null}var D=a.i.event;function j(e,t){e["UNSAFE_"+t]&&!e[t]&&Object.defineProperty(e,t,{configurable:!1,get:function(){return this["UNSAFE_"+t]},set:function(e){this["UNSAFE_"+t]=e}})}a.i.event=function(e){D&&(e=D(e));var t=!(e.persist=function(){}),n=!1,r=e.stopPropagation;e.stopPropagation=function(){r.call(e),t=!0};var o=e.preventDefault;return e.preventDefault=function(){o.call(e),n=!0},e.isPropagationStopped=function(){return t},e.isDefaultPrevented=function(){return n},e.nativeEvent=e};var I={configurable:!0,get:function(){return this.class}},N=a.i.vnode;a.i.vnode=function(i){i.$$typeof=R;var e=i.type,t=i.props;if(e){if(t.class!=t.className&&(I.enumerable="className"in t,null!=t.className&&(t.class=t.className),Object.defineProperty(t,"className",I)),"function"!=typeof e){var n,r,o;for(o in t.defaultValue&&void 0!==t.value&&(t.value||0===t.value||(t.value=t.defaultValue),delete t.defaultValue),Array.isArray(t.value)&&t.multiple&&"select"===e&&(Object(a.k)(t.children).forEach(function(e){-1!=t.value.indexOf(e.props.value)&&(e.props.selected=!0)}),delete t.value),t)if(n=A.test(o))break;if(n)for(o in r=i.props={},t)r[A.test(o)?o.replace(/[A-Z0-9]/,"-$&").toLowerCase():o]=t[o]}!function(){var e=i.type,t=i.props;if(t&&"string"==typeof e){var n={};for(var r in t)/^on(Ani|Tra|Tou)/.test(r)&&(t[r.toLowerCase()]=t[r],delete t[r]),n[r.toLowerCase()]=r;if(n.ondoubleclick&&(t.ondblclick=t[n.ondoubleclick],delete t[n.ondoubleclick]),n.onbeforeinput&&(t.onbeforeinput=t[n.onbeforeinput],delete t[n.onbeforeinput]),n.onchange&&("textarea"===e||"input"===e.toLowerCase()&&!/^fil|che|ra/i.test(t.type))){var o=n.oninput||"oninput";t[o]||(t[o]=t[n.onchange],delete t[n.onchange])}}}(),"function"==typeof e&&!e.m&&e.prototype&&(j(e.prototype,"componentWillMount"),j(e.prototype,"componentWillReceiveProps"),j(e.prototype,"componentWillUpdate"),e.m=!0)}N&&N(i)};var L="16.8.0";function M(e){return a.f.bind(null,e)}function F(e){return!!e&&e.$$typeof===R}function B(e){return F(e)?a.d.apply(null,arguments):e}function H(e){return!!e.__k&&(Object(a.j)(null,e),!0)}function U(e){return e&&(e.base||1===e.nodeType&&e)||null}var V=function(e,t){return e(t)};t.default={useState:r.k,useReducer:r.i,useEffect:r.d,useLayoutEffect:r.g,useRef:r.j,useImperativeHandle:r.f,useMemo:r.h,useCallback:r.a,useContext:r.b,useDebugValue:r.c,version:"16.8.0",Children:g,render:k,hydrate:k,unmountComponentAtNode:H,createPortal:C,createElement:a.f,createContext:a.e,createFactory:M,cloneElement:B,createRef:a.g,Fragment:a.b,isValidElement:F,findDOMNode:U,Component:a.a,PureComponent:u,memo:h,forwardRef:f,unstable_batchedUpdates:V,Suspense:b,SuspenseList:_,lazy:x}},
/*!***************************************************!*\
  !*** ./node_modules/preact/dist/preact.module.js ***!
  \***************************************************/
/*! exports provided: render, hydrate, createElement, h, Fragment, createRef, isValidElement, Component, cloneElement, createContext, toChildArray, _unmount, options */
/*! exports used: Component, Fragment, _unmount, cloneElement, createContext, createElement, createRef, hydrate, options, render, toChildArray */function(e,t,n){"use strict";n.d(t,"j",function(){return j}),n.d(t,"h",function(){return I}),n.d(t,"f",function(){return u}),n.d(t,"b",function(){return E}),n.d(t,"g",function(){return h}),n.d(t,"a",function(){return T}),n.d(t,"d",function(){return N}),n.d(t,"e",function(){return L}),n.d(t,"k",function(){return C}),n.d(t,"c",function(){return z}),n.d(t,"i",function(){return w});var w,r,o,i,a,s,l,x={},_=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function S(e,t){for(var n in t)e[n]=t[n];return e}function b(e){var t=e.parentNode;t&&t.removeChild(e)}function u(e,t,n){var r,o=arguments,i={};for(r in t)"key"!==r&&"ref"!==r&&(i[r]=t[r]);if(3<arguments.length)for(n=[n],r=3;r<arguments.length;r++)n.push(o[r]);if(null!=n&&(i.children=n),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===i[r]&&(i[r]=e.defaultProps[r]);return p(e,i,t&&t.key,t&&t.ref,null)}function p(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o};return null==o&&(i.__v=i),w.vnode&&w.vnode(i),i}function h(){return{}}function E(e){return e.children}function T(e,t){this.props=e,this.context=t}function P(e,t){if(null==t)return e.__?P(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?P(e):null}function d(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return d(e)}}function f(e){(!e.__d&&(e.__d=!0)&&r.push(e)&&!o++||a!==w.debounceRendering)&&((a=w.debounceRendering)||i)(m)}function m(){for(var e;o=r.length;)e=r.sort(function(e,t){return e.__v.__b-t.__v.__b}),r=[],e.some(function(e){var t,n,r,o,i,a,s;e.__d&&(a=(i=(t=e).__v).__e,(s=t.__P)&&(n=[],o=R(s,i,(r=S({},i)).__v=r,t.__n,void 0!==s.ownerSVGElement,null,n,null==a?P(i):a),v(n,i),o!=a&&d(i)))})}function O(n,r,e,o,i,a,s,l,c){var u,p,h,d,f,m,g,y=e&&e.__k||_,v=y.length;if(l==x&&(l=null!=a?a[0]:v?P(e,0):null),u=0,r.__k=C(r.__k,function(e){if(null!=e){if(e.__=r,e.__b=r.__b+1,null===(h=y[u])||h&&e.key==h.key&&e.type===h.type)y[u]=void 0;else for(p=0;p<v;p++){if((h=y[p])&&e.key==h.key&&e.type===h.type){y[p]=void 0;break}h=null}if(d=R(n,e,h=h||x,o,i,a,s,l,c),(p=e.ref)&&h.ref!=p&&(g=g||[],h.ref&&g.push(h.ref,null,e),g.push(p,e.__c||d,e)),null!=d){var t;if(null==m&&(m=d),void 0!==e.__d)t=e.__d,e.__d=void 0;else if(a==h||d!=l||null==d.parentNode){e:if(null==l||l.parentNode!==n)n.appendChild(d),t=null;else{for(f=l,p=0;(f=f.nextSibling)&&p<v;p+=2)if(f==d)break e;n.insertBefore(d,l),t=l}"option"==r.type&&(n.value="")}l=void 0!==t?t:d.nextSibling,"function"==typeof r.type&&(r.__d=l)}else l&&h.__e==l&&l.parentNode!=n&&(l=P(h))}return u++,e}),r.__e=m,null!=a&&"function"!=typeof r.type)for(u=a.length;u--;)null!=a[u]&&b(a[u]);for(u=v;u--;)null!=y[u]&&z(y[u],y[u]);if(g)for(u=0;u<g.length;u++)k(g[u],g[++u],g[++u])}function C(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var r=0;r<e.length;r++)C(e[r],t,n);else n.push(t?t("string"==typeof e||"number"==typeof e?p(null,e,null,null,e):null!=e.__e||null!=e.__c?p(e.type,e.props,e.key,null,e.__v):e):e);return n}function g(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===c.test(t)?n+"px":null==n?"":n}function A(e,t,n,r,o){var i,a,s,l,c;if(o?"className"===t&&(t="class"):"class"===t&&(t="className"),"style"===t)if(i=e.style,"string"==typeof n)i.cssText=n;else{if("string"==typeof r&&(i.cssText="",r=null),r)for(l in r)n&&l in n||g(i,l,"");if(n)for(c in n)r&&n[c]===r[c]||g(i,c,n[c])}else"o"===t[0]&&"n"===t[1]?(a=t!==(t=t.replace(/Capture$/,"")),t=((s=t.toLowerCase())in e?s:t).slice(2),n?(r||e.addEventListener(t,y,a),(e.l||(e.l={}))[t]=n):e.removeEventListener(t,y,a)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&!o&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,n))}function y(e){this.l[e.type](w.event?w.event(e):e)}function R(e,t,n,r,o,i,a,s,l){var c,u,p,h,d,f,m,g,y,v,b=t.type;if(void 0!==t.constructor)return null;(c=w.__b)&&c(t);try{e:if("function"==typeof b){if(g=t.props,y=(c=b.contextType)&&r[c.__c],v=c?y?y.props.value:c.__:r,n.__c?m=(u=t.__c=n.__c).__=u.__E:("prototype"in b&&b.prototype.render?t.__c=u=new b(g,v):(t.__c=u=new T(g,v),u.constructor=b,u.render=D),y&&y.sub(u),u.props=g,u.state||(u.state={}),u.context=v,u.__n=r,p=u.__d=!0,u.__h=[]),null==u.__s&&(u.__s=u.state),null!=b.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=S({},u.__s)),S(u.__s,b.getDerivedStateFromProps(g,u.__s))),h=u.props,d=u.state,p)null==b.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==b.getDerivedStateFromProps&&g!==h&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(g,v),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(g,u.__s,v)||t.__v===n.__v&&!u.__){for(u.props=g,u.state=u.__s,t.__v!==n.__v&&(u.__d=!1),(u.__v=t).__e=n.__e,t.__k=n.__k,u.__h.length&&a.push(u),c=0;c<t.__k.length;c++)t.__k[c]&&(t.__k[c].__=t);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(g,u.__s,v),null!=u.componentDidUpdate&&u.__h.push(function(){u.componentDidUpdate(h,d,f)})}u.context=v,u.props=g,u.state=u.__s,(c=w.__r)&&c(t),u.__d=!1,u.__v=t,u.__P=e,c=u.render(u.props,u.state,u.context),t.__k=null!=c&&c.type==E&&null==c.key?c.props.children:Array.isArray(c)?c:[c],null!=u.getChildContext&&(r=S(S({},r),u.getChildContext())),p||null==u.getSnapshotBeforeUpdate||(f=u.getSnapshotBeforeUpdate(h,d)),O(e,t,n,r,o,i,a,s,l),u.base=t.__e,u.__h.length&&a.push(u),m&&(u.__E=u.__=null),u.__e=!1}else null==i&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,r,o,i,a,s){var l,c,u,p,h,d=n.props,f=t.props;if(o="svg"===t.type||o,null!=i)for(l=0;l<i.length;l++)if(null!=(c=i[l])&&((null===t.type?3===c.nodeType:c.localName===t.type)||e==c)){e=c,i[l]=null;break}if(null==e){if(null===t.type)return document.createTextNode(f);e=o?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,f.is&&{is:f.is}),i=null,s=!1}if(null===t.type)d!==f&&e.data!=f&&(e.data=f);else{if(null!=i&&(i=_.slice.call(e.childNodes)),u=(d=n.props||x).dangerouslySetInnerHTML,p=f.dangerouslySetInnerHTML,!s){if(d===x)for(d={},h=0;h<e.attributes.length;h++)d[e.attributes[h].name]=e.attributes[h].value;(p||u)&&(p&&u&&p.__html==u.__html||(e.innerHTML=p&&p.__html||""))}(function(e,t,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in t||A(e,i,null,n[i],r);for(i in t)o&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||A(e,i,t[i],n[i],r)})(e,f,d,o,s),p?t.__k=[]:(t.__k=t.props.children,O(e,t,n,r,"foreignObject"!==t.type&&o,i,a,x,s)),s||("value"in f&&void 0!==(l=f.value)&&l!==e.value&&A(e,"value",l,d.value,!1),"checked"in f&&void 0!==(l=f.checked)&&l!==e.checked&&A(e,"checked",l,d.checked,!1))}return e}(n.__e,t,n,r,o,i,a,l);(c=w.diffed)&&c(t)}catch(e){t.__v=null,w.__e(e,t,n)}return t.__e}function v(e,t){w.__c&&w.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){w.__e(e,t.__v)}})}function k(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){w.__e(e,n)}}function z(e,t,n){var r,o,i;if(w.unmount&&w.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||k(r,null,t)),n||"function"==typeof e.type||(n=null!=(o=e.__e)),e.__e=e.__d=void 0,null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){w.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&z(r[i],t,n);null!=o&&b(o)}function D(e,t,n){return this.constructor(e,n)}function j(e,t,n){var r,o,i;w.__&&w.__(e,t),o=(r=n===s)?null:n&&n.__k||t.__k,e=u(E,null,[e]),i=[],R(t,(!r&&n||t).__k=e,o||x,x,void 0!==t.ownerSVGElement,n&&!r?[n]:o?null:_.slice.call(t.childNodes),i,n||x,r),v(i,e)}function I(e,t){j(e,t,s)}function N(e,t){var n,r;for(r in t=S(S({},e.props),t),2<arguments.length&&(t.children=_.slice.call(arguments,2)),n={},t)"key"!==r&&"ref"!==r&&(n[r]=t[r]);return p(e.type,n,t.key||e.key,t.ref||e.ref,null)}function L(e){var t={},o={__c:"__cC"+l++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r=this;return this.getChildContext||(n=[],this.getChildContext=function(){return t[o.__c]=r,t},this.shouldComponentUpdate=function(t){r.props.value!==t.value&&n.some(function(e){e.context=t.value,f(e)})},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return(o.Consumer.contextType=o).Provider.__=o}w={__e:function(e,t){for(var n,r;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(r=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(r=!0,n.componentDidCatch(e)),r)return f(n.__E=n)}catch(t){e=t}throw e}},T.prototype.setState=function(e,t){var n;n=this.__s!==this.state?this.__s:this.__s=S({},this.state),"function"==typeof e&&(e=e(n,this.props)),e&&S(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),f(this))},T.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),f(this))},T.prototype.render=E,r=[],o=0,i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,s=x,l=0},
/*!********************************************************!*\
  !*** ./node_modules/preact/hooks/dist/hooks.module.js ***!
  \********************************************************/
/*! exports provided: useState, useReducer, useEffect, useLayoutEffect, useRef, useImperativeHandle, useMemo, useCallback, useContext, useDebugValue, useErrorBoundary */
/*! exports used: useCallback, useContext, useDebugValue, useEffect, useErrorBoundary, useImperativeHandle, useLayoutEffect, useMemo, useReducer, useRef, useState */function(e,t,n){"use strict";n.d(t,"k",function(){return f}),n.d(t,"i",function(){return m}),n.d(t,"d",function(){return g}),n.d(t,"g",function(){return y}),n.d(t,"j",function(){return v}),n.d(t,"f",function(){return b}),n.d(t,"h",function(){return w}),n.d(t,"a",function(){return x}),n.d(t,"b",function(){return _}),n.d(t,"c",function(){return S}),n.d(t,"e",function(){return E});var o,i,r,a=n(/*! preact */1),s=0,l=[],c=a.i.__r,u=a.i.diffed,p=a.i.__c,h=a.i.unmount;function d(e,t){a.i.__h&&a.i.__h(i,e,s||t),s=0;var n=i.__H||(i.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function f(e){return s=1,m(A,e)}function m(n,e,t){var r=d(o++,2);return r.__c||(r.__c=i,r.__=[t?t(e):A(void 0,e),function(e){var t=n(r.__[0],e);r.__[0]!==t&&(r.__[0]=t,r.__c.setState({}))}]),r.__}function g(e,t){var n=d(o++,3);!a.i.__s&&C(n.__H,t)&&(n.__=e,n.__H=t,i.__H.__h.push(n))}function y(e,t){var n=d(o++,4);!a.i.__s&&C(n.__H,t)&&(n.__=e,n.__H=t,i.__h.push(n))}function v(e){return s=5,w(function(){return{current:e}},[])}function b(e,t,n){s=6,y(function(){"function"==typeof e?e(t()):e&&(e.current=t())},null==n?n:n.concat(e))}function w(e,t){var n=d(o++,7);return C(n.__H,t)?(n.__H=t,n.__h=e,n.__=e()):n.__}function x(e,t){return s=8,w(function(){return e},t)}function _(e){var t=i.context[e.__c],n=d(o++,9);return n.__c=e,t?(null==n.__&&(n.__=!0,t.sub(i)),t.props.value):e.__}function S(e,t){a.i.useDebugValue&&a.i.useDebugValue(t?t(e):e)}function E(e){var t=d(o++,10),n=f();return t.__=e,i.componentDidCatch||(i.componentDidCatch=function(e){t.__&&t.__(e),n[1](e)}),[n[0],function(){n[1](void 0)}]}function T(){l.some(function(t){if(t.__P)try{t.__H.__h.forEach(P),t.__H.__h.forEach(O),t.__H.__h=[]}catch(e){return t.__H.__h=[],a.i.__e(e,t.__v),!0}}),l=[]}function P(e){e.t&&e.t()}function O(e){var t=e.__();"function"==typeof t&&(e.t=t)}function C(n,e){return!n||e.some(function(e,t){return e!==n[t]})}function A(e,t){return"function"==typeof t?t(e):t}a.i.__r=function(e){c&&c(e),o=0,(i=e.__c).__H&&(i.__H.__h.forEach(P),i.__H.__h.forEach(O),i.__H.__h=[])},a.i.diffed=function(e){u&&u(e);var t=e.__c;if(t){var n=t.__H;n&&n.__h.length&&(1!==l.push(t)&&r===a.i.requestAnimationFrame||((r=a.i.requestAnimationFrame)||function(e){function t(){clearTimeout(r),cancelAnimationFrame(n),setTimeout(e)}var n,r=setTimeout(t,100);"undefined"!=typeof window&&(n=requestAnimationFrame(t))})(T))}},a.i.__c=function(e,n){n.some(function(t){try{t.__h.forEach(P),t.__h=t.__h.filter(function(e){return!e.__||O(e)})}catch(e){n.some(function(e){e.__h&&(e.__h=[])}),n=[],a.i.__e(e,t.__v)}}),p&&p(e,n)},a.i.unmount=function(e){h&&h(e);var t=e.__c;if(t){var n=t.__H;if(n)try{n.__.forEach(function(e){return e.t&&e.t()})}catch(e){a.i.__e(e,t.__v)}}}},
/*!*****************************************!*\
  !*** ./node_modules/axios/lib/utils.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(/*! ./helpers/bind */13),r=Object.prototype.toString;function a(e){return"[object Array]"===r.call(e)}function s(e){return void 0===e}function l(e){return null!==e&&"object"===i(e)}function c(e){return"[object Function]"===r.call(e)}function u(e,t){if(null!=e)if("object"!==i(e)&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:l,isUndefined:s,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return l(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function n(){var r={};function e(e,t){"object"===i(r[t])&&"object"===i(e)?r[t]=n(r[t],e):r[t]=e}for(var t=0,o=arguments.length;t<o;t++)u(arguments[t],e);return r},deepMerge:function n(){var r={};function e(e,t){"object"===i(r[t])&&"object"===i(e)?r[t]=n(r[t],e):"object"===i(e)?r[t]=n({},e):r[t]=e}for(var t=0,o=arguments.length;t<o;t++)u(arguments[t],e);return r},extend:function(n,e,r){return u(e,function(e,t){n[t]=r&&"function"==typeof e?o(e,r):e}),n},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},
/*!******************************************************************!*\
  !*** ../recogito-client-core/node_modules/tiny-emitter/index.js ***!
  \******************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function o(){r.off(e,o),t.apply(n,arguments)}return o._=t,this.on(e,o,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,a=r.length;i<a;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}},e.exports=n,e.exports.TinyEmitter=n},
/*!*************************************************************************!*\
  !*** ./node_modules/openseadragon/build/openseadragon/openseadragon.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! exports used: MouseTracker, Point */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,ap,bp,mp,bz,mz,Kz,Lz,Mz,RF,tH,uH,KH,nI,rK,GL,gN,xN,SN,qO,fP,PP,UP,GQ,TQ,VS,WS,fU,mU,GU,mV,VV,eX,zZ,t2,_8,U9;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}//! openseadragon 2.4.2
//! Built on 2020-03-05
//! Git commit: v2.4.2-0-c450749
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function OpenSeadragon(e){return new OpenSeadragon.Viewer(e)}function nz(e,t){var n,r=e.controls;for(n=r.length-1;0<=n;n--)if(r[n].element==t)return n;return-1}function Nz(e){return e=Kz.getElement(e),new Kz.Point(0===e.clientWidth?1:e.clientWidth,0===e.clientHeight?1:e.clientHeight)}function Pz(e,t){if(t instanceof Kz.Overlay)return t;var n=null;if(t.element)n=Kz.getElement(t.element);else{var r=t.id?t.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());(n=Kz.getElement(t.id))||((n=document.createElement("a")).href="#/overlay/"+r),n.id=r,Kz.addClass(n,t.className?t.className:"openseadragon-overlay")}var o=t.location,i=t.width,a=t.height;if(!o){var s=t.x,l=t.y;if(void 0!==t.px){var c=e.viewport.imageToViewportRectangle(new Kz.Rect(t.px,t.py,i||0,a||0));s=c.x,l=c.y,i=void 0!==i?c.width:void 0,a=void 0!==a?c.height:void 0}o=new Kz.Point(s,l)}var u=t.placement;return u&&"string"===Kz.type(u)&&(u=Kz.Placement[t.placement.toUpperCase()]),new Kz.Overlay({element:n,location:o,placement:u,onDraw:t.onDraw,checkResize:t.checkResize,width:i,height:a,rotationMode:t.rotationMode})}function Qz(e,t){var n;for(n=e.length-1;0<=n;n--)if(e[n].element===t)return n;return-1}function Rz(e,t){return Kz.requestAnimationFrame(function(){t(e)})}function Sz(e){Kz.requestAnimationFrame(function(){!function(e){var t,n,r,o;if(e.controlsShouldFade){for(t=Kz.now(),n=t-e.controlsFadeBeginTime,r=1-n/e.controlsFadeLength,r=Math.min(1,r),r=Math.max(0,r),o=e.controls.length-1;0<=o;o--)e.controls[o].autoFade&&e.controls[o].setOpacity(r);0<r&&Sz(e)}}(e)})}function Tz(e){e.autoHideControls&&(e.controlsShouldFade=!0,e.controlsFadeBeginTime=Kz.now()+e.controlsFadeDelay,window.setTimeout(function(){Sz(e)},e.controlsFadeDelay))}function Vz(e){var t;for(e.controlsShouldFade=!1,t=e.controls.length-1;0<=t;t--)e.controls[t].setOpacity(1)}function Wz(){Vz(this)}function Xz(){Tz(this)}function Yz(e){var t={originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction,preventVerticalPan:e.preventVerticalPan,preventHorizontalPan:e.preventHorizontalPan};if(this.raiseEvent("canvas-key",t),t.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 38:return t.preventVerticalPan||(e.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kz.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 40:return t.preventVerticalPan||(e.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kz.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 37:return t.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kz.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;case 39:return t.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kz.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;default:return!0}}function Zz(e){var t={originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction,preventVerticalPan:e.preventVerticalPan,preventHorizontalPan:e.preventHorizontalPan};if(this.raiseEvent("canvas-key",t),t.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return t.preventVerticalPan||(e.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kz.Point(0,-40))),this.viewport.applyConstraints()),!1;case 115:case 83:return t.preventVerticalPan||(e.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kz.Point(0,40))),this.viewport.applyConstraints()),!1;case 97:return t.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kz.Point(-40,0))),this.viewport.applyConstraints()),!1;case 100:return t.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kz.Point(40,0))),this.viewport.applyConstraints()),!1;case 114:return this.viewport.flipped?this.viewport.setRotation(Kz.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(Kz.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 82:return this.viewport.flipped?this.viewport.setRotation(Kz.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(Kz.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 102:return this.viewport.toggleFlip(),!1;default:return!0}}function $z(e){var t;document.activeElement==this.canvas||this.canvas.focus(),this.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x);var n={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.raiseEvent("canvas-click",n),!n.preventDefaultAction&&this.viewport&&e.quick&&(t=this.gestureSettingsByDeviceType(e.pointerType)).clickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints())}function _z(e){var t,n={tracker:e.eventSource,position:e.position,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.raiseEvent("canvas-double-click",n),!n.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType)).dblClickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints())}function aA(e){var t,n={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};if(this.raiseEvent("canvas-drag",n),!n.preventDefaultAction&&this.viewport){if(t=this.gestureSettingsByDeviceType(e.pointerType),this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewport.flipped&&(e.delta.x=-e.delta.x),this.constrainDuringPan){var r=this.viewport.deltaPointsFromPixels(e.delta.negate());this.viewport.centerSpringX.target.value+=r.x,this.viewport.centerSpringY.target.value+=r.y;var o=this.viewport.getBounds(),i=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=r.x,this.viewport.centerSpringY.target.value-=r.y,o.x!=i.x&&(e.delta.x=0),o.y!=i.y&&(e.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta.negate()),t.flickEnabled&&!this.constrainDuringPan)}}function bA(e){if(!e.preventDefaultAction&&this.viewport){var t=this.gestureSettingsByDeviceType(e.pointerType);if(t.flickEnabled&&e.speed>=t.flickMinSpeed){var n=0;this.panHorizontal&&(n=t.flickMomentum*e.speed*Math.cos(e.direction));var r=0;this.panVertical&&(r=t.flickMomentum*e.speed*Math.sin(e.direction));var o=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),i=this.viewport.pointFromPixel(new Kz.Point(o.x-n,o.y-r));this.viewport.panTo(i,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:e.eventSource,position:e.position,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent})}function cA(e){this.raiseEvent("canvas-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function dA(e){window.location!=window.parent.location&&Kz.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function eA(e){this.raiseEvent("canvas-press",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function fA(e){this.raiseEvent("canvas-release",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function gA(e){this.raiseEvent("canvas-nonprimary-press",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function hA(e){this.raiseEvent("canvas-nonprimary-release",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function iA(e){var t,n,r;if(!e.preventDefaultAction&&this.viewport&&((t=this.gestureSettingsByDeviceType(e.pointerType)).pinchToZoom&&(n=this.viewport.pointFromPixel(e.center,!0),r=this.viewport.pointFromPixel(e.lastCenter,!0).minus(n),this.panHorizontal||(r.x=0),this.panVertical||(r.y=0),this.viewport.zoomBy(e.distance/e.lastDistance,n,!0),t.zoomToRefPoint&&this.viewport.panBy(r,!0),this.viewport.applyConstraints()),t.pinchRotate)){var o=Math.atan2(e.gesturePoints[0].currentPos.y-e.gesturePoints[1].currentPos.y,e.gesturePoints[0].currentPos.x-e.gesturePoints[1].currentPos.x),i=Math.atan2(e.gesturePoints[0].lastPos.y-e.gesturePoints[1].lastPos.y,e.gesturePoints[0].lastPos.x-e.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(o-i)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:e.eventSource,gesturePoints:e.gesturePoints,lastCenter:e.lastCenter,center:e.center,lastDistance:e.lastDistance,distance:e.distance,shift:e.shift,originalEvent:e.originalEvent}),!1}function jA(e){var t,n,r;if((r=Kz.now())-this._lastScrollTime>this.minScrollDeltaTime){if(this._lastScrollTime=r,this.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x),!e.preventDefaultAction&&this.viewport&&(t=this.gestureSettingsByDeviceType(e.pointerType)).scrollToZoom&&(n=Math.pow(this.zoomPerScroll,e.scroll),this.viewport.zoomBy(n,t.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints()),this.raiseEvent("canvas-scroll",{tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent}),t&&t.scrollToZoom)return!1}else if((t=this.gestureSettingsByDeviceType(e.pointerType))&&t.scrollToZoom)return!1}function kA(e){Lz[this.hash].mouseInside=!0,Vz(this),this.raiseEvent("container-enter",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function lA(e){e.pointers<1&&(Lz[this.hash].mouseInside=!1,Lz[this.hash].animating||Tz(this)),this.raiseEvent("container-exit",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function mA(e){!function(e){if(e._opening)return;if(e.autoResize){var t=Nz(e.container),n=Lz[e.hash].prevContainerSize;if(!t.equals(n)){var r=e.viewport;if(e.preserveImageSizeOnResize){var o=n.x/t.x,i=r.getZoom()*o,a=r.getCenter();r.resize(t,!1),r.zoomTo(i,null,!0),r.panTo(a,!0)}else{var s=r.getBounds();r.resize(t,!0),r.fitBoundsWithConstraints(s,!0)}Lz[e.hash].prevContainerSize=t,Lz[e.hash].forceRedraw=!0}}var l=e.viewport.update(),c=e.world.update()||l;l&&e.raiseEvent("viewport-change");e.referenceStrip&&(c=e.referenceStrip.update(e.viewport)||c);!Lz[e.hash].animating&&c&&(e.raiseEvent("animation-start"),Vz(e));(c||Lz[e.hash].forceRedraw||e.world.needsDraw())&&(function(e){e.imageLoader.clear(),e.drawer.clear(),e.world.draw(),e.raiseEvent("update-viewport",{})}(e),e._drawOverlays(),e.navigator&&e.navigator.update(e.viewport),Lz[e.hash].forceRedraw=!1,c&&e.raiseEvent("animation"));Lz[e.hash].animating&&!c&&(e.raiseEvent("animation-finish"),Lz[e.hash].mouseInside||Tz(e));Lz[e.hash].animating=c}(e),e.isOpen()?e._updateRequestId=Rz(e,mA):e._updateRequestId=!1}function pA(e,t){return e?e+t:t}function qA(){Lz[this.hash].lastZoomTime=Kz.now(),Lz[this.hash].zoomFactor=this.zoomPerSecond,Lz[this.hash].zooming=!0,tA(this)}function rA(){Lz[this.hash].lastZoomTime=Kz.now(),Lz[this.hash].zoomFactor=1/this.zoomPerSecond,Lz[this.hash].zooming=!0,tA(this)}function sA(){Lz[this.hash].zooming=!1}function tA(e){Kz.requestAnimationFrame(Kz.delegate(e,uA))}function uA(){var e,t,n;Lz[this.hash].zooming&&this.viewport&&(t=(e=Kz.now())-Lz[this.hash].lastZoomTime,n=Math.pow(Lz[this.hash].zoomFactor,t/1e3),this.viewport.zoomBy(n),this.viewport.applyConstraints(),Lz[this.hash].lastZoomTime=e,tA(this))}function vA(){this.viewport&&(Lz[this.hash].zooming=!1,this.viewport.zoomBy(+this.zoomPerClick),this.viewport.applyConstraints())}function wA(){this.viewport&&(Lz[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function xA(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function yA(){this.viewport&&this.viewport.goHome()}function zA(){this.isFullPage()&&!Kz.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function AA(){if(this.viewport){var e=this.viewport.getRotation();e=this.viewport.flipped?Kz.positiveModulo(e+this.rotationIncrement,360):Kz.positiveModulo(e-this.rotationIncrement,360),this.viewport.setRotation(e)}}function BA(){if(this.viewport){var e=this.viewport.getRotation();e=this.viewport.flipped?Kz.positiveModulo(e-this.rotationIncrement,360):Kz.positiveModulo(e+this.rotationIncrement,360),this.viewport.setRotation(e)}}function CA(){this.viewport.toggleFlip()}function DA(){var e=this._sequenceIndex-1;this.navPrevNextWrap&&e<0&&(e+=this.tileSources.length),this.goToPage(e)}function EA(){var e=this._sequenceIndex+1;this.navPrevNextWrap&&e>=this.tileSources.length&&(e=0),this.goToPage(e)}function SF(e){var t={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};if(this.viewer.raiseEvent("navigator-click",t),!t.preventDefaultAction&&e.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x);var n=this.viewport.pointFromPixel(e.position);this.panVertical?this.panHorizontal||(n.x=this.viewer.viewport.getCenter(!0).x):n.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(n),this.viewer.viewport.applyConstraints()}}function TF(e){var t={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.viewer.raiseEvent("navigator-drag",t),!t.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewer.viewport.flipped&&(e.delta.x=-e.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function UF(e){e.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function VF(e){return this.viewer.raiseEvent("navigator-scroll",{tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent}),!1}function WF(e,t){XF(e,"rotate("+t+"deg)")}function XF(e,t){e.style.webkitTransform=t,e.style.mozTransform=t,e.style.msTransform=t,e.style.oTransform=t,e.style.transform=t}function tK(e,t){var n,r,o=t.Image,i=o.Url,a=o.Format,s=o.Size,l=o.DisplayRect||[],c=parseInt(s.Width,10),u=parseInt(s.Height,10),p=parseInt(o.TileSize,10),h=parseInt(o.Overlap,10),d=[];for(r=0;r<l.length;r++)n=l[r].Rect,d.push(new rK.DisplayRect(parseInt(n.X,10),parseInt(n.Y,10),parseInt(n.Width,10),parseInt(n.Height,10),parseInt(n.MinLevel,10),parseInt(n.MaxLevel,10)));return rK.extend(!0,{width:c,height:u,tileSize:p,tileOverlap:h,minLevel:null,maxLevel:null,tilesUrl:i,fileFormat:a,displayRects:d},t)}function HL(e){var t=Array.isArray(e.profile)?e.profile[0]:e.profile,n=-1!==["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"].indexOf(t),r=!1;return 2===e.version&&1<e.profile.length&&e.profile[1].supports&&(r=-1!==e.profile[1].supports.indexOf("sizeByW")),3===e.version&&e.extraFeatures&&(r=-1!==e.extraFeatures.indexOf("sizeByWh")),!n||r}function IL(e){for(var t=[],n=0;n<e.sizes.length;n++)t.push({url:e["@id"]+"/full/"+e.sizes[n].width+","+(3===e.version?e.sizes[n].height:"")+"/0/default."+e.tileFormat,width:e.sizes[n].width,height:e.sizes[n].height});return t.sort(function(e,t){return e.width-t.width})}function tO(e,t){return t.levels}function VP(o){UP.requestAnimationFrame(function(){var e,t,n,r;(e=o).shouldFade&&(t=UP.now(),n=t-e.fadeBeginTime,r=1-n/e.fadeLength,r=Math.min(1,r),r=Math.max(0,r),e.imgGroup&&UP.setElementOpacity(e.imgGroup,r,!0),0<r&&VP(e))})}function ZP(e,t){var n;e.element.disabled||(t>=UP.ButtonState.GROUP&&e.currentState==UP.ButtonState.REST&&((n=e).shouldFade=!1,n.imgGroup&&UP.setElementOpacity(n.imgGroup,1,!0),e.currentState=UP.ButtonState.GROUP),t>=UP.ButtonState.HOVER&&e.currentState==UP.ButtonState.GROUP&&(e.imgHover&&(e.imgHover.style.visibility=""),e.currentState=UP.ButtonState.HOVER),t>=UP.ButtonState.DOWN&&e.currentState==UP.ButtonState.HOVER&&(e.imgDown&&(e.imgDown.style.visibility=""),e.currentState=UP.ButtonState.DOWN))}function $P(e,t){var n;e.element.disabled||(t<=UP.ButtonState.HOVER&&e.currentState==UP.ButtonState.DOWN&&(e.imgDown&&(e.imgDown.style.visibility="hidden"),e.currentState=UP.ButtonState.HOVER),t<=UP.ButtonState.GROUP&&e.currentState==UP.ButtonState.HOVER&&(e.imgHover&&(e.imgHover.style.visibility="hidden"),e.currentState=UP.ButtonState.GROUP),t<=UP.ButtonState.REST&&e.currentState==UP.ButtonState.GROUP&&((n=e).shouldFade=!0,n.fadeBeginTime=UP.now()+n.fadeDelay,window.setTimeout(function(){VP(n)},n.fadeDelay),e.currentState=UP.ButtonState.REST))}function XS(e){var t=Number(this.element.style.marginLeft.replace("px","")),n=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),o=Number(this.element.style.height.replace("px","")),i=VS.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?0<-e.delta.x?t>-(r-i.x)&&(this.element.style.marginLeft=t+2*e.delta.x+"px",ZS(this,i.x,t+2*e.delta.x)):-e.delta.x<0&&t<0&&(this.element.style.marginLeft=t+2*e.delta.x+"px",ZS(this,i.x,t+2*e.delta.x)):0<-e.delta.y?n>-(o-i.y)&&(this.element.style.marginTop=n+2*e.delta.y+"px",ZS(this,i.y,n+2*e.delta.y)):-e.delta.y<0&&n<0&&(this.element.style.marginTop=n+2*e.delta.y+"px",ZS(this,i.y,n+2*e.delta.y))),!1}function YS(e){var t=Number(this.element.style.marginLeft.replace("px","")),n=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),o=Number(this.element.style.height.replace("px","")),i=VS.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?0<e.scroll?t>-(r-i.x)&&(this.element.style.marginLeft=t-60*e.scroll+"px",ZS(this,i.x,t-60*e.scroll)):e.scroll<0&&t<0&&(this.element.style.marginLeft=t-60*e.scroll+"px",ZS(this,i.x,t-60*e.scroll)):e.scroll<0?n>i.y-o&&(this.element.style.marginTop=n+60*e.scroll+"px",ZS(this,i.y,n+60*e.scroll)):0<e.scroll&&n<0&&(this.element.style.marginTop=n+60*e.scroll+"px",ZS(this,i.y,n+60*e.scroll))),!1}function ZS(e,t,n){var r,o,i,a,s,l,c;for(r="horizontal"==e.scroll?e.panelWidth:e.panelHeight,o=Math.ceil(t/r)+5,l=o=(o=(i=Math.ceil((Math.abs(n)+t)/r)+1)-o)<0?0:o;l<i&&l<e.panels.length;l++)if(!(c=e.panels[l]).activePanel){var u,p=e.viewer.tileSources[l];u=p.referenceStripThumbnailUrl?{type:"image",url:p.referenceStripThumbnailUrl}:p,(a=new VS.Viewer({id:c.id,tileSources:[u],element:c,navigatorSizeRatio:e.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:e.viewer.loadTilesWithAjax,ajaxHeaders:e.viewer.ajaxHeaders,useCanvas:e.useCanvas})).displayRegion=VS.makeNeutralElement("div"),a.displayRegion.id=c.id+"-displayregion",a.displayRegion.className="displayregion",(s=a.displayRegion.style).position="relative",s.top="0px",s.left="0px",s.fontSize="0px",s.overflow="hidden",s.float="left",s.cssFloat="left",s.styleFloat="left",s.zIndex=999999999,s.cursor="default",s.width=e.panelWidth-4+"px",s.height=e.panelHeight-4+"px",a.displayRegion.innerTracker=new VS.MouseTracker({element:a.displayRegion,startDisabled:!0}),c.getElementsByTagName("div")[0].appendChild(a.displayRegion),e.miniViewers[c.id]=a,c.activePanel=!0}}function $S(e){var t=e.eventSource.element;return"horizontal"==this.scroll?t.style.marginBottom="0px":t.style.marginLeft="0px",!1}function _S(e){var t=e.eventSource.element;return"horizontal"==this.scroll?t.style.marginBottom="-"+VS.getElementSize(t).y/2+"px":t.style.marginLeft="-"+VS.getElementSize(t).x/2+"px",!1}function aT(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 38:return YS.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:case 37:return YS.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return YS.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}function bT(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 61:return YS.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return YS.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return YS.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:case 97:return YS.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return YS.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}function HU(e){GU.extend(!0,this,{timeout:GU.DEFAULT_SETTINGS.timeout,jobId:null},e),this.image=null}function u2(e,t,n,r,o,i,a,s,l){var c=a.getBoundingBox().getTopLeft(),u=a.getBoundingBox().getBottomRight();e.viewer&&e.viewer.raiseEvent("update-level",{tiledImage:e,havedrawn:t,level:r,opacity:o,visibility:i,drawArea:a,topleft:c,bottomright:u,currenttime:s,best:l}),F2(e.coverage,r),F2(e.loadingCoverage,r);for(var p=e._getCornerTiles(r,c,u),h=p.topLeft,d=p.bottomRight,f=e.source.getNumTiles(r),m=e.viewport.pixelFromPoint(e.viewport.getCenter()),g=h.x;g<=d.x;g++)for(var y=h.y;y<=d.y;y++){if(!e.wrapHorizontal&&!e.wrapVertical){var v=e.source.getTileBounds(r,g,y);if(null===a.intersection(v))continue}l=v2(e,n,t,g,y,r,o,i,m,f,s,l)}return l}function v2(e,t,n,r,o,i,a,s,l,c,u,p){var h=function(e,t,n,r,o,i,a,s,l,c){var u,p,h,d,f,m,g,y,v;i[n]||(i[n]={});i[n][e]||(i[n][e]={});i[n][e][t]||(u=(s.x+e%s.x)%s.x,p=(s.y+t%s.y)%s.y,h=o.getTileBounds(n,u,p),d=o.getTileBounds(n,u,p,!0),f=o.tileExists(n,u,p),m=o.getTileUrl(n,u,p),r.loadTilesWithAjax?(g=o.getTileAjaxHeaders(n,u,p),t2.isPlainObject(r.ajaxHeaders)&&(g=t2.extend({},r.ajaxHeaders,g))):g=null,y=o.getContext2D?o.getContext2D(n,u,p):void 0,h.x+=(e-u)/s.x,h.y+=c/l*((t-p)/s.y),v=new t2.Tile(n,e,t,h,f,m,y,r.loadTilesWithAjax,g,d),u==s.x-1&&(v.isRightMost=!0),p==s.y-1&&(v.isBottomMost=!0),i[n][e][t]=v);return(v=i[n][e][t]).lastTouchTime=a,v}(r,o,i,e,e.source,e.tilesMatrix,u,c,e._worldWidthCurrent,e._worldHeightCurrent),d=n;e.viewer&&e.viewer.raiseEvent("update-tile",{tiledImage:e,tile:h}),E2(e.coverage,i,r,o,!1);var f=h.loaded||h.loading||D2(e.loadingCoverage,i,r,o);if(E2(e.loadingCoverage,i,r,o,f),!h.exists)return p;if(t&&!d&&(D2(e.coverage,i,r,o)?E2(e.coverage,i,r,o,!0):d=!0),!d)return p;if(!function(e,t,n,r,o,i){var a=e.bounds.getTopLeft();a.x*=i._scaleSpring.current.value,a.y*=i._scaleSpring.current.value,a.x+=i._xSpring.current.value,a.y+=i._ySpring.current.value;var s=e.bounds.getSize();s.x*=i._scaleSpring.current.value,s.y*=i._scaleSpring.current.value;var l=n.pixelFromPointNoRotate(a,!0),c=n.pixelFromPointNoRotate(a,!1),u=n.deltaPixelsFromPointsNoRotate(s,!0),p=n.deltaPixelsFromPointsNoRotate(s,!1),h=c.plus(p.divide(2)),d=r.squaredDistanceTo(h);t||(u=u.plus(new t2.Point(1,1)));e.isRightMost&&i.wrapHorizontal&&(u.x+=.75);e.isBottomMost&&i.wrapVertical&&(u.y+=.75);e.position=l,e.size=u,e.squaredDistance=d,e.visibility=o}(h,e.source.tileOverlap,e.viewport,l,s,e),!h.loaded)if(h.context2D)z2(e,h);else{var m=e._tileCache.getImageRecord(h.cacheKey);if(m)z2(e,h,m.getImage())}h.loaded?function(e,t,n,r,o,i,a){var s,l,c=1e3*e.blendTime;t.blendStart||(t.blendStart=a);s=a-t.blendStart,l=c?Math.min(1,s/c):1,e.alwaysBlend&&(l*=i);if(t.opacity=l,e.lastDrawn.push(t),1===l)E2(e.coverage,o,n,r,!0),e._hasOpaqueTile=!0;else if(s<c)return!0;return!1}(e,h,r,o,i,a,u)&&(e._needsDraw=!0):h.loading?e._tilesLoading++:f||(p=function(e,t){if(!e)return t;{if(t.visibility>e.visibility)return t;if(t.visibility==e.visibility&&t.squaredDistance<e.squaredDistance)return t}return e}(p,h));return p}function z2(e,t,n,r,o){var i=0;function a(){return i++,s}function s(){0===--i&&(t.loading=!1,t.loaded=!0,t.context2D||e._tileCache.cacheTile({image:n,tile:t,cutoff:r,tiledImage:e}),e._needsDraw=!0)}e.viewer.raiseEvent("tile-loaded",{tile:t,tiledImage:e,tileRequest:o,image:n,getCompletionCallback:a}),a()()}function C2(e,t,n,r){var o,i,a,s;if(!e[t])return!1;if(void 0!==n&&void 0!==r)return void 0===e[t][n]||void 0===e[t][n][r]||!0===e[t][n][r];for(a in o=e[t])if(Object.prototype.hasOwnProperty.call(o,a))for(s in i=o[a])if(Object.prototype.hasOwnProperty.call(i,s)&&!i[s])return!1;return!0}function D2(e,t,n,r){return void 0===n||void 0===r?C2(e,t+1):C2(e,t+1,2*n,2*r)&&C2(e,t+1,2*n,2*r+1)&&C2(e,t+1,2*n+1,2*r)&&C2(e,t+1,2*n+1,2*r+1)}function E2(e,t,n,r,o){e[t]?(e[t][n]||(e[t][n]={}),e[t][n][r]=o):t2.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",t)}function F2(e,t){e[t]={}}function a9(e){_8.console.assert(e,"[TileCache.cacheTile] options is required"),_8.console.assert(e.tile,"[TileCache.cacheTile] options.tile is required"),_8.console.assert(e.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=e.tile,this.tiledImage=e.tiledImage}function b9(e){_8.console.assert(e,"[ImageRecord] options is required"),_8.console.assert(e.image,"[ImageRecord] options.image is required"),this._image=e.image,this._tiles=[]}!function(r){r.version={versionStr:"2.4.2",major:parseInt("2",10),minor:parseInt("4",10),revision:parseInt("2",10)};var e,t={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},n=Object.prototype.toString,o=Object.prototype.hasOwnProperty;r.isFunction=function(e){return"function"===r.type(e)},r.isArray=Array.isArray||function(e){return"array"===r.type(e)},r.isWindow=function(e){return e&&"object"===_typeof(e)&&"setInterval"in e},r.type=function(e){return null==e?String(e):t[n.call(e)]||"object"},r.isPlainObject=function(e){if(!e||"object"!==OpenSeadragon.type(e)||e.nodeType||r.isWindow(e))return!1;if(e.constructor&&!o.call(e,"constructor")&&!o.call(e.constructor.prototype,"isPrototypeOf"))return!1;var t;for(var n in e)t=n;return void 0===t||o.call(e,t)},r.isEmptyObject=function(e){for(var t in e)return!1;return!0},r.freezeObject=function(e){return Object.freeze?r.freezeObject=Object.freeze:r.freezeObject=function(e){return e},r.freezeObject(e)},r.supportsCanvas=(e=document.createElement("canvas"),!(!r.isFunction(e.getContext)||!e.getContext("2d"))),r.isCanvasTainted=function(e){var t=!1;try{e.getContext("2d").getImageData(0,0,1,1)}catch(e){t=!0}return t},r.pixelDensityRatio=function(){if(r.supportsCanvas){var e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return Math.max(t,1)/n}return 1}()}(OpenSeadragon),function($){$.extend=function(){var e,t,n,r,o,i,a=arguments[0]||{},s=arguments.length,l=!1,c=1;for("boolean"==typeof a&&(l=a,a=arguments[1]||{},c=2),"object"===_typeof(a)||OpenSeadragon.isFunction(a)||(a={}),s===c&&(a=this,--c);c<s;c++)if(null!==(e=arguments[c])||void 0!==e)for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(OpenSeadragon.isPlainObject(r)||(o=OpenSeadragon.isArray(r)))?(i=o?(o=!1,n&&OpenSeadragon.isArray(n)?n:[]):n&&OpenSeadragon.isPlainObject(n)?n:{},a[t]=OpenSeadragon.extend(l,i,r)):void 0!==r&&(a[t]=r));return a};var isIOSDevice=function(){if("object"!==("undefined"==typeof navigator?"undefined":_typeof(navigator)))return!1;var e=navigator.userAgent;return"string"==typeof e&&(-1!==e.indexOf("iPhone")||-1!==e.indexOf("iPad")||-1!==e.indexOf("iPod"))};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(t,n){return function(){var e=arguments;return void 0===e&&(e=[]),n.apply(t,e)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e},getElementPosition:function(e){var t,n,r=new $.Point;for(n=getOffsetParent(e=$.getElement(e),t="fixed"==$.getElementStyle(e).position);n;)r.x+=e.offsetLeft,r.y+=e.offsetTop,t&&(r=r.plus($.getPageScroll())),n=getOffsetParent(e=n,t="fixed"==$.getElementStyle(e).position);return r},getElementOffset:function(e){var t,n,r=(e=$.getElement(e))&&e.ownerDocument,o={top:0,left:0};return r?(t=r.documentElement,"undefined"!==_typeof(e.getBoundingClientRect)&&(o=e.getBoundingClientRect()),n=r==r.window?r:9===r.nodeType&&(r.defaultView||r.parentWindow),new $.Point(o.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0),o.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0))):new $.Point},getElementSize:function(e){return e=$.getElement(e),new $.Point(e.clientWidth,e.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(e){return(e=$.getElement(e)).currentStyle}:function(e){return e=$.getElement(e),window.getComputedStyle(e,"")},getCssPropertyWithVendorPrefix:function(e){var s={};return $.getCssPropertyWithVendorPrefix=function(e){if(void 0!==s[e])return s[e];var t=document.createElement("div").style,n=null;if(void 0!==t[e])n=e;else for(var r=["Webkit","Moz","MS","O","webkit","moz","ms","o"],o=$.capitalizeFirstLetter(e),i=0;i<r.length;i++){var a=r[i]+o;if(void 0!==t[a]){n=a;break}}return s[e]=n},$.getCssPropertyWithVendorPrefix(e)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},positiveModulo:function(e,t){var n=e%t;return n<0&&(n+=t),n},pointInElement:function(e,t){e=$.getElement(e);var n=$.getElementOffset(e),r=$.getElementSize(e);return t.x>=n.x&&t.x<n.x+r.x&&t.y<n.y+r.y&&t.y>=n.y},getEvent:function(e){return $.getEvent=e?function(e){return e}:function(){return window.event},$.getEvent(e)},getMousePosition:function(e){if("number"==typeof e.pageX)$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.pageX,t.y=e.pageY,t};else{if("number"!=typeof e.clientX)throw new Error("Unknown event mouse position, no known technique.");$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,t}}return $.getMousePosition(e)},getPageScroll:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.pageXOffset)$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(t.scrollLeft||t.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!e.scrollLeft&&!e.scrollTop)return new $.Point(0,0);$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return $.getPageScroll()},setPageScroll:function(e){if(void 0!==window.scrollTo)$.setPageScroll=function(e){window.scrollTo(e.x,e.y)};else{var t=$.getPageScroll();if(t.x===e.x&&t.y===e.y)return;document.body.scrollLeft=e.x,document.body.scrollTop=e.y;var n=$.getPageScroll();if(n.x!==t.x&&n.y!==t.y)return void($.setPageScroll=function(e){document.body.scrollLeft=e.x,document.body.scrollTop=e.y});if(document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y,(n=$.getPageScroll()).x!==t.x&&n.y!==t.y)return void($.setPageScroll=function(e){document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y});$.setPageScroll=function(e){}}return $.setPageScroll(e)},getWindowSize:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.innerWidth)$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(e.clientWidth||e.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!t.clientWidth&&!t.clientHeight)throw new Error("Unknown window size, no known technique.");$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)}}return $.getWindowSize()},makeCenteredNode:function(e){e=$.getElement(e);var t=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(t[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(t[1].style,{display:"table-row"}),$.extend(t[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),t[0].appendChild(t[1]),t[1].appendChild(t[2]),t[2].appendChild(e),t[0]},makeNeutralElement:function(e){var t=document.createElement(e),n=t.style;return n.background="transparent none",n.border="none",n.margin="0px",n.padding="0px",n.position="static",t},now:function(){return Date.now?$.now=Date.now:$.now=function(){return(new Date).getTime()},$.now()},makeTransparentImage:function(e){return $.makeTransparentImage=function(e){var t=$.makeNeutralElement("img");return t.src=e,t},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(e){var t=$.makeNeutralElement("img"),n=null;return(n=$.makeNeutralElement("span")).style.display="inline-block",t.onload=function(){n.style.width=n.style.width||t.width+"px",n.style.height=n.style.height||t.height+"px",t.onload=null,t=null},t.src=e,n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')",n}),$.makeTransparentImage(e)},setElementOpacity:function(e,t,n){var r;e=$.getElement(e),n&&!$.Browser.alpha&&(t=Math.round(t)),$.Browser.opacity?e.style.opacity=t<1?t:"":t<1?(r="alpha(opacity="+Math.round(100*t)+")",e.style.filter=r):e.style.filter=""},setElementTouchActionNone:function(e){void 0!==(e=$.getElement(e)).style.touchAction?e.style.touchAction="none":void 0!==e.style.msTouchAction&&(e.style.msTouchAction="none")},addClass:function(e,t){(e=$.getElement(e)).className?-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=" "+t):e.className=t},indexOf:function(e,t,n){return Array.prototype.indexOf?this.indexOf=function(e,t,n){return e.indexOf(t,n)}:this.indexOf=function(e,t,n){var r,o,i=n||0;if(!e)throw new TypeError;if(0===(o=e.length)||o<=i)return-1;for(i<0&&(i=o-Math.abs(i)),r=i;r<o;r++)if(e[r]===t)return r;return-1},this.indexOf(e,t,n)},removeClass:function(e,t){var n,r,o=[];for(n=(e=$.getElement(e)).className.split(/\s+/),r=0;r<n.length;r++)n[r]&&n[r]!==t&&o.push(n[r]);e.className=o.join(" ")},addEvent:function(){if(window.addEventListener)return function(e,t,n,r){(e=$.getElement(e)).addEventListener(t,n,r)};if(window.attachEvent)return function(e,t,n,r){(e=$.getElement(e)).attachEvent("on"+t,n)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(e,t,n,r){(e=$.getElement(e)).removeEventListener(t,n,r)};if(window.detachEvent)return function(e,t,n,r){(e=$.getElement(e)).detachEvent("on"+t,n)};throw new Error("No known event model.")}(),cancelEvent:function(e){(e=$.getEvent(e)).preventDefault?$.cancelEvent=function(e){e.preventDefault()}:$.cancelEvent=function(e){(e=$.getEvent(e)).cancel=!0,e.returnValue=!1},$.cancelEvent(e)},stopEvent:function(e){(e=$.getEvent(e)).stopPropagation?$.stopEvent=function(e){e.stopPropagation()}:$.stopEvent=function(e){(e=$.getEvent(e)).cancelBubble=!0},$.stopEvent(e)},createCallback:function(n,r){var e,o=[];for(e=2;e<arguments.length;e++)o.push(arguments[e]);return function(){var e,t=o.concat([]);for(e=0;e<arguments.length;e++)t.push(arguments[e]);return r.apply(n,t)}},getUrlParameter:function(e){var t=URLPARAMS[e];return t||null},getUrlProtocol:function(e){var t=e.match(/^([a-z]+:)\/\//i);return null===t?window.location.protocol:t[1].toLowerCase()},createAjaxRequest:function(e){var t;try{t=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=!1}if(t)window.XMLHttpRequest?$.createAjaxRequest=function(e){return e?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");$.createAjaxRequest=function(){return new XMLHttpRequest}}return $.createAjaxRequest(e)},makeAjaxRequest:function(e,n,r){var t,o,i;$.isPlainObject(e)&&(n=e.success,r=e.error,t=e.withCredentials,o=e.headers,i=e.responseType||null,e=e.url);var a=$.getUrlProtocol(e),s=$.createAjaxRequest("file:"===a);if(!$.isFunction(n))throw new Error("makeAjaxRequest requires a success callback");s.onreadystatechange=function(){4==s.readyState&&(s.onreadystatechange=function(){},200<=s.status&&s.status<300||0===s.status&&"http:"!==a&&"https:"!==a?n(s):($.console.log("AJAX request returned %d: %s",s.status,e),$.isFunction(r)&&r(s)))};try{if(s.open("GET",e,!0),i&&(s.responseType=i),o)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&s.setRequestHeader(l,o[l]);t&&(s.withCredentials=!0),s.send(null)}catch(t){var c=t.message;if($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10&&void 0!==t.number&&-2147024891==t.number&&(c+="\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain"),$.console.log("%s while making AJAX request: %s",t.name,c),s.onreadystatechange=function(){},window.XDomainRequest){var u=new window.XDomainRequest;if(u){u.onload=function(e){$.isFunction(n)&&n({responseText:u.responseText,status:200,statusText:"OK"})},u.onerror=function(e){$.isFunction(r)&&r({responseText:u.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{u.open("GET",e),u.send()}catch(e){$.isFunction(r)&&r(s,t)}}}else $.isFunction(r)&&r(s,t)}return s},jsonp:function(e){var n,t=e.url,r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=e.callbackName||"openseadragon"+$.now(),i=window[o],a="$1"+o+"$2",s=e.param||"callback",l=e.callback;t=t.replace(/(\=)\?(&|$)|\?\?/i,a),t+=(/\?/.test(t)?"&":"?")+s+"="+o,window[o]=function(e){if(i)window[o]=i;else try{delete window[o]}catch(e){}l&&$.isFunction(l)&&l(e)},n=document.createElement("script"),void 0===e.async&&!1===e.async||(n.async="async"),e.scriptCharset&&(n.charset=e.scriptCharset),n.src=t,n.onload=n.onreadystatechange=function(e,t){!t&&n.readyState&&!/loaded|complete/.test(n.readyState)||(n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=void 0)},r.insertBefore(n,r.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(e){if(window.DOMParser)$.parseXml=function(e){return(new DOMParser).parseFromString(e,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");$.parseXml=function(e){var t=null;return(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t}}return $.parseXml(e)},parseJSON:function parseJSON(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(e){return!!FILEFORMATS[(e=e||"").toLowerCase()]}});var nullfunction=function(){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};function getOffsetParent(e,t){return t&&e!=document.body?document.body:e.offsetParent}!function(){var e=navigator.appVersion,t=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(t.substring(t.indexOf("MSIE")+5,t.indexOf(";",t.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(0<=t.indexOf("Firefox")?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(t.substring(t.indexOf("Firefox")+8))):0<=t.indexOf("Safari")?($.Browser.vendor=0<=t.indexOf("Chrome")?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(t.substring(t.substring(0,t.indexOf("Safari")).lastIndexOf("/")+1,t.indexOf("Safari")))):null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(t)&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1)));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(e)}var n,r,o,i=window.location.search.substring(1).split("&");for(o=0;o<i.length;o++)if(0<(r=(n=i[o]).indexOf("="))){var a=n.substring(0,r),s=n.substring(r+1);try{URLPARAMS[a]=decodeURIComponent(s)}catch(e){$.console.error("Ignoring malformed URL parameter: %s=%s",a,s)}}$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)}(),function(e){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,n=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame;if(t&&n)$.requestAnimationFrame=function(){return t.apply(e,arguments)},$.cancelAnimationFrame=function(){return n.apply(e,arguments)};else{var r,o=[],i=[],a=0;$.requestAnimationFrame=function(e){return o.push([++a,e]),r=r||setInterval(function(){if(o.length){var e=$.now(),t=i;for(i=o,o=t;i.length;)i.shift()[1](e)}else clearInterval(r),r=void 0},20),a},$.cancelAnimationFrame=function(e){var t,n;for(t=0,n=o.length;t<n;t+=1)if(o[t][0]===e)return void o.splice(t,1);for(t=0,n=i.length;t<n;t+=1)if(i[t][0]===e)return void i.splice(t,1)}}}(window)}(OpenSeadragon),__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){return OpenSeadragon})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),ap=OpenSeadragon,bp={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""},document.exitFullscreen?(bp.supportsFullScreen=!0,bp.getFullScreenElement=function(){return document.fullscreenElement},bp.requestFullScreen=function(e){return e.requestFullscreen()},bp.exitFullScreen=function(){document.exitFullscreen()},bp.fullScreenEventName="fullscreenchange",bp.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(bp.supportsFullScreen=!0,bp.getFullScreenElement=function(){return document.msFullscreenElement},bp.requestFullScreen=function(e){return e.msRequestFullscreen()},bp.exitFullScreen=function(){document.msExitFullscreen()},bp.fullScreenEventName="MSFullscreenChange",bp.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(bp.supportsFullScreen=!0,bp.getFullScreenElement=function(){return document.webkitFullscreenElement},bp.requestFullScreen=function(e){return e.webkitRequestFullscreen()},bp.exitFullScreen=function(){document.webkitExitFullscreen()},bp.fullScreenEventName="webkitfullscreenchange",bp.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(bp.supportsFullScreen=!0,bp.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},bp.requestFullScreen=function(e){return e.webkitRequestFullScreen()},bp.exitFullScreen=function(){document.webkitCancelFullScreen()},bp.fullScreenEventName="webkitfullscreenchange",bp.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(bp.supportsFullScreen=!0,bp.getFullScreenElement=function(){return document.mozFullScreenElement},bp.requestFullScreen=function(e){return e.mozRequestFullScreen()},bp.exitFullScreen=function(){document.mozCancelFullScreen()},bp.fullScreenEventName="mozfullscreenchange",bp.fullScreenErrorEventName="mozfullscreenerror"),bp.isFullScreen=function(){return null!==bp.getFullScreenElement()},bp.cancelFullScreen=function(){ap.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),bp.exitFullScreen()},ap.extend(ap,bp),mp=OpenSeadragon,mp.EventSource=function(){this.events={}},mp.EventSource.prototype={addOnceHandler:function(n,r,e,o){var i=this;o=o||1;var a=0;this.addHandler(n,function e(t){++a===o&&i.removeHandler(n,e),r(t)},e)},addHandler:function(e,t,n){var r=this.events[e];r||(this.events[e]=r=[]),t&&mp.isFunction(t)&&(r[r.length]={handler:t,userData:n||null})},removeHandler:function(e,t){var n,r=this.events[e],o=[];if(r&&mp.isArray(r)){for(n=0;n<r.length;n++)r[n].handler!==t&&o.push(r[n]);this.events[e]=o}},removeAllHandlers:function(e){if(e)this.events[e]=[];else for(var t in this.events)this.events[t]=[]},getHandler:function(e){var o=this.events[e];return o&&o.length?(o=1===o.length?[o[0]]:Array.apply(null,o),function(e,t){var n,r=o.length;for(n=0;n<r;n++)o[n]&&(t.eventSource=e,t.userData=o[n].userData,o[n].handler(t))}):null},raiseEvent:function(e,t){var n=this.getHandler(e);n&&n(this,t=t||{})}},function(g){var l,i,c,e,u=[],y={};function a(e,t){return e.hash.toString()+t.type+t.id.toString()}function r(){var e,t,n,r,o,i,a=l.length,s=g.now();for(r=s-c,c=s,e=0;e<a;e++)(n=(t=l[e]).gPoint).direction=Math.atan2(n.currentPos.y-t.lastPos.y,n.currentPos.x-t.lastPos.x),o=t.lastPos.distanceTo(n.currentPos),t.lastPos=n.currentPos,i=1e3*o/(1+r),n.speed=.75*i+.25*n.speed}function o(e){var t,n=y[e.hash],r=n.activePointersLists.length;for(t=0;t<r;t++)0<n.activePointersLists[t].captureCount&&(g.removeEvent(g.MouseTracker.captureElement,"mousemove",n.mousemovecaptured,!0),g.removeEvent(g.MouseTracker.captureElement,"mouseup",n.mouseupcaptured,!0),g.removeEvent(g.MouseTracker.captureElement,g.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",n.pointermovecaptured,!0),g.removeEvent(g.MouseTracker.captureElement,g.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",n.pointerupcaptured,!0),g.removeEvent(g.MouseTracker.captureElement,"touchmove",n.touchmovecaptured,!0),g.removeEvent(g.MouseTracker.captureElement,"touchend",n.touchendcaptured,!0),n.activePointersLists[t].captureCount=0);for(t=0;t<r;t++)n.activePointersLists.pop()}function t(e){var t,n,r=y[e.hash];if(r.tracking){for(n=0;n<g.MouseTracker.subscribeEvents.length;n++)t=g.MouseTracker.subscribeEvents[n],g.removeEvent(e.element,t,r[t],!1);o(e),r.tracking=!1}}function s(e,t){var n=y[e.hash];if("pointerevent"===t)return{upName:g.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:n.pointerupcaptured,moveName:g.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:n.pointermovecaptured};if("mouse"===t)return{upName:"mouseup",upHandler:n.mouseupcaptured,moveName:"mousemove",moveHandler:n.mousemovecaptured};if("touch"===t)return{upName:"touchend",upHandler:n.touchendcaptured,moveName:"touchmove",moveHandler:n.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function p(e,t,n){var r,o=e.getActivePointersListByType(t);o.captureCount+=n||1,1===o.captureCount&&(g.Browser.vendor===g.BROWSERS.IE&&g.Browser.version<9?e.element.setCapture(!0):(r=s(e,g.MouseTracker.havePointerEvents?"pointerevent":t),K&&$(window.top)&&g.addEvent(window.top,r.upName,r.upHandler,!0),g.addEvent(g.MouseTracker.captureElement,r.upName,r.upHandler,!0),g.addEvent(g.MouseTracker.captureElement,r.moveName,r.moveHandler,!0)))}function h(e,t,n){var r,o=e.getActivePointersListByType(t);o.captureCount-=n||1,0===o.captureCount&&(g.Browser.vendor===g.BROWSERS.IE&&g.Browser.version<9?e.element.releaseCapture():(r=s(e,g.MouseTracker.havePointerEvents?"pointerevent":t),K&&$(window.top)&&g.removeEvent(window.top,r.upName,r.upHandler,!0),g.removeEvent(g.MouseTracker.captureElement,r.moveName,r.moveHandler,!0),g.removeEvent(g.MouseTracker.captureElement,r.upName,r.upHandler,!0)))}function d(e){var t;if(g.MouseTracker.unprefixedPointerEvents)t=e.pointerType;else switch(e.pointerType){case 2:t="touch";break;case 3:t="pen";break;case 4:t="mouse";break;default:t=""}return t}function f(e){return g.getMousePosition(e)}function m(e,t){return v(f(e),t)}function v(e,t){var n=g.getElementOffset(t);return e.minus(n)}function b(e,t){return new g.Point((e.x+t.x)/2,(e.y+t.y)/2)}function n(e,t){var n={target:(t=g.getEvent(t)).target||t.srcElement,type:"wheel",shiftKey:t.shiftKey||!1,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX?t.pageX:t.clientX,pageY:t.pageY?t.pageY:t.clientY,deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0};"mousewheel"==g.MouseTracker.wheelEventName?n.deltaY=-t.wheelDelta/g.DEFAULT_SETTINGS.pixelsPerWheelLine:n.deltaY=t.detail,w(e,n,t)}function w(e,t,n){var r;r=t.deltaY<0?1:-1,e.scrollHandler&&!1===e.scrollHandler({eventSource:e,pointerType:"mouse",position:m(t,e.element),scroll:r,shift:t.shiftKey,isTouchEvent:!1,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(n)}function x(e,t){if(e!==t){for(;t&&t!==e;)t=t.parentNode;return t===e}}function _(e,t){B(e,t,[{id:g.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:f(t),currentTime:g.now()}])}function S(e,t){H(e,t,[{id:g.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:f(t),currentTime:g.now()}])}function E(e){return g.Browser.vendor===g.BROWSERS.IE&&g.Browser.version<9?1===e?0:2===e?2:4===e?1:-1:e}function T(e,t){V(e,t=g.getEvent(t),[{id:g.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:f(t),currentTime:g.now()}],E(t.button))&&h(e,"mouse")}function P(e,t){W(e,t=g.getEvent(t),[{id:g.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:f(t),currentTime:g.now()}])}function O(e,t,n){var r,o=n.getLength(),i=[];if("touch"===n.type||0<n.contacts){for(r=0;r<o;r++)i.push(n.getByIndex(r));0<i.length&&(V(e,t,i,0),n.captureCount=1,h(e,n.type),H(e,t,i))}}function C(e,t){var n,r,o,i,a=t.changedTouches.length,s=[];for(n=g.now(),r=0;r<a;r++)s.push({id:t.changedTouches[r].identifier,type:"touch",currentPos:f(t.changedTouches[r]),currentTime:n});for(V(e,t,s,0)&&h(e,"touch",a),H(e,t,s),r=0;r<u.length;r++)if(u[r]!==e&&u[r].isTracking()&&x(u[r].element,e.element)){for(i=[],o=0;o<a;o++)i.push({id:t.changedTouches[o].identifier,type:"touch",currentPos:f(t.changedTouches[o]),currentTime:n});H(u[r],t,i)}g.cancelEvent(t)}function A(e,t){var n,r=t.changedTouches.length,o=[];for(n=0;n<r;n++)o.push({id:t.changedTouches[n].identifier,type:"touch",currentPos:f(t.changedTouches[n]),currentTime:g.now()});W(e,t,o),g.cancelEvent(t)}function R(e,t){t.currentTarget===t.relatedTarget||x(t.currentTarget,t.relatedTarget)||B(e,t,[{id:t.pointerId,type:d(t),isPrimary:t.isPrimary,currentPos:f(t),currentTime:g.now()}])}function k(e,t){t.currentTarget===t.relatedTarget||x(t.currentTarget,t.relatedTarget)||H(e,t,[{id:t.pointerId,type:d(t),isPrimary:t.isPrimary,currentPos:f(t),currentTime:g.now()}])}function z(e,t){var n;U(e,t,[n={id:t.pointerId,type:d(t),isPrimary:t.isPrimary,currentPos:f(t),currentTime:g.now()}],t.button)&&(g.stopEvent(t),p(e,n.type)),(e.clickHandler||e.dblClickHandler||e.pressHandler||e.dragHandler||e.dragEndHandler||e.pinchHandler)&&g.cancelEvent(t)}function D(e,t){j(e,t)}function j(e,t){var n;V(e,t,[n={id:t.pointerId,type:d(t),isPrimary:t.isPrimary,currentPos:f(t),currentTime:g.now()}],t.button)&&h(e,n.type)}function I(e,t){N(e,t)}function N(e,t){W(e,t,[{id:t.pointerId,type:d(t),isPrimary:t.isPrimary,currentPos:f(t),currentTime:g.now()}])}function L(e,t){var n,r,o,i;n={id:t.pointerId,type:d(t)},V(r=e,o=t,i=[n],0),H(r,o,i)}function M(e,t){return Object.prototype.hasOwnProperty.call(t,"isPrimary")||(0===e.getLength()?t.isPrimary=!0:t.isPrimary=!1),t.speed=0,t.direction=0,t.contactPos=t.currentPos,t.contactTime=t.currentTime,t.lastPos=t.currentPos,t.lastTime=t.currentTime,e.add(t)}function F(e,t){var n,r;return e.getById(t.id)?(n=e.removeById(t.id),Object.prototype.hasOwnProperty.call(t,"isPrimary")||(r=e.getPrimary())||(r=e.getByIndex(0))&&(r.isPrimary=!0)):n=e.getLength(),n}function B(e,t,n){var r,o,i,a=e.getActivePointersListByType(n[0].type),s=n.length;for(r=0;r<s;r++)o=n[r],(i=a.getById(o.id))?(i.insideElement=!0,i.lastPos=i.currentPos,i.lastTime=i.currentTime,i.currentPos=o.currentPos,i.currentTime=o.currentTime,o=i):(o.captured=!1,o.insideElementPressed=!1,o.insideElement=!0,M(a,o)),e.enterHandler&&!1===e.enterHandler({eventSource:e,pointerType:o.type,position:v(o.currentPos,e.element),buttons:a.buttons,pointers:e.getActivePointerCount(),insideElementPressed:o.insideElementPressed,buttonDownAny:0!==a.buttons,isTouchEvent:"touch"===o.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t)}function H(e,t,n){var r,o,i,a=e.getActivePointersListByType(n[0].type),s=n.length;for(r=0;r<s;r++)o=n[r],(i=a.getById(o.id))&&(i.captured?(i.insideElement=!1,i.lastPos=i.currentPos,i.lastTime=i.currentTime,i.currentPos=o.currentPos,i.currentTime=o.currentTime):F(a,i),o=i),e.exitHandler&&!1===e.exitHandler({eventSource:e,pointerType:o.type,position:o.currentPos&&v(o.currentPos,e.element),buttons:a.buttons,pointers:e.getActivePointerCount(),insideElementPressed:!!i&&i.insideElementPressed,buttonDownAny:0!==a.buttons,isTouchEvent:"touch"===o.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t)}function U(e,t,n,r){var o,i,a,s=y[e.hash],l=e.getActivePointersListByType(n[0].type),c=n.length;void 0!==t.buttons?l.buttons=t.buttons:g.Browser.vendor===g.BROWSERS.IE&&g.Browser.version<9?0===r?l.buttons+=1:1===r?l.buttons+=4:2===r?l.buttons+=2:3===r?l.buttons+=8:4===r?l.buttons+=16:5===r&&(l.buttons+=32):0===r?l.buttons|=1:1===r?l.buttons|=4:2===r?l.buttons|=2:3===r?l.buttons|=8:4===r?l.buttons|=16:5===r&&(l.buttons|=32);var u=e.getActivePointersListsExceptType(n[0].type);for(o=0;o<u.length;o++)O(e,t,u[o]);if(0===r){for(o=0;o<c;o++)i=n[o],(a=l.getById(i.id))?(a.captured=!0,a.insideElementPressed=!0,a.insideElement=!0,a.contactPos=i.currentPos,a.contactTime=i.currentTime,a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=i.currentPos,a.currentTime=i.currentTime,i=a):(i.captured=!0,i.insideElementPressed=!0,i.insideElement=!0,M(l,i)),l.addContact(),(e.dragHandler||e.dragEndHandler||e.pinchHandler)&&g.MouseTracker.gesturePointVelocityTracker.addPoint(e,i),1===l.contacts?e.pressHandler&&!1===e.pressHandler({eventSource:e,pointerType:i.type,position:v(i.contactPos,e.element),buttons:l.buttons,isTouchEvent:"touch"===i.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t):2===l.contacts&&e.pinchHandler&&"touch"===i.type&&(s.pinchGPoints=l.asArray(),s.lastPinchDist=s.currentPinchDist=s.pinchGPoints[0].currentPos.distanceTo(s.pinchGPoints[1].currentPos),s.lastPinchCenter=s.currentPinchCenter=b(s.pinchGPoints[0].currentPos,s.pinchGPoints[1].currentPos));return 1}e.nonPrimaryPressHandler&&!1===e.nonPrimaryPressHandler({eventSource:e,pointerType:n[0].type,position:v(n[0].currentPos,e.element),button:r,buttons:l.buttons,isTouchEvent:"touch"===n[0].type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t)}function V(e,t,n,r){var o,i,a,s,l,c,u=y[e.hash],p=e.getActivePointersListByType(n[0].type),h=n.length,d=!1,f=!1;if(void 0!==t.buttons?p.buttons=t.buttons:g.Browser.vendor===g.BROWSERS.IE&&g.Browser.version<9?0===r?--p.buttons:1===r?p.buttons-=4:2===r?p.buttons-=2:3===r?p.buttons-=8:4===r?p.buttons-=16:5===r&&(p.buttons-=32):0===r?p.buttons^=-2:1===r?p.buttons^=-5:2===r?p.buttons^=-3:3===r?p.buttons^=-9:4===r?p.buttons^=-17:5===r&&(p.buttons^=-33),0===r){if(void 0!==n[0].currentPos){for(a=0;a<h;a++)s=n[a],(l=p.getById(s.id))&&(l.captured&&(f=d=!(l.captured=!1)),l.lastPos=l.currentPos,l.lastTime=l.currentTime,l.currentPos=s.currentPos,l.currentTime=s.currentTime,l.insideElement||F(p,l),o=l.currentPos,i=l.currentTime,f?(p.removeContact(),(e.dragHandler||e.dragEndHandler||e.pinchHandler)&&g.MouseTracker.gesturePointVelocityTracker.removePoint(e,l),0===p.contacts?(e.releaseHandler&&!1===e.releaseHandler({eventSource:e,pointerType:l.type,position:v(o,e.element),buttons:p.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t),e.dragEndHandler&&!l.currentPos.equals(l.contactPos)&&!1===e.dragEndHandler({eventSource:e,pointerType:l.type,position:v(l.currentPos,e.element),speed:l.speed,direction:l.direction,shift:t.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t),(e.clickHandler||e.dblClickHandler)&&l.insideElement&&(c=i-l.contactTime<=e.clickTimeThreshold&&l.contactPos.distanceTo(o)<=e.clickDistThreshold,e.clickHandler&&!1===e.clickHandler({eventSource:e,pointerType:l.type,position:v(l.currentPos,e.element),quick:c,shift:t.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t),e.dblClickHandler&&c&&(p.clicks++,1===p.clicks?(u.lastClickPos=o,u.dblClickTimeOut=setTimeout(function(){p.clicks=0},e.dblClickTimeThreshold)):2===p.clicks&&(clearTimeout(u.dblClickTimeOut),p.clicks=0,u.lastClickPos.distanceTo(o)<=e.dblClickDistThreshold&&!1===e.dblClickHandler({eventSource:e,pointerType:l.type,position:v(l.currentPos,e.element),shift:t.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t),u.lastClickPos=null)))):2===p.contacts&&e.pinchHandler&&"touch"===l.type&&(u.pinchGPoints=p.asArray(),u.lastPinchDist=u.currentPinchDist=u.pinchGPoints[0].currentPos.distanceTo(u.pinchGPoints[1].currentPos),u.lastPinchCenter=u.currentPinchCenter=b(u.pinchGPoints[0].currentPos,u.pinchGPoints[1].currentPos))):e.releaseHandler&&!1===e.releaseHandler({eventSource:e,pointerType:l.type,position:v(o,e.element),buttons:p.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t));return d}O(e,t,p)}else{e.nonPrimaryReleaseHandler&&!1===e.nonPrimaryReleaseHandler({eventSource:e,pointerType:n[0].type,position:v(n[0].currentPos,e.element),button:r,buttons:p.buttons,isTouchEvent:"touch"===n[0].type,originalEvent:t,preventDefaultAction:!1,userData:e.userData})&&g.cancelEvent(t);var m=e.getActivePointersListByType("mouse");O(e,t,m)}}function W(r,o,i){var e,t,n,a,s,l=y[r.hash],c=r.getActivePointersListByType(i[0].type),u=i.length;for(void 0!==o.buttons&&(c.buttons=o.buttons),e=0;e<u;e++)t=i[e],(n=c.getById(t.id))?(Object.prototype.hasOwnProperty.call(t,"isPrimary")&&(n.isPrimary=t.isPrimary),n.lastPos=n.currentPos,n.lastTime=n.currentTime,n.currentPos=t.currentPos,n.currentTime=t.currentTime):(t.captured=!1,t.insideElementPressed=!1,t.insideElement=!0,M(c,t));r.stopHandler&&"mouse"===i[0].type&&(clearTimeout(r.stopTimeOut),r.stopTimeOut=setTimeout(function(){var e,t,n;e=r,t=o,n=i[0].type,e.stopHandler&&e.stopHandler({eventSource:e,pointerType:n,position:m(t,e.element),buttons:e.getActivePointersListByType(n).buttons,isTouchEvent:"touch"===n,originalEvent:t,preventDefaultAction:!1,userData:e.userData})},r.stopDelay)),0===c.contacts?r.moveHandler&&!1===r.moveHandler({eventSource:r,pointerType:i[0].type,position:v(i[0].currentPos,r.element),buttons:c.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:o,preventDefaultAction:!1,userData:r.userData})&&g.cancelEvent(o):1===c.contacts?(r.moveHandler&&(n=c.asArray()[0],!1===r.moveHandler({eventSource:r,pointerType:n.type,position:v(n.currentPos,r.element),buttons:c.buttons,isTouchEvent:"touch"===n.type,originalEvent:o,preventDefaultAction:!1,userData:r.userData})&&g.cancelEvent(o)),r.dragHandler&&(s=(n=c.asArray()[0]).currentPos.minus(n.lastPos),!1===r.dragHandler({eventSource:r,pointerType:n.type,position:v(n.currentPos,r.element),buttons:c.buttons,delta:s,speed:n.speed,direction:n.direction,shift:o.shiftKey,isTouchEvent:"touch"===n.type,originalEvent:o,preventDefaultAction:!1,userData:r.userData})&&g.cancelEvent(o))):2===c.contacts&&(r.moveHandler&&(a=c.asArray(),!1===r.moveHandler({eventSource:r,pointerType:a[0].type,position:v(b(a[0].currentPos,a[1].currentPos),r.element),buttons:c.buttons,isTouchEvent:"touch"===a[0].type,originalEvent:o,preventDefaultAction:!1,userData:r.userData})&&g.cancelEvent(o)),r.pinchHandler&&"touch"===i[0].type&&(s=l.pinchGPoints[0].currentPos.distanceTo(l.pinchGPoints[1].currentPos))!=l.currentPinchDist&&(l.lastPinchDist=l.currentPinchDist,l.currentPinchDist=s,l.lastPinchCenter=l.currentPinchCenter,l.currentPinchCenter=b(l.pinchGPoints[0].currentPos,l.pinchGPoints[1].currentPos),!1===r.pinchHandler({eventSource:r,pointerType:"touch",gesturePoints:l.pinchGPoints,lastCenter:v(l.lastPinchCenter,r.element),center:v(l.currentPinchCenter,r.element),lastDistance:l.lastPinchDist,distance:l.currentPinchDist,shift:o.shiftKey,originalEvent:o,preventDefaultAction:!1,userData:r.userData})&&g.cancelEvent(o)))}g.MouseTracker=function(e){u.push(this);var t=arguments;g.isPlainObject(e)||(e={element:t[0],clickTimeThreshold:t[1],clickDistThreshold:t[2]}),this.hash=Math.random(),this.element=g.getElement(e.element),this.clickTimeThreshold=e.clickTimeThreshold||g.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=e.clickDistThreshold||g.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=e.dblClickTimeThreshold||g.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=e.dblClickDistThreshold||g.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=e.userData||null,this.stopDelay=e.stopDelay||50,this.enterHandler=e.enterHandler||null,this.exitHandler=e.exitHandler||null,this.pressHandler=e.pressHandler||null,this.nonPrimaryPressHandler=e.nonPrimaryPressHandler||null,this.releaseHandler=e.releaseHandler||null,this.nonPrimaryReleaseHandler=e.nonPrimaryReleaseHandler||null,this.moveHandler=e.moveHandler||null,this.scrollHandler=e.scrollHandler||null,this.clickHandler=e.clickHandler||null,this.dblClickHandler=e.dblClickHandler||null,this.dragHandler=e.dragHandler||null,this.dragEndHandler=e.dragEndHandler||null,this.pinchHandler=e.pinchHandler||null,this.stopHandler=e.stopHandler||null,this.keyDownHandler=e.keyDownHandler||null,this.keyUpHandler=e.keyUpHandler||null,this.keyHandler=e.keyHandler||null,this.focusHandler=e.focusHandler||null,this.blurHandler=e.blurHandler||null;var o=this;y[this.hash]={click:function(e){var t;t=e,o.clickHandler&&g.cancelEvent(t)},dblclick:function(e){var t;t=e,o.dblClickHandler&&g.cancelEvent(t)},keydown:function(e){var t,n;n=e,(t=o).keyDownHandler&&(n=g.getEvent(n),t.keyDownHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData})||g.cancelEvent(n))},keyup:function(e){var t,n;n=e,(t=o).keyUpHandler&&(n=g.getEvent(n),t.keyUpHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData})||g.cancelEvent(n))},keypress:function(e){var t,n;n=e,(t=o).keyHandler&&(n=g.getEvent(n),t.keyHandler({eventSource:t,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:t.userData})||g.cancelEvent(n))},focus:function(e){var t,n;n=e,(t=o).focusHandler&&(n=g.getEvent(n),!1===t.focusHandler({eventSource:t,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&g.cancelEvent(n))},blur:function(e){var t,n;n=e,(t=o).blurHandler&&(n=g.getEvent(n),!1===t.blurHandler({eventSource:t,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&g.cancelEvent(n))},wheel:function(e){var t;w(o,t=e,t)},mousewheel:function(e){n(o,e)},DOMMouseScroll:function(e){n(o,e)},MozMousePixelScroll:function(e){n(o,e)},mouseenter:function(e){var t,n;t=o,n=e,n=g.getEvent(n),_(t,n)},mouseleave:function(e){var t,n;t=o,n=e,n=g.getEvent(n),S(t,n)},mouseover:function(e){!function(e,t){if((t=g.getEvent(t)).currentTarget===t.relatedTarget||x(t.currentTarget,t.relatedTarget))return;_(e,t)}(o,e)},mouseout:function(e){!function(e,t){if((t=g.getEvent(t)).currentTarget===t.relatedTarget||x(t.currentTarget,t.relatedTarget))return;S(e,t)}(o,e)},mousedown:function(e){!function(e,t){var n;t=g.getEvent(t),n={id:g.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:f(t),currentTime:g.now()},U(e,t,[n],E(t.button))&&(g.stopEvent(t),p(e,"mouse"));(e.clickHandler||e.dblClickHandler||e.pressHandler||e.dragHandler||e.dragEndHandler)&&g.cancelEvent(t)}(o,e)},mouseup:function(e){T(o,e)},mouseupcaptured:function(e){var t;T(o,t=e),g.stopEvent(t)},mousemove:function(e){P(o,e)},mousemovecaptured:function(e){var t;P(o,t=e),g.stopEvent(t)},touchstart:function(e){!function(e,t){var n,r,o,i,a=t.changedTouches.length,s=[],l=e.getActivePointersListByType("touch");n=g.now(),l.getLength()>t.touches.length-a&&(g.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),O(e,t,l));for(r=0;r<a;r++)s.push({id:t.changedTouches[r].identifier,type:"touch",currentPos:f(t.changedTouches[r]),currentTime:n});for(B(e,t,s),r=0;r<u.length;r++)if(u[r]!==e&&u[r].isTracking()&&x(u[r].element,e.element)){for(i=[],o=0;o<a;o++)i.push({id:t.changedTouches[o].identifier,type:"touch",currentPos:f(t.changedTouches[o]),currentTime:n});B(u[r],t,i)}U(e,t,s,0)&&(g.stopEvent(t),p(e,"touch",a));g.cancelEvent(t)}(o,e)},touchend:function(e){C(o,e)},touchendcaptured:function(e){var t;C(o,t=e),g.stopEvent(t)},touchmove:function(e){A(o,e)},touchmovecaptured:function(e){var t;A(o,t=e),g.stopEvent(t)},touchcancel:function(e){var t,n,r;n=e,r=(t=o).getActivePointersListByType("touch"),O(t,n,r)},gesturestart:function(e){var t;(t=e).stopPropagation(),t.preventDefault()},gesturechange:function(e){var t;(t=e).stopPropagation(),t.preventDefault()},pointerover:function(e){R(o,e)},MSPointerOver:function(e){R(o,e)},pointerout:function(e){k(o,e)},MSPointerOut:function(e){k(o,e)},pointerdown:function(e){z(o,e)},MSPointerDown:function(e){z(o,e)},pointerup:function(e){D(o,e)},MSPointerUp:function(e){D(o,e)},pointermove:function(e){I(o,e)},MSPointerMove:function(e){I(o,e)},pointercancel:function(e){L(o,e)},MSPointerCancel:function(e){L(o,e)},pointerupcaptured:function(e){!function(e,t){e.getActivePointersListByType(d(t)).getById(t.pointerId)&&j(e,t);g.stopEvent(t)}(o,e)},pointermovecaptured:function(e){!function(e,t){e.getActivePointersListByType(d(t)).getById(t.pointerId)&&N(e,t);g.stopEvent(t)}(o,e)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},e.startDisabled||this.setTracking(!0)},g.MouseTracker.prototype={destroy:function(){var e;for(t(this),this.element=null,e=0;e<u.length;e++)if(u[e]===this){u.splice(e,1);break}y[this.hash]=null,delete y[this.hash]},isTracking:function(){return y[this.hash].tracking},setTracking:function(e){return(e?function(e){var t,n,r=y[e.hash];if(!r.tracking){for(n=0;n<g.MouseTracker.subscribeEvents.length;n++)t=g.MouseTracker.subscribeEvents[n],g.addEvent(e.element,t,r[t],!1);o(e),r.tracking=!0}}:t)(this),this},getActivePointersListsExceptType:function(e){for(var t=y[this.hash],n=[],r=0;r<t.activePointersLists.length;++r)t.activePointersLists[r].type!==e&&n.push(t.activePointersLists[r]);return n},getActivePointersListByType:function(e){var t,n,r=y[this.hash],o=r.activePointersLists.length;for(t=0;t<o;t++)if(r.activePointersLists[t].type===e)return r.activePointersLists[t];return n=new g.MouseTracker.GesturePointList(e),r.activePointersLists.push(n),n},getActivePointerCount:function(){var e,t=y[this.hash],n=t.activePointersLists.length,r=0;for(e=0;e<n;e++)r+=t.activePointersLists[e].getLength();return r},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},g.MouseTracker.resetAllMouseTrackers=function(){for(var e=0;e<u.length;e++)u[e].isTracking()&&(u[e].setTracking(!1),u[e].setTracking(!0))},g.MouseTracker.gesturePointVelocityTracker=(l=[],c=i=0,{addPoint:function(e,t){var n=a(e,t);l.push({guid:n,gPoint:t,lastPos:t.currentPos}),1===l.length&&(c=g.now(),i=window.setInterval(r,50))},removePoint:function(e,t){var n,r=a(e,t),o=l.length;for(n=0;n<o;n++)if(l[n].guid===r){l.splice(n,1),0==--o&&window.clearInterval(i);break}}}),g.MouseTracker.captureElement=document,g.MouseTracker.wheelEventName=g.Browser.vendor==g.BROWSERS.IE&&8<g.Browser.version||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",g.MouseTracker.supportsMouseCapture=(e=document.createElement("div"),g.isFunction(e.setCapture)&&g.isFunction(e.releaseCapture)),g.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",g.MouseTracker.wheelEventName],"DOMMouseScroll"==g.MouseTracker.wheelEventName&&g.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||g.Browser.vendor!==g.BROWSERS.IE)?(g.MouseTracker.havePointerEvents=!0,g.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),g.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?g.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:g.MouseTracker.maxTouchPoints=0,g.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(g.MouseTracker.havePointerEvents=!0,g.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),g.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?g.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:g.MouseTracker.maxTouchPoints=0,g.MouseTracker.haveMouseEnter=!1):(g.MouseTracker.havePointerEvents=!1,g.Browser.vendor===g.BROWSERS.IE&&g.Browser.version<9?(g.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),g.MouseTracker.haveMouseEnter=!0):(g.MouseTracker.subscribeEvents.push("mouseover","mouseout"),g.MouseTracker.haveMouseEnter=!1),g.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&g.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&g.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),g.MouseTracker.mousePointerId="legacy-mouse",g.MouseTracker.maxTouchPoints=10),g.MouseTracker.GesturePointList=function(e){this._gPoints=[],this.type=e,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},g.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(e){return this._gPoints.push(e)},removeById:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].id===e){this._gPoints.splice(t,1);break}return this._gPoints.length},getByIndex:function(e){return e<this._gPoints.length?this._gPoints[e]:null},getById:function(e){var t,n=this._gPoints.length;for(t=0;t<n;t++)if(this._gPoints[t].id===e)return this._gPoints[t];return null},getPrimary:function(){var e,t=this._gPoints.length;for(e=0;e<t;e++)if(this._gPoints[e].isPrimary)return this._gPoints[e];return null},addContact:function(){++this.contacts,1<this.contacts&&("mouse"===this.type||"pen"===this.type)&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};var K=function(){try{return window.self!==window.top}catch(e){return!0}}();function $(e){try{return e.addEventListener&&e.removeEventListener}catch(e){return}}}(OpenSeadragon),bz=OpenSeadragon,bz.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},bz.Control=function(e,t,n){var r=e.parentNode;"number"==typeof t&&(bz.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),t={anchor:t}),t.attachToViewer=void 0===t.attachToViewer||t.attachToViewer,this.autoFade=void 0===t.autoFade||t.autoFade,this.element=e,this.anchor=t.anchor,this.container=n,this.anchor==bz.ControlAnchor.ABSOLUTE?(this.wrapper=bz.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof t.top?t.top+"px":t.top,this.wrapper.style.left="number"==typeof t.left?t.left+"px":t.left,this.wrapper.style.height="number"==typeof t.height?t.height+"px":t.height,this.wrapper.style.width="number"==typeof t.width?t.width+"px":t.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=bz.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==bz.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),t.attachToViewer?this.anchor==bz.ControlAnchor.TOP_RIGHT||this.anchor==bz.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):r.appendChild(this.wrapper)},bz.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(e){this.wrapper.style.display=e?this.anchor==bz.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(e){this.element[bz.SIGNAL]&&bz.Browser.vendor==bz.BROWSERS.IE?bz.setElementOpacity(this.element,e,!0):bz.setElementOpacity(this.wrapper,e,!0)}},mz=OpenSeadragon,mz.ControlDock=function(e){var t,n,r=["topleft","topright","bottomright","bottomleft"];for(mz.extend(!0,this,{id:"controldock-"+mz.now()+"-"+Math.floor(1e6*Math.random()),container:mz.makeNeutralElement("div"),controls:[]},e),this.container.onsubmit=function(){return!1},this.element&&(this.element=mz.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),n=0;n<r.length;n++)t=r[n],this.controls[t]=mz.makeNeutralElement("div"),this.controls[t].style.position="absolute",t.match("left")&&(this.controls[t].style.left="0px"),t.match("right")&&(this.controls[t].style.right="0px"),t.match("top")&&(this.controls[t].style.top="0px"),t.match("bottom")&&(this.controls[t].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},mz.ControlDock.prototype={addControl:function(e,t){var n=null;if(!(0<=nz(this,e=mz.getElement(e)))){switch(t.anchor){case mz.ControlAnchor.TOP_RIGHT:n=this.controls.topright,e.style.position="relative",e.style.paddingRight="0px",e.style.paddingTop="0px";break;case mz.ControlAnchor.BOTTOM_RIGHT:n=this.controls.bottomright,e.style.position="relative",e.style.paddingRight="0px",e.style.paddingBottom="0px";break;case mz.ControlAnchor.BOTTOM_LEFT:n=this.controls.bottomleft,e.style.position="relative",e.style.paddingLeft="0px",e.style.paddingBottom="0px";break;case mz.ControlAnchor.TOP_LEFT:n=this.controls.topleft,e.style.position="relative",e.style.paddingLeft="0px",e.style.paddingTop="0px";break;case mz.ControlAnchor.ABSOLUTE:n=this.container,e.style.margin="0px",e.style.padding="0px";break;default:case mz.ControlAnchor.NONE:n=this.container,e.style.margin="0px",e.style.padding="0px"}this.controls.push(new mz.Control(e,t,n)),e.style.display="inline-block"}},removeControl:function(e){var t=nz(this,e=mz.getElement(e));return 0<=t&&(this.controls[t].destroy(),this.controls.splice(t,1)),this},clearControls:function(){for(;0<this.controls.length;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var e;for(e=this.controls.length-1;0<=e;e--)if(this.controls[e].isVisible())return!0;return!1},setControlsEnabled:function(e){var t;for(t=this.controls.length-1;0<=t;t--)this.controls[t].setVisible(e);return this}},OpenSeadragon.Placement=OpenSeadragon.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}}),Kz=OpenSeadragon,Lz={},Mz=1,Kz.Viewer=function(e){var t,n,r,o=arguments,i=this;if(Kz.isPlainObject(e)||(e={id:o[0],xmlPath:1<o.length?o[1]:void 0,prefixUrl:2<o.length?o[2]:void 0,controls:3<o.length?o[3]:void 0,overlays:4<o.length?o[4]:void 0}),e.config&&(Kz.extend(!0,e,e.config),delete e.config),Kz.extend(!0,this,{id:e.id,hash:e.hash||Mz++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},Kz.DEFAULT_SETTINGS,e),void 0===this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(void 0!==Lz[this.hash]&&Kz.console.warn("Hash "+this.hash+" has already been used."),Lz[this.hash]={fsBoundsDelta:new Kz.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=Kz.now(),Kz.EventSource.call(this),this.addHandler("open-failed",function(e){var t=Kz.getString("Errors.OpenFailed",e.eventSource,e.message);i._showMessage(t)}),Kz.ControlDock.call(this,e),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=Kz.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",(n=this.canvas.style).width="100%",n.height="100%",n.overflow="hidden",n.position="absolute",n.top="0px",n.left="0px",Kz.setElementTouchActionNone(this.canvas),""!==e.tabIndex&&(this.canvas.tabIndex=void 0===e.tabIndex?0:e.tabIndex),this.container.className="openseadragon-container",(r=this.container.style).width="100%",r.height="100%",r.position="relative",r.overflow="hidden",r.left="0px",r.top="0px",r.textAlign="left",this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new Kz.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:Kz.delegate(this,Yz),keyHandler:Kz.delegate(this,Zz),clickHandler:Kz.delegate(this,$z),dblClickHandler:Kz.delegate(this,_z),dragHandler:Kz.delegate(this,aA),dragEndHandler:Kz.delegate(this,bA),enterHandler:Kz.delegate(this,cA),exitHandler:Kz.delegate(this,dA),pressHandler:Kz.delegate(this,eA),releaseHandler:Kz.delegate(this,fA),nonPrimaryPressHandler:Kz.delegate(this,gA),nonPrimaryReleaseHandler:Kz.delegate(this,hA),scrollHandler:Kz.delegate(this,jA),pinchHandler:Kz.delegate(this,iA)}),this.outerTracker=new Kz.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:Kz.delegate(this,kA),exitHandler:Kz.delegate(this,lA)}),this.toolbar&&(this.toolbar=new Kz.ControlDock({element:this.toolbar})),this.bindStandardControls(),Lz[this.hash].prevContainerSize=Nz(this.container),this.world=new Kz.World({viewer:this}),this.world.addHandler("add-item",function(e){i.source=i.world.getItemAt(0).source,Lz[i.hash].forceRedraw=!0,i._updateRequestId||(i._updateRequestId=Rz(i,mA))}),this.world.addHandler("remove-item",function(e){i.world.getItemCount()?i.source=i.world.getItemAt(0).source:i.source=null,Lz[i.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(e){i.viewport&&i.viewport._setContentBounds(i.world.getHomeBounds(),i.world.getContentFactor())}),this.world.addHandler("item-index-change",function(e){i.source=i.world.getItemAt(0).source}),this.viewport=new Kz.Viewport({containerSize:Lz[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new Kz.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:e.timeout}),this.tileCache=new Kz.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new Kz.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=Kz.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(t=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(t,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(t=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(t,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new Kz.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),t=0;t<this.customControls.length;t++)this.addControl(this.customControls[t].id,{anchor:this.customControls[t].anchor});Kz.requestAnimationFrame(function(){Tz(i)}),void 0===this.imageSmoothingEnabled||this.imageSmoothingEnabled||this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled)},Kz.extend(Kz.Viewer.prototype,Kz.EventSource.prototype,Kz.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(e){return Kz.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(e)},openTileSource:function(e){return Kz.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(e)},open:function(n,e){var o=this;if(this.close(),n){if(this.sequenceMode&&Kz.isArray(n))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),void 0===e||isNaN(e)||(this.initialPage=e),this.tileSources=n,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),void this._updateSequenceButtons(this._sequenceIndex);if(Kz.isArray(n)||(n=[n]),n.length){this._opening=!0;function i(){if(s+l===r)if(s){!o._firstOpen&&o.preserveViewport||(o.viewport.goHome(!0),o.viewport.update()),o._firstOpen=!1;var e=n[0];if(e.tileSource&&(e=e.tileSource),o.overlays&&!o.preserveOverlays)for(var t=0;t<o.overlays.length;t++)o.currentOverlays[t]=Pz(o,o.overlays[t]);o._drawOverlays(),o._opening=!1,o.raiseEvent("open",{source:e})}else o._opening=!1,o.raiseEvent("open-failed",a)}function t(n){Kz.isPlainObject(n)&&n.tileSource||(n={tileSource:n}),void 0!==n.index&&(Kz.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete n.index),void 0===n.collectionImmediately&&(n.collectionImmediately=!0);var r=n.success;n.success=function(e){if(s++,n.tileSource.overlays)for(var t=0;t<n.tileSource.overlays.length;t++)o.addOverlay(n.tileSource.overlays[t]);r&&r(e),i()};var t=n.error;n.error=function(e){l++,a=a||e,t&&t(e),i()},o.addTiledImage(n)}for(var a,r=n.length,s=0,l=0,c=0;c<n.length;c++)t(n[c]);return this}}},close:function(){return Lz[this.hash]&&(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),Lz[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close")),this},destroy:function(){if(Lz[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(Kz.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),Lz[this.hash]=null,delete Lz[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(e){return this.innerTracker.setTracking(e),this.outerTracker.setTracking(e),this.raiseEvent("mouse-enabled",{enabled:e}),this},areControlsEnabled:function(){var e,t=this.controls.length;for(e=0;e<this.controls.length;e++)t=t&&this.controls[e].isVisible();return t},setControlsEnabled:function(e){return(e?Vz:Tz)(this),this.raiseEvent("controls-enabled",{enabled:e}),this},setDebugMode:function(e){for(var t=0;t<this.world.getItemCount();t++)this.world.getItemAt(t).debugMode=e;this.debugMode=e,this.forceRedraw()},isFullPage:function(){return Lz[this.hash].fullPage},setFullPage:function(e){var t,n,r=document.body,o=r.style,i=document.documentElement.style,a=this;if(e==this.isFullPage())return this;var s={fullPage:e,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",s),s.preventDefaultAction)return this;if(e){for(this.elementSize=Kz.getElementSize(this.element),this.pageScroll=Kz.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=o.margin,this.docMargin=i.margin,o.margin="0",i.margin="0",this.bodyPadding=o.padding,this.docPadding=i.padding,o.padding="0",i.padding="0",this.bodyWidth=o.width,this.docWidth=i.width,o.width="100%",i.width="100%",this.bodyHeight=o.height,this.docHeight=i.height,o.height="100%",i.height="100%",this.previousBody=[],Lz[this.hash].prevElementParent=this.element.parentNode,Lz[this.hash].prevNextSibling=this.element.nextSibling,Lz[this.hash].prevElementWidth=this.element.style.width,Lz[this.hash].prevElementHeight=this.element.style.height,t=r.childNodes.length,n=0;n<t;n++)this.previousBody.push(r.childNodes[0]),r.removeChild(r.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,r.appendChild(this.toolbar.element),Kz.addClass(this.toolbar.element,"fullpage")),Kz.addClass(this.element,"fullpage"),r.appendChild(this.element),this.element.style.height=Kz.getWindowSize().y+"px",this.element.style.width=Kz.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=Kz.getElementSize(this.element).y-Kz.getElementSize(this.toolbar.element).y+"px"),Lz[this.hash].fullPage=!0,Kz.delegate(this,kA)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,o.margin=this.bodyMargin,i.margin=this.docMargin,o.padding=this.bodyPadding,i.padding=this.docPadding,o.width=this.bodyWidth,i.width=this.docWidth,o.height=this.bodyHeight,i.height=this.docHeight,r.removeChild(this.element),t=this.previousBody.length,n=0;n<t;n++)r.appendChild(this.previousBody.shift());Kz.removeClass(this.element,"fullpage"),Lz[this.hash].prevElementParent.insertBefore(this.element,Lz[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(r.removeChild(this.toolbar.element),Kz.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=Lz[this.hash].prevElementWidth,this.element.style.height=Lz[this.hash].prevElementHeight;var l=0;Kz.requestAnimationFrame(function e(){Kz.setPageScroll(a.pageScroll);var t=Kz.getPageScroll();++l<10&&(t.x!==a.pageScroll.x||t.y!==a.pageScroll.y)&&Kz.requestAnimationFrame(e)}),Lz[this.hash].fullPage=!1,Kz.delegate(this,lA)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:e}),this},setFullScreen:function(e){var t=this;if(!Kz.supportsFullScreen)return this.setFullPage(e);if(Kz.isFullScreen()===e)return this;var n={fullScreen:e,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",n),n.preventDefaultAction)return this;if(e){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";function r(){var e=Kz.isFullScreen();e||(Kz.removeEvent(document,Kz.fullScreenEventName,r),Kz.removeEvent(document,Kz.fullScreenErrorEventName,r),t.setFullPage(!1),t.isFullPage()&&(t.element.style.width=t.fullPageStyleWidth,t.element.style.height=t.fullPageStyleHeight)),t.navigator&&t.viewport&&setTimeout(function(){t.navigator.update(t.viewport)}),t.raiseEvent("full-screen",{fullScreen:e})}Kz.addEvent(document,Kz.fullScreenEventName,r),Kz.addEvent(document,Kz.fullScreenErrorEventName,r),Kz.requestFullScreen(document.body)}else Kz.exitFullScreen();return this},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(e){return this.container.style.visibility=e?"":"hidden",this.raiseEvent("visible",{visible:e}),this},addTiledImage:function(n){Kz.console.assert(n,"[Viewer.addTiledImage] options is required"),Kz.console.assert(n.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),Kz.console.assert(!n.replace||-1<n.index&&n.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var o=this;n.replace&&(n.replaceItem=o.world.getItemAt(n.index)),this._hideMessage(),void 0===n.placeholderFillStyle&&(n.placeholderFillStyle=this.placeholderFillStyle),void 0===n.opacity&&(n.opacity=this.opacity),void 0===n.preload&&(n.preload=this.preload),void 0===n.compositeOperation&&(n.compositeOperation=this.compositeOperation),void 0===n.crossOriginPolicy&&(n.crossOriginPolicy=void 0!==n.tileSource.crossOriginPolicy?n.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===n.ajaxWithCredentials&&(n.ajaxWithCredentials=this.ajaxWithCredentials),void 0===n.loadTilesWithAjax&&(n.loadTilesWithAjax=this.loadTilesWithAjax),void 0===n.ajaxHeaders||null===n.ajaxHeaders?n.ajaxHeaders=this.ajaxHeaders:Kz.isPlainObject(n.ajaxHeaders)&&Kz.isPlainObject(this.ajaxHeaders)&&(n.ajaxHeaders=Kz.extend({},this.ajaxHeaders,n.ajaxHeaders));var r={options:n};function t(e){for(var t=0;t<o._loadQueue.length;t++)if(o._loadQueue[t]===r){o._loadQueue.splice(t,1);break}0===o._loadQueue.length&&i(r),o.raiseEvent("add-item-failed",e),n.error&&n.error(e)}function i(e){o.collectionMode&&(o.world.arrange({immediately:e.options.collectionImmediately,rows:o.collectionRows,columns:o.collectionColumns,layout:o.collectionLayout,tileSize:o.collectionTileSize,tileMargin:o.collectionTileMargin}),o.world.setAutoRefigureSizes(!0))}function a(){for(var e,t,n;o._loadQueue.length&&(e=o._loadQueue[0]).tileSource;){if(o._loadQueue.splice(0,1),e.options.replace){var r=o.world.getIndexOfItem(e.options.replaceItem);-1!=r&&(e.options.index=r),o.world.removeItem(e.options.replaceItem)}t=new Kz.TiledImage({viewer:o,source:e.tileSource,viewport:o.viewport,drawer:o.drawer,tileCache:o.tileCache,imageLoader:o.imageLoader,x:e.options.x,y:e.options.y,width:e.options.width,height:e.options.height,fitBounds:e.options.fitBounds,fitBoundsPlacement:e.options.fitBoundsPlacement,clip:e.options.clip,placeholderFillStyle:e.options.placeholderFillStyle,opacity:e.options.opacity,preload:e.options.preload,degrees:e.options.degrees,compositeOperation:e.options.compositeOperation,springStiffness:o.springStiffness,animationTime:o.animationTime,minZoomImageRatio:o.minZoomImageRatio,wrapHorizontal:o.wrapHorizontal,wrapVertical:o.wrapVertical,immediateRender:o.immediateRender,blendTime:o.blendTime,alwaysBlend:o.alwaysBlend,minPixelRatio:o.minPixelRatio,smoothTileEdgesMinZoom:o.smoothTileEdgesMinZoom,iOSDevice:o.iOSDevice,crossOriginPolicy:e.options.crossOriginPolicy,ajaxWithCredentials:e.options.ajaxWithCredentials,loadTilesWithAjax:e.options.loadTilesWithAjax,ajaxHeaders:e.options.ajaxHeaders,debugMode:o.debugMode}),o.collectionMode&&o.world.setAutoRefigureSizes(!1),o.world.addItem(t,{index:e.options.index}),0===o._loadQueue.length&&i(e),1!==o.world.getItemCount()||o.preserveViewport||o.viewport.goHome(!0),o.navigator&&(n=Kz.extend({},e.options,{replace:!1,originalTiledImage:t,tileSource:e.tileSource}),o.navigator.addTiledImage(n)),e.options.success&&e.options.success({item:t})}}Kz.isArray(n.tileSource)?setTimeout(function(){t({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:n.tileSource,options:n})}):(this._loadQueue.push(r),function(r,o,i,a,s){var l=r;if("string"==Kz.type(o))if(o.match(/^\s*<.*>\s*$/))o=Kz.parseXml(o);else if(o.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var e=Kz.parseJSON(o);o=e}catch(e){}function c(e,t){e.ready?a(e):(e.addHandler("ready",function(){a(e)}),e.addHandler("open-failed",function(e){s({message:e.message,source:t})}))}setTimeout(function(){if("string"==Kz.type(o))(o=new Kz.TileSource({url:o,crossOriginPolicy:void 0!==i.crossOriginPolicy?i.crossOriginPolicy:r.crossOriginPolicy,ajaxWithCredentials:r.ajaxWithCredentials,ajaxHeaders:r.ajaxHeaders,useCanvas:r.useCanvas,success:function(e){a(e.tileSource)}})).addHandler("open-failed",function(e){s(e)});else if(Kz.isPlainObject(o)||o.nodeType)if(void 0!==o.crossOriginPolicy||void 0===i.crossOriginPolicy&&void 0===r.crossOriginPolicy||(o.crossOriginPolicy=void 0!==i.crossOriginPolicy?i.crossOriginPolicy:r.crossOriginPolicy),void 0===o.ajaxWithCredentials&&(o.ajaxWithCredentials=r.ajaxWithCredentials),void 0===o.useCanvas&&(o.useCanvas=r.useCanvas),Kz.isFunction(o.getTileUrl)){var e=new Kz.TileSource(o);e.getTileUrl=o.getTileUrl,a(e)}else{var t=Kz.TileSource.determineType(l,o);if(!t)return void s({message:"Unable to load TileSource",source:o});var n=t.prototype.configure.apply(l,[o]);c(new t(n),o)}else c(o,o)})}(this,n.tileSource,n,function(e){r.tileSource=e,a()},function(e){e.options=n,t(e),a()}))},addSimpleImage:function(e){Kz.console.assert(e,"[Viewer.addSimpleImage] options is required"),Kz.console.assert(e.url,"[Viewer.addSimpleImage] options.url is required");var t=Kz.extend({},e,{tileSource:{type:"image",url:e.url}});delete t.url,this.addTiledImage(t)},addLayer:function(t){var n=this;Kz.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var e=Kz.extend({},t,{success:function(e){n.raiseEvent("add-layer",{options:t,drawer:e.item})},error:function(e){n.raiseEvent("add-layer-failed",e)}});return this.addTiledImage(e),this},getLayerAtLevel:function(e){return Kz.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(e)},getLevelOfLayer:function(e){return Kz.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(e)},getLayersCount:function(){return Kz.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(e,t){return Kz.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(e,t)},removeLayer:function(e){return Kz.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(e)},forceRedraw:function(){return Lz[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var e=Kz.delegate(this,Wz),t=Kz.delegate(this,Xz),n=Kz.delegate(this,EA),r=Kz.delegate(this,DA),o=this.navImages,i=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(i=!1),this.previousButton=new Kz.Button({element:this.previousButton?Kz.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kz.getString("Tooltips.PreviousPage"),srcRest:pA(this.prefixUrl,o.previous.REST),srcGroup:pA(this.prefixUrl,o.previous.GROUP),srcHover:pA(this.prefixUrl,o.previous.HOVER),srcDown:pA(this.prefixUrl,o.previous.DOWN),onRelease:r,onFocus:e,onBlur:t}),this.nextButton=new Kz.Button({element:this.nextButton?Kz.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kz.getString("Tooltips.NextPage"),srcRest:pA(this.prefixUrl,o.next.REST),srcGroup:pA(this.prefixUrl,o.next.GROUP),srcHover:pA(this.prefixUrl,o.next.HOVER),srcDown:pA(this.prefixUrl,o.next.DOWN),onRelease:n,onFocus:e,onBlur:t}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),i&&(this.paging=new Kz.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:Kz.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||Kz.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var e=Kz.delegate(this,qA),t=Kz.delegate(this,sA),n=Kz.delegate(this,vA),r=Kz.delegate(this,rA),o=Kz.delegate(this,wA),i=Kz.delegate(this,yA),a=Kz.delegate(this,zA),s=Kz.delegate(this,AA),l=Kz.delegate(this,BA),c=Kz.delegate(this,CA),u=Kz.delegate(this,Wz),p=Kz.delegate(this,Xz),h=this.navImages,d=[],f=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(f=!1),this.showZoomControl&&(d.push(this.zoomInButton=new Kz.Button({element:this.zoomInButton?Kz.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kz.getString("Tooltips.ZoomIn"),srcRest:pA(this.prefixUrl,h.zoomIn.REST),srcGroup:pA(this.prefixUrl,h.zoomIn.GROUP),srcHover:pA(this.prefixUrl,h.zoomIn.HOVER),srcDown:pA(this.prefixUrl,h.zoomIn.DOWN),onPress:e,onRelease:t,onClick:n,onEnter:e,onExit:t,onFocus:u,onBlur:p})),d.push(this.zoomOutButton=new Kz.Button({element:this.zoomOutButton?Kz.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kz.getString("Tooltips.ZoomOut"),srcRest:pA(this.prefixUrl,h.zoomOut.REST),srcGroup:pA(this.prefixUrl,h.zoomOut.GROUP),srcHover:pA(this.prefixUrl,h.zoomOut.HOVER),srcDown:pA(this.prefixUrl,h.zoomOut.DOWN),onPress:r,onRelease:t,onClick:o,onEnter:r,onExit:t,onFocus:u,onBlur:p}))),this.showHomeControl&&d.push(this.homeButton=new Kz.Button({element:this.homeButton?Kz.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kz.getString("Tooltips.Home"),srcRest:pA(this.prefixUrl,h.home.REST),srcGroup:pA(this.prefixUrl,h.home.GROUP),srcHover:pA(this.prefixUrl,h.home.HOVER),srcDown:pA(this.prefixUrl,h.home.DOWN),onRelease:i,onFocus:u,onBlur:p})),this.showFullPageControl&&d.push(this.fullPageButton=new Kz.Button({element:this.fullPageButton?Kz.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kz.getString("Tooltips.FullPage"),srcRest:pA(this.prefixUrl,h.fullpage.REST),srcGroup:pA(this.prefixUrl,h.fullpage.GROUP),srcHover:pA(this.prefixUrl,h.fullpage.HOVER),srcDown:pA(this.prefixUrl,h.fullpage.DOWN),onRelease:a,onFocus:u,onBlur:p})),this.showRotationControl&&(d.push(this.rotateLeftButton=new Kz.Button({element:this.rotateLeftButton?Kz.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kz.getString("Tooltips.RotateLeft"),srcRest:pA(this.prefixUrl,h.rotateleft.REST),srcGroup:pA(this.prefixUrl,h.rotateleft.GROUP),srcHover:pA(this.prefixUrl,h.rotateleft.HOVER),srcDown:pA(this.prefixUrl,h.rotateleft.DOWN),onRelease:s,onFocus:u,onBlur:p})),d.push(this.rotateRightButton=new Kz.Button({element:this.rotateRightButton?Kz.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kz.getString("Tooltips.RotateRight"),srcRest:pA(this.prefixUrl,h.rotateright.REST),srcGroup:pA(this.prefixUrl,h.rotateright.GROUP),srcHover:pA(this.prefixUrl,h.rotateright.HOVER),srcDown:pA(this.prefixUrl,h.rotateright.DOWN),onRelease:l,onFocus:u,onBlur:p}))),this.showFlipControl&&d.push(this.flipButton=new Kz.Button({element:this.flipButton?Kz.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kz.getString("Tooltips.Flip"),srcRest:pA(this.prefixUrl,h.flip.REST),srcGroup:pA(this.prefixUrl,h.flip.GROUP),srcHover:pA(this.prefixUrl,h.flip.HOVER),srcDown:pA(this.prefixUrl,h.flip.DOWN),onRelease:c,onFocus:u,onBlur:p})),f&&(this.buttons=new Kz.ButtonGroup({buttons:d,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",Kz.delegate(this,xA)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||Kz.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||Kz.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(e){return this.tileSources&&0<=e&&e<this.tileSources.length&&(this._sequenceIndex=e,this._updateSequenceButtons(e),this.open(this.tileSources[e]),this.referenceStrip&&this.referenceStrip.setFocus(e),this.raiseEvent("page",{page:e})),this},addOverlay:function(e,t,n,r){var o;if(o=Kz.isPlainObject(e)?e:{element:e,location:t,placement:n,onDraw:r},e=Kz.getElement(o.element),0<=Qz(this.currentOverlays,e))return this;var i=Pz(this,o);return this.currentOverlays.push(i),i.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:e,location:o.location,placement:o.placement}),this},updateOverlay:function(e,t,n){var r;return e=Kz.getElement(e),0<=(r=Qz(this.currentOverlays,e))&&(this.currentOverlays[r].update(t,n),Lz[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:e,location:t,placement:n})),this},removeOverlay:function(e){var t;return e=Kz.getElement(e),0<=(t=Qz(this.currentOverlays,e))&&(this.currentOverlays[t].destroy(),this.currentOverlays.splice(t,1),Lz[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:e})),this},clearOverlays:function(){for(;0<this.currentOverlays.length;)this.currentOverlays.pop().destroy();return Lz[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(e){var t;return e=Kz.getElement(e),0<=(t=Qz(this.currentOverlays,e))?this.currentOverlays[t]:null},_updateSequenceButtons:function(e){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==e?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(0<e?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(e){this._hideMessage();var t=Kz.makeNeutralElement("div");t.appendChild(document.createTextNode(e)),this.messageDiv=Kz.makeCenteredNode(t),Kz.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var e=this.messageDiv;e&&(e.parentNode.removeChild(e),delete this.messageDiv)},gestureSettingsByDeviceType:function(e){switch(e){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var e,t=this.currentOverlays.length;for(e=0;e<t;e++)this.currentOverlays[e].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&1<this.tileSources.length&&(this.referenceStrip=new Kz.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else Kz.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}}),RF=OpenSeadragon,RF.Navigator=function(e){var t,n,r,o,i,a,s=e.viewer,l=this;function c(e){WF(l.displayRegionContainer,e),WF(l.displayRegion,-e),l.viewport.setRotation(e)}e.id?(this.element=document.getElementById(e.id),e.controlOptions={anchor:RF.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(e.id="navigator-"+RF.now(),this.element=RF.makeNeutralElement("div"),e.controlOptions={anchor:RF.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:e.autoFade},e.position&&("BOTTOM_RIGHT"==e.position?e.controlOptions.anchor=RF.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"==e.position?e.controlOptions.anchor=RF.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"==e.position?e.controlOptions.anchor=RF.ControlAnchor.TOP_RIGHT:"TOP_LEFT"==e.position?e.controlOptions.anchor=RF.ControlAnchor.TOP_LEFT:"ABSOLUTE"==e.position&&(e.controlOptions.anchor=RF.ControlAnchor.ABSOLUTE,e.controlOptions.top=e.top,e.controlOptions.left=e.left,e.controlOptions.height=e.height,e.controlOptions.width=e.width))),this.element.id=e.id,this.element.className+=" navigator",(e=RF.extend(!0,{sizeRatio:RF.DEFAULT_SETTINGS.navigatorSizeRatio},e,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:e.autoResize,minZoomImageRatio:1,background:e.background,opacity:e.opacity,borderColor:e.borderColor,displayRegionColor:e.displayRegionColor})).minPixelRatio=this.minPixelRatio=s.minPixelRatio,RF.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new RF.Point(1,1),this.totalBorderWidths=new RF.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),e.controlOptions.anchor!=RF.ControlAnchor.NONE&&(r=this.element.style,o=this.borderWidth,r.margin="0px",r.border=o+"px solid "+e.borderColor,r.padding="0px",r.background=e.background,r.opacity=e.opacity,r.overflow="hidden"),this.displayRegion=RF.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",i=this.displayRegion.style,a=this.borderWidth,i.position="relative",i.top="0px",i.left="0px",i.fontSize="0px",i.overflow="hidden",i.border=a+"px solid "+e.displayRegionColor,i.margin="0px",i.padding="0px",i.background="transparent",i.float="left",i.cssFloat="left",i.styleFloat="left",i.zIndex=999999999,i.cursor="default",this.displayRegionContainer=RF.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",s.addControl(this.element,e.controlOptions),this._resizeWithViewer=e.controlOptions.anchor!=RF.ControlAnchor.ABSOLUTE&&e.controlOptions.anchor!=RF.ControlAnchor.NONE,e.width&&e.height?(this.setWidth(e.width),this.setHeight(e.height)):this._resizeWithViewer&&(t=RF.getElementSize(s.element),this.element.style.height=Math.round(t.y*e.sizeRatio)+"px",this.element.style.width=Math.round(t.x*e.sizeRatio)+"px",this.oldViewerSize=t,n=RF.getElementSize(this.element),this.elementArea=n.x*n.y),this.oldContainerSize=new RF.Point(0,0),RF.Viewer.apply(this,[e]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),e.navigatorRotate&&(c(e.viewer.viewport?e.viewer.viewport.getRotation():e.viewer.degrees||0),e.viewer.addHandler("rotate",function(e){c(e.degrees)}));this.innerTracker.destroy(),this.innerTracker=new RF.MouseTracker({element:this.element,dragHandler:RF.delegate(this,TF),clickHandler:RF.delegate(this,SF),releaseHandler:RF.delegate(this,UF),scrollHandler:RF.delegate(this,VF)}),this.addHandler("reset-size",function(){l.viewport&&l.viewport.goHome(!0)}),s.world.addHandler("item-index-change",function(t){window.setTimeout(function(){var e=l.world.getItemAt(t.previousIndex);l.world.setItemIndex(e,t.newIndex)},1)}),s.world.addHandler("remove-item",function(e){var t=e.item,n=l._getMatchingItem(t);n&&l.world.removeItem(n)}),this.update(s.viewport)},RF.extend(RF.Navigator.prototype,RF.EventSource.prototype,RF.Viewer.prototype,{updateSize:function(){if(this.viewport){var e=new RF.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);e.equals(this.oldContainerSize)||(this.viewport.resize(e,!0),this.viewport.goHome(!0),this.oldContainerSize=e,this.drawer.clear(),this.world.draw())}},setWidth:function(e){this.width=e,this.element.style.width="number"==typeof e?e+"px":e,this._resizeWithViewer=!1},setHeight:function(e){this.height=e,this.element.style.height="number"==typeof e?e+"px":e,this._resizeWithViewer=!1},setFlip:function(e){return this.viewport.setFlip(e),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(e){XF(this.displayRegion,e),XF(this.canvas,e),XF(this.element,e)},update:function(e){var t,n,r,o,i,a;if(t=RF.getElementSize(this.viewer.element),this._resizeWithViewer&&t.x&&t.y&&!t.equals(this.oldViewerSize)&&(this.oldViewerSize=t,r=this.maintainSizeRatio||!this.elementArea?(n=t.x*this.sizeRatio,t.y*this.sizeRatio):(n=Math.sqrt(this.elementArea*(t.x/t.y)),this.elementArea/n),this.element.style.width=Math.round(n)+"px",this.element.style.height=Math.round(r)+"px",this.elementArea||(this.elementArea=n*r),this.updateSize()),e&&this.viewport){o=e.getBoundsNoRotate(!0),i=this.viewport.pixelFromPointNoRotate(o.getTopLeft(),!1),a=this.viewport.pixelFromPointNoRotate(o.getBottomRight(),!1).minus(this.totalBorderWidths);var s=this.displayRegion.style;s.display=this.world.getItemCount()?"block":"none",s.top=Math.round(i.y)+"px",s.left=Math.round(i.x)+"px";var l=Math.abs(i.x-a.x),c=Math.abs(i.y-a.y);s.width=Math.round(Math.max(l,0))+"px",s.height=Math.round(Math.max(c,0))+"px"}},addTiledImage:function(e){var r=this,o=e.originalTiledImage;delete e.original;var t=RF.extend({},e,{success:function(e){var t=e.item;function n(){r._matchBounds(t,o)}t._originalForNavigator=o,r._matchBounds(t,o,!0),o.addHandler("bounds-change",n),o.addHandler("clip-change",n),o.addHandler("opacity-change",function(){r._matchOpacity(t,o)}),o.addHandler("composite-operation-change",function(){r._matchCompositeOperation(t,o)})}});return RF.Viewer.prototype.addTiledImage.apply(this,[t])},_getMatchingItem:function(e){for(var t,n=this.world.getItemCount(),r=0;r<n;r++)if((t=this.world.getItemAt(r))._originalForNavigator===e)return t;return null},_matchBounds:function(e,t,n){var r=t.getBoundsNoRotate();e.setPosition(r.getTopLeft(),n),e.setWidth(r.width,n),e.setRotation(t.getRotation(),n),e.setClip(t.getClip())},_matchOpacity:function(e,t){e.setOpacity(t.opacity)},_matchCompositeOperation:function(e,t){e.setCompositeOperation(t.compositeOperation)}}),tH=OpenSeadragon,uH={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}},tH.extend(tH,{getString:function(e){var t,n=e.split("."),r=null,o=arguments,i=uH;for(t=0;t<n.length-1;t++)i=i[n[t]]||{};return"string"!=typeof(r=i[n[t]])&&(tH.console.log("Untranslated source string:",e),r=""),r.replace(/\{\d+\}/g,function(e){var t=parseInt(e.match(/\d+/),10)+1;return t<o.length?o[t]:""})},setString:function(e,t){var n,r=e.split("."),o=uH;for(n=0;n<r.length-1;n++)o[r[n]]||(o[r[n]]={}),o=o[r[n]];o[r[n]]=t}}),KH=OpenSeadragon,KH.Point=function(e,t){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0},KH.Point.prototype={clone:function(){return new KH.Point(this.x,this.y)},plus:function(e){return new KH.Point(this.x+e.x,this.y+e.y)},minus:function(e){return new KH.Point(this.x-e.x,this.y-e.y)},times:function(e){return new KH.Point(this.x*e,this.y*e)},divide:function(e){return new KH.Point(this.x/e,this.y/e)},negate:function(){return new KH.Point(-this.x,-this.y)},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},squaredDistanceTo:function(e){return Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2)},apply:function(e){return new KH.Point(e(this.x),e(this.y))},equals:function(e){return e instanceof KH.Point&&this.x===e.x&&this.y===e.y},rotate:function(e,t){var n,r;if(t=t||new KH.Point(0,0),e%90==0){switch(KH.positiveModulo(e,360)){case 0:n=1,r=0;break;case 90:n=0,r=1;break;case 180:n=-1,r=0;break;case 270:n=0,r=-1}}else{var o=e*Math.PI/180;n=Math.cos(o),r=Math.sin(o)}var i=n*(this.x-t.x)-r*(this.y-t.y)+t.x,a=r*(this.x-t.x)+n*(this.y-t.y)+t.y;return new KH.Point(i,a)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}},nI=OpenSeadragon,nI.TileSource=function(e,t,n,r,o,i){var a,s,l=this,c=arguments;if(a=nI.isPlainObject(e)?e:{width:c[0],height:c[1],tileSize:c[2],tileOverlap:c[3],minLevel:c[4],maxLevel:c[5]},nI.EventSource.call(this),nI.extend(!0,this,a),!this.success)for(s=0;s<arguments.length;s++)if(nI.isFunction(arguments[s])){this.success=arguments[s];break}this.success&&this.addHandler("ready",function(e){l.success(e)}),"string"==nI.type(e)&&(this.url=e),this.url?(this.aspectRatio=1,this.dimensions=new nI.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=a.width&&a.height?a.width/a.height:1,this.dimensions=new nI.Point(a.width,a.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=a.tileOverlap?a.tileOverlap:0,this.minLevel=a.minLevel?a.minLevel:0,this.maxLevel=void 0!==a.maxLevel&&null!==a.maxLevel?a.maxLevel:a.width&&a.height?Math.ceil(Math.log(Math.max(a.width,a.height))/Math.log(2)):0,this.success&&nI.isFunction(this.success)&&this.success(this))},nI.TileSource.prototype={getTileSize:function(){return nI.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(e){return this._tileWidth?this._tileWidth:this.getTileSize(e)},getTileHeight:function(e){return this._tileHeight?this._tileHeight:this.getTileSize(e)},getLevelScale:function(e){var t,n={};for(t=0;t<=this.maxLevel;t++)n[t]=1/Math.pow(2,this.maxLevel-t);return this.getLevelScale=function(e){return n[e]},this.getLevelScale(e)},getNumTiles:function(e){var t=this.getLevelScale(e),n=Math.ceil(t*this.dimensions.x/this.getTileWidth(e)),r=Math.ceil(t*this.dimensions.y/this.getTileHeight(e));return new nI.Point(n,r)},getPixelRatio:function(e){var t=this.dimensions.times(this.getLevelScale(e)),n=1/t.x,r=1/t.y;return new nI.Point(n,r)},getClosestLevel:function(){var e,t;for(e=this.minLevel+1;e<=this.maxLevel&&!(1<(t=this.getNumTiles(e)).x||1<t.y);e++);return e-1},getTileAtPoint:function(e,t){var n=0<=t.x&&t.x<=1&&0<=t.y&&t.y<=1/this.aspectRatio;nI.console.assert(n,"[TileSource.getTileAtPoint] must be called with a valid point.");var r=this.dimensions.x*this.getLevelScale(e),o=t.x*r,i=t.y*r,a=Math.floor(o/this.getTileWidth(e)),s=Math.floor(i/this.getTileHeight(e));1<=t.x&&(a=this.getNumTiles(e).x-1);return t.y>=1/this.aspectRatio-1e-15&&(s=this.getNumTiles(e).y-1),new nI.Point(a,s)},getTileBounds:function(e,t,n,r){var o=this.dimensions.times(this.getLevelScale(e)),i=this.getTileWidth(e),a=this.getTileHeight(e),s=0===t?0:i*t-this.tileOverlap,l=0===n?0:a*n-this.tileOverlap,c=i+(0===t?1:2)*this.tileOverlap,u=a+(0===n?1:2)*this.tileOverlap,p=1/o.x;return c=Math.min(c,o.x-s),u=Math.min(u,o.y-l),r?new nI.Rect(0,0,c,u):new nI.Rect(s*p,l*p,c*p,u*p)},getImageInfo:function(r){var e,n,o,i,t,a,s,l=this;r&&-1<(s=(a=(t=r.split("/"))[t.length-1]).lastIndexOf("."))&&(t[t.length-1]=a.slice(0,s)),n=function(e){"string"==typeof e&&(e=nI.parseXml(e));var t=nI.TileSource.determineType(l,e,r);t?(void 0===(i=t.prototype.configure.apply(l,[e,r])).ajaxWithCredentials&&(i.ajaxWithCredentials=l.ajaxWithCredentials),o=new t(i),l.ready=!0,l.raiseEvent("ready",{tileSource:o})):l.raiseEvent("open-failed",{message:"Unable to load TileSource",source:r})},r.match(/\.js$/)?(e=r.split("/").pop().replace(".js",""),nI.jsonp({url:r,async:!1,callbackName:e,callback:n})):nI.makeAjaxRequest({url:r,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(e){var t=function(t){var e,n,r=t.responseText,o=t.status;{if(!t)throw new Error(nI.getString("Errors.Security"));if(200!==t.status&&0!==t.status)throw o=t.status,e=404==o?"Not Found":t.statusText,new Error(nI.getString("Errors.Status",o,e))}if(r.match(/\s*<.*/))try{n=t.responseXML&&t.responseXML.documentElement?t.responseXML:nI.parseXml(r)}catch(e){n=t.responseText}else if(r.match(/\s*[\{\[].*/))try{n=nI.parseJSON(r)}catch(e){n=r}else n=r;return n}(e);n(t)},error:function(e,t){var n;try{n="HTTP "+e.status+" attempting to load TileSource"}catch(e){n=(void 0!==t&&t.toString?t.toString():"Unknown error")+" attempting to load TileSource"}l.raiseEvent("open-failed",{message:n,source:r})}})},supports:function(){return!1},configure:function(){throw new Error("Method not implemented.")},getTileUrl:function(){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(){return{}},tileExists:function(e,t,n){var r=this.getNumTiles(e);return e>=this.minLevel&&e<=this.maxLevel&&0<=t&&0<=n&&t<r.x&&n<r.y}},nI.extend(!0,nI.TileSource.prototype,nI.EventSource.prototype),nI.TileSource.determineType=function(e,t,n){var r;for(r in OpenSeadragon)if(r.match(/.+TileSource$/)&&nI.isFunction(OpenSeadragon[r])&&nI.isFunction(OpenSeadragon[r].prototype.supports)&&OpenSeadragon[r].prototype.supports.call(e,t,n))return OpenSeadragon[r];nI.console.error("No TileSource was able to open %s %s",n,t)},rK=OpenSeadragon,rK.DziTileSource=function(e,t,n,r,o,i,a,s,l){var c,u,p,h;if(h=rK.isPlainObject(e)?e:{width:e,height:t,tileSize:n,tileOverlap:r,tilesUrl:o,fileFormat:i,displayRects:a,minLevel:s,maxLevel:l},this._levelRects={},this.tilesUrl=h.tilesUrl,this.fileFormat=h.fileFormat,this.displayRects=h.displayRects,this.displayRects)for(c=this.displayRects.length-1;0<=c;c--)for(p=(u=this.displayRects[c]).minLevel;p<=u.maxLevel;p++)this._levelRects[p]||(this._levelRects[p]=[]),this._levelRects[p].push(u);rK.TileSource.apply(this,[h])},rK.extend(rK.DziTileSource.prototype,rK.TileSource.prototype,{supports:function(e){var t;return e.Image?t=e.Image.xmlns:e.documentElement&&("Image"!=e.documentElement.localName&&"Image"!=e.documentElement.tagName||(t=e.documentElement.namespaceURI)),-1!==(t=(t||"").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==t.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(e,t){var n;return n=(rK.isPlainObject(e)?tK:function(e,t){if(!t||!t.documentElement)throw new Error(rK.getString("Errors.Xml"));var n,r,o,i,a,s=t.documentElement,l=s.localName||s.tagName,c=t.documentElement.namespaceURI,u=null,p=[];if("Image"==l)try{if(void 0===(i=s.getElementsByTagName("Size")[0])&&(i=s.getElementsByTagNameNS(c,"Size")[0]),u={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:s.getAttribute("Url"),Format:s.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(s.getAttribute("Overlap"),10),TileSize:parseInt(s.getAttribute("TileSize"),10),Size:{Height:parseInt(i.getAttribute("Height"),10),Width:parseInt(i.getAttribute("Width"),10)}}},!rK.imageFormatSupported(u.Image.Format))throw new Error(rK.getString("Errors.ImageFormat",u.Image.Format.toUpperCase()));for(void 0===(n=s.getElementsByTagName("DisplayRect"))&&(n=s.getElementsByTagNameNS(c,"DisplayRect")[0]),a=0;a<n.length;a++)r=n[a],void 0===(o=r.getElementsByTagName("Rect")[0])&&(o=r.getElementsByTagNameNS(c,"Rect")[0]),p.push({Rect:{X:parseInt(o.getAttribute("X"),10),Y:parseInt(o.getAttribute("Y"),10),Width:parseInt(o.getAttribute("Width"),10),Height:parseInt(o.getAttribute("Height"),10),MinLevel:parseInt(r.getAttribute("MinLevel"),10),MaxLevel:parseInt(r.getAttribute("MaxLevel"),10)}});return p.length&&(u.Image.DisplayRect=p),tK(0,u)}catch(e){throw e instanceof Error?e:new Error(rK.getString("Errors.Dzi"))}else{if("Collection"==l)throw new Error(rK.getString("Errors.Dzc"));if("Error"==l){var h=s.getElementsByTagName("Message")[0].firstChild.nodeValue;throw new Error(h)}}throw new Error(rK.getString("Errors.Dzi"))})(this,e),t&&!n.tilesUrl&&(n.tilesUrl=t.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),-1!=t.search(/\.(dzi|xml|js)\?/)?n.queryParams=t.match(/\?.*/):n.queryParams=""),n},getTileUrl:function(e,t,n){return[this.tilesUrl,e,"/",t,"_",n,".",this.fileFormat,this.queryParams].join("")},tileExists:function(e,t,n){var r,o,i,a,s,l,c,u=this._levelRects[e];if(this.minLevel&&e<this.minLevel||this.maxLevel&&e>this.maxLevel)return!1;if(!u||!u.length)return!0;for(c=u.length-1;0<=c;c--)if(!(e<(r=u[c]).minLevel||e>r.maxLevel)&&(o=this.getLevelScale(e),i=r.x*o,a=r.y*o,s=i+r.width*o,l=a+r.height*o,i=Math.floor(i/this._tileWidth),a=Math.floor(a/this._tileWidth),s=Math.ceil(s/this._tileWidth),l=Math.ceil(l/this._tileWidth),i<=t&&t<s&&a<=n&&n<l))return!0;return!1}}),GL=OpenSeadragon,GL.IIIFTileSource=function(e){if(GL.extend(!0,this,e),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(e.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=e.version,this.tile_width&&this.tile_height)e.tileWidth=this.tile_width,e.tileHeight=this.tile_height;else if(this.tile_width)e.tileSize=this.tile_width;else if(this.tile_height)e.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)e.tileWidth=this.tiles[0].width,e.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var t=0;t<this.tiles.length;t++)for(var n=0;n<this.tiles[t].scaleFactors.length;n++){var r=this.tiles[t].scaleFactors[n];this.scale_factors.push(r),e.tileSizePerScaleFactor[r]={width:this.tiles[t].width,height:this.tiles[t].height||this.tiles[t].width}}}else if(HL(e)){for(var o=Math.min(this.height,this.width),i=[256,512,1024],a=[],s=0;s<i.length;s++)i[s]<=o&&a.push(i[s]);0<a.length?e.tileSize=Math.max.apply(null,a):e.tileSize=o}else this.sizes&&0<this.sizes.length?(this.emulateLegacyImagePyramid=!0,e.levels=IL(this),GL.extend(!0,e,{width:e.levels[e.levels.length-1].width,height:e.levels[e.levels.length-1].height,tileSize:Math.max(e.height,e.width),tileOverlap:0,minLevel:0,maxLevel:e.levels.length-1}),this.levels=e.levels):GL.console.error("Nothing in the info.json to construct image pyramids from");if(!e.maxLevel&&!this.emulateLegacyImagePyramid)if(this.scale_factors){var l=Math.max.apply(null,this.scale_factors);e.maxLevel=Math.round(Math.log(l)*Math.LOG2E)}else e.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));GL.TileSource.apply(this,[e])},GL.extend(GL.IIIFTileSource.prototype,GL.TileSource.prototype,{supports:function(e){return!(!e.protocol||"http://iiif.io/api/image"!=e.protocol)||(!(!e["@context"]||"http://library.stanford.edu/iiif/image-api/1.1/context.json"!=e["@context"]&&"http://iiif.io/api/image/1/context.json"!=e["@context"])||(!(!e.profile||0!==e.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html"))||(!!(e.identifier&&e.width&&e.height)||!(!e.documentElement||"info"!=e.documentElement.tagName||"http://library.stanford.edu/iiif/image-api/ns/"!=e.documentElement.namespaceURI))))},configure:function(e,t){if(GL.isPlainObject(e)){if(e["@context"]){var n=e["@context"];if(Array.isArray(n))for(var r=0;r<n.length;r++)if("string"==typeof n[r]&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(n[r])||"http://library.stanford.edu/iiif/image-api/1.1/context.json"===n[r])){n=n[r];break}switch(n){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":e.version=1;break;case"http://iiif.io/api/image/2/context.json":e.version=2;break;case"http://iiif.io/api/image/3/context.json":e.version=3;break;default:GL.console.error("Data has a @context property which contains no known IIIF context URI.")}}else e["@context"]="http://iiif.io/api/image/1.0/context.json",e["@id"]=t.replace("/info.json",""),e.version=1;if(!e["@id"]&&e.id&&(e["@id"]=e.id),e.preferredFormats)for(var o=0;o<e.preferredFormats.length;o++)if(OpenSeadragon.imageFormatSupported(e.preferredFormats[o])){e.tileFormat=e.preferredFormats[o];break}return e}var i=function(e){if(!e||!e.documentElement)throw new Error(GL.getString("Errors.Xml"));var t=e.documentElement,n=t.tagName,r=null;if("info"==n)try{return function e(t,n,r){var o,i;if(3==t.nodeType&&r)(i=t.nodeValue.trim()).match(/^\d*$/)&&(i=Number(i)),n[r]?(GL.isArray(n[r])||(n[r]=[n[r]]),n[r].push(i)):n[r]=i;else if(1==t.nodeType)for(o=0;o<t.childNodes.length;o++)e(t.childNodes[o],n,t.nodeName)}(t,r={}),r}catch(e){throw e instanceof Error?e:new Error(GL.getString("Errors.IIIF"))}throw new Error(GL.getString("Errors.IIIF"))}(e);return i["@context"]="http://iiif.io/api/image/1.0/context.json",i["@id"]=t.replace("/info.xml",""),i.version=1,i},getTileWidth:function(e){if(this.emulateLegacyImagePyramid)return GL.TileSource.prototype.getTileWidth.call(this,e);var t=Math.pow(2,this.maxLevel-e);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[t]?this.tileSizePerScaleFactor[t].width:this._tileWidth},getTileHeight:function(e){if(this.emulateLegacyImagePyramid)return GL.TileSource.prototype.getTileHeight.call(this,e);var t=Math.pow(2,this.maxLevel-e);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[t]?this.tileSizePerScaleFactor[t].height:this._tileHeight},getLevelScale:function(e){if(this.emulateLegacyImagePyramid){var t=NaN;return 0<this.levels.length&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t}return GL.TileSource.prototype.getLevelScale.call(this,e)},getNumTiles:function(e){return this.emulateLegacyImagePyramid?this.getLevelScale(e)?new GL.Point(1,1):new GL.Point(0,0):GL.TileSource.prototype.getNumTiles.call(this,e)},getTileAtPoint:function(e,t){return this.emulateLegacyImagePyramid?new GL.Point(0,0):GL.TileSource.prototype.getTileAtPoint.call(this,e,t)},getTileUrl:function(e,t,n){if(this.emulateLegacyImagePyramid){var r=null;return 0<this.levels.length&&e>=this.minLevel&&e<=this.maxLevel&&(r=this.levels[e].url),r}var o,i,a,s,l,c,u,p,h,d,f,m,g,y=Math.pow(.5,this.maxLevel-e),v=Math.ceil(this.width*y),b=Math.ceil(this.height*y);return o=this.getTileWidth(e),i=this.getTileHeight(e),a=Math.ceil(o/y),s=Math.ceil(i/y),g=1===this.version?"native."+this.tileFormat:"default."+this.tileFormat,v<o&&b<i?(d=2===this.version&&v===this.width||3===this.version&&v===this.width&&b===this.height?"max":3===this.version?v+","+b:v+",",l="full"):(c=t*a,u=n*s,p=Math.min(a,this.width-c),h=Math.min(s,this.height-u),l=0===t&&0===n&&p===this.width&&h===this.height?"full":[c,u,p,h].join(","),f=Math.ceil(p*y),m=Math.ceil(h*y),d=2===this.version&&f===this.width||3===this.version&&f===this.width&&m===this.height?"max":3===this.version?f+","+m:f+","),[this["@id"],l,d,"0",g].join("/")},__testonly__:{canBeTiled:HL,constructLevels:IL}}),gN=OpenSeadragon,gN.OsmTileSource=function(e,t,n,r,o){var i;(i=gN.isPlainObject(e)?e:{width:e,height:t,tileSize:n,tileOverlap:r,tilesUrl:o}).width&&i.height||(i.width=65572864,i.height=65572864),i.tileSize||(i.tileSize=256,i.tileOverlap=0),i.tilesUrl||(i.tilesUrl="http://tile.openstreetmap.org/"),i.minLevel=8,gN.TileSource.apply(this,[i])},gN.extend(gN.OsmTileSource.prototype,gN.TileSource.prototype,{supports:function(e){return e.type&&"openstreetmaps"==e.type},configure:function(e){return e},getTileUrl:function(e,t,n){return this.tilesUrl+(e-8)+"/"+t+"/"+n+".png"}}),xN=OpenSeadragon,xN.TmsTileSource=function(e,t,n,r,o){var i;i=xN.isPlainObject(e)?e:{width:e,height:t,tileSize:n,tileOverlap:r,tilesUrl:o};var a,s=256*Math.ceil(i.width/256),l=256*Math.ceil(i.height/256);a=l<s?s/256:l/256,i.maxLevel=Math.ceil(Math.log(a)/Math.log(2))-1,i.tileSize=256,i.width=s,i.height=l,xN.TileSource.apply(this,[i])},xN.extend(xN.TmsTileSource.prototype,xN.TileSource.prototype,{supports:function(e){return e.type&&"tiledmapservice"==e.type},configure:function(e){return e},getTileUrl:function(e,t,n){var r=this.getNumTiles(e).y-1;return this.tilesUrl+e+"/"+t+"/"+(r-n)+".png"}}),SN=OpenSeadragon,SN.ZoomifyTileSource=function(e){e.tileSize=256;var t={x:e.width,y:e.height};for(e.imageSizes=[{x:e.width,y:e.height}],e.gridSize=[this._getGridSize(e.width,e.height,e.tileSize)];parseInt(t.x,10)>e.tileSize||parseInt(t.y,10)>e.tileSize;)t.x=Math.floor(t.x/2),t.y=Math.floor(t.y/2),e.imageSizes.push({x:t.x,y:t.y}),e.gridSize.push(this._getGridSize(t.x,t.y,e.tileSize));e.imageSizes.reverse(),e.gridSize.reverse(),e.minLevel=0,e.maxLevel=e.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[e])},SN.extend(SN.ZoomifyTileSource.prototype,SN.TileSource.prototype,{_getGridSize:function(e,t,n){return{x:Math.ceil(e/n),y:Math.ceil(t/n)}},_calculateAbsoluteTileNumber:function(e,t,n){for(var r=0,o={},i=0;i<e;i++)r+=(o=this.gridSize[i]).x*o.y;return r+=(o=this.gridSize[e]).x*n+t},supports:function(e){return e.type&&"zoomifytileservice"==e.type},configure:function(e){return e},getTileUrl:function(e,t,n){var r,o=this._calculateAbsoluteTileNumber(e,t,n);return r=Math.floor(o/256),this.tilesUrl+"TileGroup"+r+"/"+e+"-"+t+"-"+n+".jpg"}}),qO=OpenSeadragon,qO.LegacyTileSource=function(e){var t,n,r;qO.isArray(e)&&(t={type:"legacy-image-pyramid",levels:e}),t.levels=function(e){var t,n,r=[];for(n=0;n<e.length;n++)(t=e[n]).height&&t.width&&t.url?r.push({url:t.url,width:Number(t.width),height:Number(t.height)}):qO.console.error("Unsupported image format: %s",t.url?t.url:"<no URL>");return r.sort(function(e,t){return e.height-t.height})}(t.levels),0<t.levels.length?(n=t.levels[t.levels.length-1].width,r=t.levels[t.levels.length-1].height):(r=n=0,qO.console.error("No supported image formats found")),qO.extend(!0,t,{width:n,height:r,tileSize:Math.max(r,n),tileOverlap:0,minLevel:0,maxLevel:0<t.levels.length?t.levels.length-1:0}),qO.TileSource.apply(this,[t]),this.levels=t.levels},qO.extend(qO.LegacyTileSource.prototype,qO.TileSource.prototype,{supports:function(e){return e.type&&"legacy-image-pyramid"==e.type||e.documentElement&&"legacy-image-pyramid"==e.documentElement.getAttribute("type")},configure:function(e){return(qO.isPlainObject(e)?tO:function(e,t){if(!t||!t.documentElement)throw new Error(qO.getString("Errors.Xml"));var n,r,o=t.documentElement,i=o.tagName,a=null,s=[];if("image"==i)try{for(a={type:o.getAttribute("type"),levels:[]},s=o.getElementsByTagName("level"),r=0;r<s.length;r++)n=s[r],a.levels.push({url:n.getAttribute("url"),width:parseInt(n.getAttribute("width"),10),height:parseInt(n.getAttribute("height"),10)});return tO(0,a)}catch(e){throw e instanceof Error?e:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==i)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"==i)throw new Error("Error: "+t)}throw new Error("Unknown element "+i)})(this,e)},getLevelScale:function(e){var t=NaN;return 0<this.levels.length&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(e){return this.getLevelScale(e)?new qO.Point(1,1):new qO.Point(0,0)},getTileUrl:function(e){var t=null;return 0<this.levels.length&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].url),t}}),fP=OpenSeadragon,fP.ImageTileSource=function(e){e=fP.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},e),fP.TileSource.apply(this,[e])},fP.extend(fP.ImageTileSource.prototype,fP.TileSource.prototype,{supports:function(e){return e.type&&"image"===e.type},configure:function(e){return e},getImageInfo:function(e){var t=this._image=new Image,n=this;this.crossOriginPolicy&&(t.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(t.useCredentials=this.ajaxWithCredentials),fP.addEvent(t,"load",function(){n.width=Object.prototype.hasOwnProperty.call(t,"naturalWidth")?t.naturalWidth:t.width,n.height=Object.prototype.hasOwnProperty.call(t,"naturalHeight")?t.naturalHeight:t.height,n.aspectRatio=n.width/n.height,n.dimensions=new fP.Point(n.width,n.height),n._tileWidth=n.width,n._tileHeight=n.height,n.tileOverlap=0,n.minLevel=0,n.levels=n._buildLevels(),n.maxLevel=n.levels.length-1,n.ready=!0,n.raiseEvent("ready",{tileSource:n})}),fP.addEvent(t,"error",function(){n.raiseEvent("open-failed",{message:"Error loading image at "+e,source:e})}),t.src=e},getLevelScale:function(e){var t=NaN;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(e){return this.getLevelScale(e)?new fP.Point(1,1):new fP.Point(0,0)},getTileUrl:function(e){var t=null;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].url),t},getContext2D:function(e){var t=null;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].context2D),t},_buildLevels:function(){var e=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!fP.supportsCanvas||!this.useCanvas)return delete this._image,e;var t=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,n=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,r=document.createElement("canvas"),o=r.getContext("2d");if(r.width=t,r.height=n,o.drawImage(this._image,0,0,t,n),e[0].context2D=o,delete this._image,fP.isCanvasTainted(r))return e;for(;2<=t&&2<=n;){t=Math.floor(t/2),n=Math.floor(n/2);var i=document.createElement("canvas"),a=i.getContext("2d");i.width=t,i.height=n,a.drawImage(r,0,0,t,n),e.splice(0,0,{context2D:a,width:t,height:n}),r=i,o=a}return e}}),PP=OpenSeadragon,PP.TileSourceCollection=function(e,t,n,r){PP.console.error("TileSourceCollection is deprecated; use World instead")},UP=OpenSeadragon,UP.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},UP.Button=function(e){var t=this;UP.EventSource.call(this),UP.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:UP.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:UP.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},e),this.element=e.element||UP.makeNeutralElement("div"),e.element||(this.imgRest=UP.makeTransparentImage(this.srcRest),this.imgGroup=UP.makeTransparentImage(this.srcGroup),this.imgHover=UP.makeTransparentImage(this.srcHover),this.imgDown=UP.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",UP.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",UP.Browser.vendor==UP.BROWSERS.FIREFOX&&UP.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=UP.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new UP.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){e.insideElementPressed?(ZP(t,UP.ButtonState.DOWN),t.raiseEvent("enter",{originalEvent:e.originalEvent})):e.buttonDownAny||ZP(t,UP.ButtonState.HOVER)},focusHandler:function(e){this.enterHandler(e),t.raiseEvent("focus",{originalEvent:e.originalEvent})},exitHandler:function(e){$P(t,UP.ButtonState.GROUP),e.insideElementPressed&&t.raiseEvent("exit",{originalEvent:e.originalEvent})},blurHandler:function(e){this.exitHandler(e),t.raiseEvent("blur",{originalEvent:e.originalEvent})},pressHandler:function(e){ZP(t,UP.ButtonState.DOWN),t.raiseEvent("press",{originalEvent:e.originalEvent})},releaseHandler:function(e){e.insideElementPressed&&e.insideElementReleased?($P(t,UP.ButtonState.HOVER),t.raiseEvent("release",{originalEvent:e.originalEvent})):e.insideElementPressed?$P(t,UP.ButtonState.GROUP):ZP(t,UP.ButtonState.HOVER)},clickHandler:function(e){e.quick&&t.raiseEvent("click",{originalEvent:e.originalEvent})},keyHandler:function(e){return 13!==e.keyCode||(t.raiseEvent("click",{originalEvent:e.originalEvent}),t.raiseEvent("release",{originalEvent:e.originalEvent}),!1)}}),$P(this,UP.ButtonState.REST)},UP.extend(UP.Button.prototype,UP.EventSource.prototype,{notifyGroupEnter:function(){ZP(this,UP.ButtonState.GROUP)},notifyGroupExit:function(){$P(this,UP.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,UP.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,UP.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}}),GQ=OpenSeadragon,GQ.ButtonGroup=function(e){GQ.extend(!0,this,{buttons:[],clickTimeThreshold:GQ.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:GQ.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},e);var t,n=this.buttons.concat([]),r=this;if(this.element=e.element||GQ.makeNeutralElement("div"),!e.group)for(this.element.style.display="inline-block",t=0;t<n.length;t++)this.element.appendChild(n[t].element);GQ.setElementTouchActionNone(this.element),this.tracker=new GQ.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(){var e;for(e=0;e<r.buttons.length;e++)r.buttons[e].notifyGroupEnter()},exitHandler:function(e){var t;if(!e.insideElementPressed)for(t=0;t<r.buttons.length;t++)r.buttons[t].notifyGroupExit()}})},GQ.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}},TQ=OpenSeadragon,TQ.Rect=function(e,t,n,r,o){var i,a;this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0,this.width="number"==typeof n?n:0,this.height="number"==typeof r?r:0,this.degrees="number"==typeof o?o:0,this.degrees=TQ.positiveModulo(this.degrees,360),270<=this.degrees?(i=this.getTopRight(),this.x=i.x,this.y=i.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=270):180<=this.degrees?(i=this.getBottomRight(),this.x=i.x,this.y=i.y,this.degrees-=180):90<=this.degrees&&(i=this.getBottomLeft(),this.x=i.x,this.y=i.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=90)},TQ.Rect.fromSummits=function(e,t,n){var r=e.distanceTo(t),o=e.distanceTo(n),i=t.minus(e),a=Math.atan(i.y/i.x);return i.x<0?a+=Math.PI:i.y<0&&(a+=2*Math.PI),new TQ.Rect(e.x,e.y,r,o,a/Math.PI*180)},TQ.Rect.prototype={clone:function(){return new TQ.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new TQ.Point(this.x,this.y)},getBottomRight:function(){return new TQ.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new TQ.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new TQ.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new TQ.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new TQ.Point(this.width,this.height)},equals:function(e){return e instanceof TQ.Rect&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height&&this.degrees===e.degrees},times:function(e){return new TQ.Rect(this.x*e,this.y*e,this.width*e,this.height*e,this.degrees)},translate:function(e){return new TQ.Rect(this.x+e.x,this.y+e.y,this.width,this.height,this.degrees)},union:function(e){var t=this.getBoundingBox(),n=e.getBoundingBox(),r=Math.min(t.x,n.x),o=Math.min(t.y,n.y),i=Math.max(t.x+t.width,n.x+n.width),a=Math.max(t.y+t.height,n.y+n.height);return new TQ.Rect(r,o,i-r,a-o)},intersection:function(e){var c=1e-10,t=[],n=this.getTopLeft();e.containsPoint(n,c)&&t.push(n);var r=this.getTopRight();e.containsPoint(r,c)&&t.push(r);var o=this.getBottomLeft();e.containsPoint(o,c)&&t.push(o);var i=this.getBottomRight();e.containsPoint(i,c)&&t.push(i);var a=e.getTopLeft();this.containsPoint(a,c)&&t.push(a);var s=e.getTopRight();this.containsPoint(s,c)&&t.push(s);var l=e.getBottomLeft();this.containsPoint(l,c)&&t.push(l);var u=e.getBottomRight();this.containsPoint(u,c)&&t.push(u);for(var p=this._getSegments(),h=e._getSegments(),d=0;d<p.length;d++)for(var f=p[d],m=0;m<h.length;m++){var g=h[m],y=v(f[0],f[1],g[0],g[1]);y&&t.push(y)}function v(e,t,n,r){var o=t.minus(e),i=r.minus(n),a=-i.x*o.y+o.x*i.y;if(0==a)return null;var s=(o.x*(e.y-n.y)-o.y*(e.x-n.x))/a,l=(i.x*(e.y-n.y)-i.y*(e.x-n.x))/a;return-c<=s&&s<=1-c&&-c<=l&&l<=1-c?new TQ.Point(e.x+l*o.x,e.y+l*o.y):null}if(0===t.length)return null;for(var b=t[0].x,w=t[0].x,x=t[0].y,_=t[0].y,S=1;S<t.length;S++){var E=t[S];E.x<b&&(b=E.x),E.x>w&&(w=E.x),E.y<x&&(x=E.y),E.y>_&&(_=E.y)}return new TQ.Rect(b,x,w-b,_-x)},_getSegments:function(){var e=this.getTopLeft(),t=this.getTopRight(),n=this.getBottomLeft(),r=this.getBottomRight();return[[e,t],[t,r],[r,n],[n,e]]},rotate:function(e,t){if(0===(e=TQ.positiveModulo(e,360)))return this.clone();t=t||this.getCenter();var n=this.getTopLeft().rotate(e,t),r=this.getTopRight().rotate(e,t).minus(n);r=r.apply(function(e){return Math.abs(e)<1e-15?0:e});var o=Math.atan(r.y/r.x);return r.x<0?o+=Math.PI:r.y<0&&(o+=2*Math.PI),new TQ.Rect(n.x,n.y,this.width,this.height,o/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var e=this.getTopLeft(),t=this.getTopRight(),n=this.getBottomLeft(),r=this.getBottomRight(),o=Math.min(e.x,t.x,n.x,r.x),i=Math.max(e.x,t.x,n.x,r.x),a=Math.min(e.y,t.y,n.y,r.y),s=Math.max(e.y,t.y,n.y,r.y);return new TQ.Rect(o,a,i-o,s-a)},getIntegerBoundingBox:function(){var e=this.getBoundingBox(),t=Math.floor(e.x),n=Math.floor(e.y),r=Math.ceil(e.width+e.x-t),o=Math.ceil(e.height+e.y-n);return new TQ.Rect(t,n,r,o)},containsPoint:function(e,t){t=t||0;var n=this.getTopLeft(),r=this.getTopRight(),o=this.getBottomLeft(),i=r.minus(n),a=o.minus(n);return(e.x-n.x)*i.x+(e.y-n.y)*i.y>=-t&&(e.x-r.x)*i.x+(e.y-r.y)*i.y<=t&&(e.x-n.x)*a.x+(e.y-n.y)*a.y>=-t&&(e.x-o.x)*a.x+(e.y-o.y)*a.y<=t},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}},VS=OpenSeadragon,WS={},VS.ReferenceStrip=function(e){var t,n,r,i=e.viewer,o=VS.getElementSize(i.element);for(e.id||(e.id="referencestrip-"+VS.now(),this.element=VS.makeNeutralElement("div"),this.element.id=e.id,this.element.className="referencestrip"),e=VS.extend(!0,{sizeRatio:VS.DEFAULT_SETTINGS.referenceStripSizeRatio,position:VS.DEFAULT_SETTINGS.referenceStripPosition,scroll:VS.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:VS.DEFAULT_SETTINGS.clickTimeThreshold},e,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),VS.extend(this,e),WS[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,(n=this.element.style).marginTop="0px",n.marginRight="0px",n.marginBottom="0px",n.marginLeft="0px",n.left="0px",n.bottom="0px",n.border="0px",n.background="#000",n.position="relative",VS.setElementTouchActionNone(this.element),VS.setElementOpacity(this.element,.8),this.viewer=i,this.innerTracker=new VS.MouseTracker({element:this.element,dragHandler:VS.delegate(this,XS),scrollHandler:VS.delegate(this,YS),enterHandler:VS.delegate(this,$S),exitHandler:VS.delegate(this,_S),keyDownHandler:VS.delegate(this,aT),keyHandler:VS.delegate(this,bT)}),e.width&&e.height?(this.element.style.width=e.width+"px",this.element.style.height=e.height+"px",i.addControl(this.element,{anchor:VS.ControlAnchor.BOTTOM_LEFT})):"horizontal"==e.scroll?(this.element.style.width=o.x*e.sizeRatio*i.tileSources.length+12*i.tileSources.length+"px",this.element.style.height=o.y*e.sizeRatio+"px",i.addControl(this.element,{anchor:VS.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=o.y*e.sizeRatio*i.tileSources.length+12*i.tileSources.length+"px",this.element.style.width=o.x*e.sizeRatio+"px",i.addControl(this.element,{anchor:VS.ControlAnchor.TOP_LEFT})),this.panelWidth=o.x*this.sizeRatio+8,this.panelHeight=o.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},r=0;r<i.tileSources.length;r++)(t=VS.makeNeutralElement("div")).id=this.element.id+"-"+r,t.style.width=this.panelWidth+"px",t.style.height=this.panelHeight+"px",t.style.display="inline",t.style.float="left",t.style.cssFloat="left",t.style.styleFloat="left",t.style.padding="2px",VS.setElementTouchActionNone(t),t.innerTracker=new VS.MouseTracker({element:t,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(e){e.eventSource.dragging=VS.now()},releaseHandler:function(e){var t=e.eventSource,n=t.element.id,r=Number(n.split("-")[2]),o=VS.now();e.insideElementPressed&&e.insideElementReleased&&t.dragging&&o-t.dragging<t.clickTimeThreshold&&(t.dragging=null,i.goToPage(r))}}),this.element.appendChild(t),t.activePanel=!1,this.panels.push(t);ZS(this,"vertical"==this.scroll?o.y:o.x,0),this.setFocus(0)},VS.extend(VS.ReferenceStrip.prototype,VS.EventSource.prototype,VS.Viewer.prototype,{setFocus:function(e){var t,n=this.element.querySelector("#"+this.element.id+"-"+e),r=VS.getElementSize(this.viewer.canvas),o=Number(this.element.style.width.replace("px","")),i=Number(this.element.style.height.replace("px","")),a=-Number(this.element.style.marginLeft.replace("px","")),s=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==n&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=n,this.currentSelected.style.background="#999","horizontal"==this.scroll?(t=Number(e)*(this.panelWidth+3))>a+r.x-this.panelWidth?(t=Math.min(t,o-r.x),this.element.style.marginLeft=-t+"px",ZS(this,r.x,-t)):t<a&&(t=Math.max(0,t-r.x/2),this.element.style.marginLeft=-t+"px",ZS(this,r.x,-t)):(t=Number(e)*(this.panelHeight+3))>s+r.y-this.panelHeight?(t=Math.min(t,i-r.y),this.element.style.marginTop=-t+"px",ZS(this,r.y,-t)):t<s&&(t=Math.max(0,t-r.y/2),this.element.style.marginTop=-t+"px",ZS(this,r.y,-t)),this.currentPage=e,$S.call(this,{eventSource:this.innerTracker}))},update:function(){return!!WS[this.id].animating&&(VS.console.log("image reference strip update"),!0)},destroy:function(){if(this.miniViewers)for(var e in this.miniViewers)this.miniViewers[e].destroy();this.element&&this.element.parentNode.removeChild(this.element)}}),fU=OpenSeadragon,fU.DisplayRect=function(e,t,n,r,o,i){fU.Rect.apply(this,[e,t,n,r]),this.minLevel=o,this.maxLevel=i},fU.extend(fU.DisplayRect.prototype,fU.Rect.prototype),mU=OpenSeadragon,mU.Spring=function(e){var t=arguments;"object"!=_typeof(e)&&(e={initial:t.length&&"number"==typeof t[0]?t[0]:void 0,springStiffness:1<t.length?t[1].springStiffness:5,animationTime:1<t.length?t[1].animationTime:1.5}),mU.console.assert("number"==typeof e.springStiffness&&0!==e.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),mU.console.assert("number"==typeof e.animationTime&&0<=e.animationTime,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),e.exponential&&(this._exponential=!0,delete e.exponential),mU.extend(!0,this,e),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:mU.now()},mU.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},mU.Spring.prototype={resetTo:function(e){mU.console.assert(!this._exponential||0!==e,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=e,this.start.time=this.target.time=this.current.time=mU.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(e){mU.console.assert(!this._exponential||0!==e,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=e,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(e){this.start.value+=e,this.target.value+=e,this._exponential&&(mU.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(e){this._exponential=e,this._exponential&&(mU.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){var e,t;this.current.time=mU.now(),t=this._exponential?(e=this.start._logValue,this.target._logValue):(e=this.start.value,this.target.value);var n,r,o=this.current.time>=this.target.time?t:e+(t-e)*(n=this.springStiffness,r=(this.current.time-this.start.time)/(this.target.time-this.start.time),(1-Math.exp(n*-r))/(1-Math.exp(-n))),i=this.current.value;return this._exponential?this.current.value=Math.exp(o):this.current.value=o,i!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}},GU=OpenSeadragon,HU.prototype={errorMsg:null,start:function(){var i=this,e=this.abort;this.image=new Image,this.image.onload=function(){i.finish(!0)},this.image.onabort=this.image.onerror=function(){i.errorMsg="Image load aborted",i.finish(!1)},this.jobId=window.setTimeout(function(){i.errorMsg="Image load exceeded timeout ("+i.timeout+" ms)",i.finish(!1)},this.timeout),this.loadWithAjax?(this.request=GU.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(t){var n;try{n=new window.Blob([t.response])}catch(e){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===e.name&&r){var o=new r;o.append(t.response),n=o.getBlob()}}0===n.size&&(i.errorMsg="Empty image response.",i.finish(!1));var e=(window.URL||window.webkitURL).createObjectURL(n);i.image.src=e},error:function(){i.errorMsg="Image load aborted - XHR error",i.finish(!1)}}),this.abort=function(){i.request.abort(),"function"==typeof e&&e()}):(!1!==this.crossOriginPolicy&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(e){this.image.onload=this.image.onerror=this.image.onabort=null,e||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},GU.ImageLoader=function(e){GU.extend(!0,this,{jobLimit:GU.DEFAULT_SETTINGS.imageLoaderLimit,timeout:GU.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},e)},GU.ImageLoader.prototype={addJob:function(t){var n=this,e=new HU({src:t.src,loadWithAjax:t.loadWithAjax,ajaxHeaders:t.loadWithAjax?t.ajaxHeaders:null,crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,callback:function(e){!function(e,t,n){e.jobsInProgress--,(!e.jobLimit||e.jobsInProgress<e.jobLimit)&&0<e.jobQueue.length&&(e.jobQueue.shift().start(),e.jobsInProgress++);n(t.image,t.errorMsg,t.request)}(n,e,t.callback)},abort:t.abort,timeout:this.timeout});!this.jobLimit||this.jobsInProgress<this.jobLimit?(e.start(),this.jobsInProgress++):this.jobQueue.push(e)},clear:function(){for(var e=0;e<this.jobQueue.length;e++){var t=this.jobQueue[e];"function"==typeof t.abort&&t.abort()}this.jobQueue=[]}},mV=OpenSeadragon,mV.Tile=function(e,t,n,r,o,i,a,s,l,c){this.level=e,this.x=t,this.y=n,this.bounds=r,this.sourceBounds=c,this.exists=o,this.url=i,this.context2D=a,this.loadWithAjax=s,this.ajaxHeaders=l,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},mV.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(e){this.cacheImageRecord?this.loaded?(this.element||(this.element=mV.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=e&&e.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",mV.setElementOpacity(this.element,this.opacity)):mV.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):mV.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(e,t,n,r){var o,i,a,s=this.position.times(mV.pixelDensityRatio),l=this.size.times(mV.pixelDensityRatio);this.context2D||this.cacheImageRecord?(o=this.context2D||this.cacheImageRecord.getRenderedContext(),this.loaded&&o?(e.save(),e.globalAlpha=this.opacity,"number"==typeof n&&1!==n&&(s=s.times(n),l=l.times(n)),r instanceof mV.Point&&(s=s.plus(r)),1===e.globalAlpha&&this._hasTransparencyChannel()&&e.clearRect(s.x,s.y,l.x,l.y),t({context:e,tile:this,rendered:o}),a=this.sourceBounds?(i=Math.min(this.sourceBounds.width,o.canvas.width),Math.min(this.sourceBounds.height,o.canvas.height)):(i=o.canvas.width,o.canvas.height),e.drawImage(o.canvas,0,0,i,a,s.x,s.y,l.x,l.y),e.restore()):mV.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):mV.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var e;if(this.cacheImageRecord)e=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return mV.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;e=this.context2D}return e.canvas.width/(this.size.x*mV.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(e,t,n){var r=Math.max(1,Math.ceil((n.x-t.x)/2)),o=Math.max(1,Math.ceil((n.y-t.y)/2));return new mV.Point(r,o).minus(this.position.times(mV.pixelDensityRatio).times(e||1).apply(function(e){return e%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}},VV=OpenSeadragon,VV.OverlayPlacement=VV.Placement,VV.OverlayRotationMode=VV.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),VV.Overlay=function(e,t,n){var r;r=VV.isPlainObject(e)?e:{element:e,location:t,placement:n},this.element=r.element,this.style=r.element.style,this._init(r)},VV.Overlay.prototype={_init:function(e){this.location=e.location,this.placement=void 0===e.placement?VV.Placement.TOP_LEFT:e.placement,this.onDraw=e.onDraw,this.checkResize=void 0===e.checkResize||e.checkResize,this.width=void 0===e.width?null:e.width,this.height=void 0===e.height?null:e.height,this.rotationMode=e.rotationMode||VV.OverlayRotationMode.EXACT,this.location instanceof VV.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=VV.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new VV.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(e,t){var n=VV.Placement.properties[this.placement];n&&(n.isHorizontallyCentered?e.x-=t.x/2:n.isRight&&(e.x-=t.x),n.isVerticallyCentered?e.y-=t.y/2:n.isBottom&&(e.y-=t.y))},destroy:function(){var e=this.element,t=this.style;e.parentNode&&(e.parentNode.removeChild(e),e.prevElementParent&&(t.display="none",document.body.appendChild(e))),this.onDraw=null,t.top="",t.left="",t.position="",null!==this.width&&(t.width=""),null!==this.height&&(t.height="");var n=VV.getCssPropertyWithVendorPrefix("transformOrigin"),r=VV.getCssPropertyWithVendorPrefix("transform");n&&r&&(t[n]="",t[r]="")},drawHTML:function(e,t){var n=this.element;n.parentNode!==e&&(n.prevElementParent=n.parentNode,n.prevNextSibling=n.nextSibling,e.appendChild(n),this.style.position="absolute",this.size=VV.getElementSize(n));var r=this._getOverlayPositionAndSize(t),o=r.position,i=this.size=r.size,a=r.rotate;if(this.onDraw)this.onDraw(o,i,this.element);else{var s=this.style;s.left=o.x+"px",s.top=o.y+"px",null!==this.width&&(s.width=i.x+"px"),null!==this.height&&(s.height=i.y+"px");var l=VV.getCssPropertyWithVendorPrefix("transformOrigin"),c=VV.getCssPropertyWithVendorPrefix("transform");l&&c&&(a?(s[l]=this._getTransformOrigin(),s[c]="rotate("+a+"deg)"):(s[l]="",s[c]="")),"none"!==s.display&&(s.display="block")}},_getOverlayPositionAndSize:function(e){var t=e.pixelFromPoint(this.location,!0),n=this._getSizeInPixels(e);this.adjust(t,n);var r=0;if(e.degrees&&this.rotationMode!==VV.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===VV.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var o=new VV.Rect(t.x,t.y,n.x,n.y),i=this._getBoundingBox(o,e.degrees);t=i.getTopLeft(),n=i.getSize()}else r=e.degrees;return{position:t,size:n,rotate:r}},_getSizeInPixels:function(e){var t=this.size.x,n=this.size.y;if(null!==this.width||null!==this.height){var r=e.deltaPixelsFromPointsNoRotate(new VV.Point(this.width||0,this.height||0),!0);null!==this.width&&(t=r.x),null!==this.height&&(n=r.y)}if(this.checkResize&&(null===this.width||null===this.height)){var o=this.size=VV.getElementSize(this.element);null===this.width&&(t=o.x),null===this.height&&(n=o.y)}return new VV.Point(t,n)},_getBoundingBox:function(e,t){var n=this._getPlacementPoint(e);return e.rotate(t,n).getBoundingBox()},_getPlacementPoint:function(e){var t=new VV.Point(e.x,e.y),n=VV.Placement.properties[this.placement];return n&&(n.isHorizontallyCentered?t.x+=e.width/2:n.isRight&&(t.x+=e.width),n.isVerticallyCentered?t.y+=e.height/2:n.isBottom&&(t.y+=e.height)),t},_getTransformOrigin:function(){var e="",t=VV.Placement.properties[this.placement];return t&&(t.isLeft?e="left":t.isRight&&(e="right"),t.isTop?e+=" top":t.isBottom&&(e+=" bottom")),e},update:function(e,t){var n=VV.isPlainObject(e)?e:{location:e,placement:t};this._init({location:n.location||this.location,placement:void 0!==n.placement?n.placement:this.placement,onDraw:n.onDraw||this.onDraw,checkResize:n.checkResize||this.checkResize,width:void 0!==n.width?n.width:this.width,height:void 0!==n.height?n.height:this.height,rotationMode:n.rotationMode||this.rotationMode})},getBounds:function(e){VV.console.assert(e,"A viewport must now be passed to Overlay.getBounds.");var t=this.width,n=this.height;if(null===t||null===n){var r=e.deltaPointsFromPixelsNoRotate(this.size,!0);null===t&&(t=r.x),null===n&&(n=r.y)}var o=this.location.clone();return this.adjust(o,new VV.Point(t,n)),this._adjustBoundsForRotation(e,new VV.Rect(o.x,o.y,t,n))},_adjustBoundsForRotation:function(e,t){if(!e||0===e.degrees||this.rotationMode===VV.OverlayRotationMode.EXACT)return t;if(this.rotationMode!==VV.OverlayRotationMode.BOUNDING_BOX)return t.rotate(-e.degrees,this._getPlacementPoint(t));if(null===this.width||null===this.height)return t;var n=this._getOverlayPositionAndSize(e);return e.viewerElementToViewportRectangle(new VV.Rect(n.position.x,n.position.y,n.size.x,n.size.y))}},eX=OpenSeadragon,eX.Drawer=function(e){eX.console.assert(e.viewer,"[Drawer] options.viewer is required");var t=arguments;if(eX.isPlainObject(e)||(e={source:t[0],viewport:t[1],element:t[2]}),eX.console.assert(e.viewport,"[Drawer] options.viewport is required"),eX.console.assert(e.element,"[Drawer] options.element is required"),e.source&&eX.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=e.viewer,this.viewport=e.viewport,this.debugGridColor="string"==typeof e.debugGridColor?[e.debugGridColor]:e.debugGridColor||eX.DEFAULT_SETTINGS.debugGridColor,e.opacity&&eX.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=eX.supportsCanvas&&(!this.viewer||this.viewer.useCanvas),this.container=eX.getElement(e.element),this.canvas=eX.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var n=this._calculateCanvasSize();this.canvas.width=n.x,this.canvas.height=n.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",eX.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},eX.Drawer.prototype={addOverlay:function(e,t,n,r){return eX.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(e,t,n,r),this},updateOverlay:function(e,t,n){return eX.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(e,t,n),this},removeOverlay:function(e){return eX.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(e),this},clearOverlays:function(){return eX.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(e){var t=this.viewport.pixelFromPointNoRotate(e,!0);return new eX.Point(t.x*eX.pixelDensityRatio,t.y*eX.pixelDensityRatio)},clipWithPolygons:function(e,t){if(this.useCanvas){var n=this._getContext(t);n.beginPath(),e.forEach(function(e){e.forEach(function(e,t){n[0===t?"moveTo":"lineTo"](e.x,e.y)})}),n.clip()}},setOpacity:function(e){eX.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var t=this.viewer.world,n=0;n<t.getItemCount();n++)t.getItemAt(n).setOpacity(e);return this},getOpacity:function(){eX.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var e=this.viewer.world,t=0,n=0;n<e.getItemCount();n++){var r=e.getItemAt(n).getOpacity();t<r&&(t=r)}return t},needsUpdate:function(){return eX.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return eX.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return eX.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return eX.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var e=this._calculateCanvasSize();if((this.canvas.width!=e.x||this.canvas.height!=e.y)&&(this.canvas.width=e.x,this.canvas.height=e.y,this._updateImageSmoothingEnabled(this.context),null!==this.sketchCanvas)){var t=this._calculateSketchCanvasSize();this.sketchCanvas.width=t.x,this.sketchCanvas.height=t.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(e,t){if(this.useCanvas){var n=this._getContext(e);if(t)n.clearRect(t.x,t.y,t.width,t.height);else{var r=n.canvas;n.clearRect(0,0,r.width,r.height)}}},viewportToDrawerRectangle:function(e){var t=this.viewport.pixelFromPointNoRotate(e.getTopLeft(),!0),n=this.viewport.deltaPixelsFromPointsNoRotate(e.getSize(),!0);return new eX.Rect(t.x*eX.pixelDensityRatio,t.y*eX.pixelDensityRatio,n.x*eX.pixelDensityRatio,n.y*eX.pixelDensityRatio)},drawTile:function(e,t,n,r,o){if(eX.console.assert(e,"[Drawer.drawTile] tile is required"),eX.console.assert(t,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var i=this._getContext(n);r=r||1,e.drawCanvas(i,t,r,o)}else e.drawHTML(this.canvas)},_getContext:function(e){var t=this.context;if(e){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var n=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=n.x,this.sketchCanvas.height=n.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var r=this;this.viewer.addHandler("rotate",function e(){if(0!==r.viewport.getRotation()){r.viewer.removeHandler("rotate",e);var t=r._calculateSketchCanvasSize();r.sketchCanvas.width=t.x,r.sketchCanvas.height=t.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}t=this.sketchContext}return t},saveContext:function(e){this.useCanvas&&this._getContext(e).save()},restoreContext:function(e){this.useCanvas&&this._getContext(e).restore()},setClip:function(e,t){if(this.useCanvas){var n=this._getContext(t);n.beginPath(),n.rect(e.x,e.y,e.width,e.height),n.clip()}},drawRectangle:function(e,t,n){if(this.useCanvas){var r=this._getContext(n);r.save(),r.fillStyle=t,r.fillRect(e.x,e.y,e.width,e.height),r.restore()}},blendSketch:function(e,t,n,r){var o=e;if(eX.isPlainObject(o)||(o={opacity:e,scale:t,translate:n,compositeOperation:r}),this.useCanvas&&this.sketchCanvas){e=o.opacity,r=o.compositeOperation;var i=o.bounds;if(this.context.save(),this.context.globalAlpha=e,r&&(this.context.globalCompositeOperation=r),i)i.x<0&&(i.width+=i.x,i.x=0),i.x+i.width>this.canvas.width&&(i.width=this.canvas.width-i.x),i.y<0&&(i.height+=i.y,i.y=0),i.y+i.height>this.canvas.height&&(i.height=this.canvas.height-i.y),this.context.drawImage(this.sketchCanvas,i.x,i.y,i.width,i.height,i.x,i.y,i.width,i.height);else{t=o.scale||1;var a=(n=o.translate)instanceof eX.Point?n:new eX.Point(0,0),s=0,l=0;if(n){var c=this.sketchCanvas.width-this.canvas.width,u=this.sketchCanvas.height-this.canvas.height;s=Math.round(c/2),l=Math.round(u/2)}this.context.drawImage(this.sketchCanvas,a.x-s*t,a.y-l*t,(this.canvas.width+2*s)*t,(this.canvas.height+2*l)*t,-s,-l,this.canvas.width+2*s,this.canvas.height+2*l)}this.context.restore()}},drawDebugInfo:function(e,t,n,r){if(this.useCanvas){var o=this.viewer.world.getIndexOfItem(r)%this.debugGridColor.length,i=this.context;i.save(),i.lineWidth=2*eX.pixelDensityRatio,i.font="small-caps bold "+13*eX.pixelDensityRatio+"px arial",i.strokeStyle=this.debugGridColor[o],i.fillStyle=this.debugGridColor[o],0!==this.viewport.degrees&&this._offsetForRotation({degrees:this.viewport.degrees}),r.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:r.getRotation(!0),point:r.viewport.pixelFromPointNoRotate(r._getRotationPoint(!0),!0)}),0===r.viewport.degrees&&r.getRotation(!0)%360==0&&r._drawer.viewer.viewport.getFlip()&&r._drawer._flip(),i.strokeRect(e.position.x*eX.pixelDensityRatio,e.position.y*eX.pixelDensityRatio,e.size.x*eX.pixelDensityRatio,e.size.y*eX.pixelDensityRatio);var a=(e.position.x+e.size.x/2)*eX.pixelDensityRatio,s=(e.position.y+e.size.y/2)*eX.pixelDensityRatio;i.translate(a,s),i.rotate(Math.PI/180*-this.viewport.degrees),i.translate(-a,-s),0===e.x&&0===e.y&&(i.fillText("Zoom: "+this.viewport.getZoom(),e.position.x*eX.pixelDensityRatio,(e.position.y-30)*eX.pixelDensityRatio),i.fillText("Pan: "+this.viewport.getBounds().toString(),e.position.x*eX.pixelDensityRatio,(e.position.y-20)*eX.pixelDensityRatio)),i.fillText("Level: "+e.level,(e.position.x+10)*eX.pixelDensityRatio,(e.position.y+20)*eX.pixelDensityRatio),i.fillText("Column: "+e.x,(e.position.x+10)*eX.pixelDensityRatio,(e.position.y+30)*eX.pixelDensityRatio),i.fillText("Row: "+e.y,(e.position.x+10)*eX.pixelDensityRatio,(e.position.y+40)*eX.pixelDensityRatio),i.fillText("Order: "+n+" of "+t,(e.position.x+10)*eX.pixelDensityRatio,(e.position.y+50)*eX.pixelDensityRatio),i.fillText("Size: "+e.size.toString(),(e.position.x+10)*eX.pixelDensityRatio,(e.position.y+60)*eX.pixelDensityRatio),i.fillText("Position: "+e.position.toString(),(e.position.x+10)*eX.pixelDensityRatio,(e.position.y+70)*eX.pixelDensityRatio),0!==this.viewport.degrees&&this._restoreRotationChanges(),r.getRotation(!0)%360!=0&&this._restoreRotationChanges(),0===r.viewport.degrees&&r.getRotation(!0)%360==0&&r._drawer.viewer.viewport.getFlip()&&r._drawer._flip(),i.restore()}},debugRect:function(e){if(this.useCanvas){var t=this.context;t.save(),t.lineWidth=2*eX.pixelDensityRatio,t.strokeStyle=this.debugGridColor[0],t.fillStyle=this.debugGridColor[0],t.strokeRect(e.x*eX.pixelDensityRatio,e.y*eX.pixelDensityRatio,e.width*eX.pixelDensityRatio,e.height*eX.pixelDensityRatio),t.restore()}},setImageSmoothingEnabled:function(e){this.useCanvas&&(this._imageSmoothingEnabled=e,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(e){e.msImageSmoothingEnabled=this._imageSmoothingEnabled,e.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(e){var t=this._getContext(e).canvas;return new eX.Point(t.width,t.height)},getCanvasCenter:function(){return new eX.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(e){var t=e.point?e.point.times(eX.pixelDensityRatio):this.getCanvasCenter(),n=this._getContext(e.useSketch);n.save(),n.translate(t.x,t.y),this.viewer.viewport.flipped?(n.rotate(Math.PI/180*-e.degrees),n.scale(-1,1)):n.rotate(Math.PI/180*e.degrees),n.translate(-t.x,-t.y)},_flip:function(e){var t=(e=e||{}).point?e.point.times(eX.pixelDensityRatio):this.getCanvasCenter(),n=this._getContext(e.useSketch);n.translate(t.x,0),n.scale(-1,1),n.translate(-t.x,0)},_restoreRotationChanges:function(e){this._getContext(e).restore()},_calculateCanvasSize:function(){var e=eX.pixelDensityRatio,t=this.viewport.getContainerSize();return{x:Math.round(t.x*e),y:Math.round(t.y*e)}},_calculateSketchCanvasSize:function(){var e=this._calculateCanvasSize();if(0===this.viewport.getRotation())return e;var t=Math.ceil(Math.sqrt(e.x*e.x+e.y*e.y));return{x:t,y:t}}},zZ=OpenSeadragon,zZ.Viewport=function(e){var t=arguments;t.length&&t[0]instanceof zZ.Point&&(e={containerSize:t[0],contentSize:t[1],config:t[2]}),e.config&&(zZ.extend(!0,e,e.config),delete e.config),this._margins=zZ.extend({left:0,top:0,right:0,bottom:0},e.margins||{}),delete e.margins,zZ.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:zZ.DEFAULT_SETTINGS.springStiffness,animationTime:zZ.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:zZ.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:zZ.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:zZ.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:zZ.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:zZ.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:zZ.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:zZ.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:zZ.DEFAULT_SETTINGS.maxZoomLevel,degrees:zZ.DEFAULT_SETTINGS.degrees,flipped:zZ.DEFAULT_SETTINGS.flipped,homeFillsViewer:zZ.DEFAULT_SETTINGS.homeFillsViewer},e),this._updateContainerInnerSize(),this.centerSpringX=new zZ.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new zZ.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new zZ.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new zZ.Rect(0,0,1,1),1),this.goHome(!0),this.update()},zZ.Viewport.prototype={resetContentSize:function(e){return zZ.console.assert(e,"[Viewport.resetContentSize] contentSize is required"),zZ.console.assert(e instanceof zZ.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),zZ.console.assert(0<e.x,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),zZ.console.assert(0<e.y,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new zZ.Rect(0,0,1,e.y/e.x),e.x),this},setHomeBounds:function(e,t){zZ.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(e,t)},_setContentBounds:function(e,t){zZ.console.assert(e,"[Viewport._setContentBounds] bounds is required"),zZ.console.assert(e instanceof zZ.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),zZ.console.assert(0<e.width,"[Viewport._setContentBounds] bounds.width must be greater than 0"),zZ.console.assert(0<e.height,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=e.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(t),this._contentBounds=e.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(t),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:t,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var e=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?1<=e?e:1:1<=e?1:e)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var e=this._contentBounds.getCenter(),t=1/this.getHomeZoom(),n=t/this.getAspectRatio();return new zZ.Rect(e.x-t/2,e.y-n/2,t,n)},goHome:function(e){return this.viewer&&this.viewer.raiseEvent("home",{immediately:e}),this.fitBounds(this.getHomeBounds(),e)},getMinZoom:function(){var e=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*e},getMaxZoom:function(){var e=this.maxZoomLevel;return e||(e=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,e/=this._contentBounds.width),Math.max(e,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new zZ.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return zZ.extend({},this._margins)},setMargins:function(e){zZ.console.assert("object"===zZ.type(e),"[Viewport.setMargins] margins must be an object"),this._margins=zZ.extend({left:0,top:0,right:0,bottom:0},e),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(-this.getRotation())},getBoundsNoRotate:function(e){var t=this.getCenter(e),n=1/this.getZoom(e),r=n/this.getAspectRatio();return new zZ.Rect(t.x-n/2,t.y-r/2,n,r)},getBoundsWithMargins:function(e){return this.getBoundsNoRotateWithMargins(e).rotate(-this.getRotation(),this.getCenter(e))},getBoundsNoRotateWithMargins:function(e){var t=this.getBoundsNoRotate(e),n=this._containerInnerSize.x*this.getZoom(e);return t.x-=this._margins.left/n,t.y-=this._margins.top/n,t.width+=(this._margins.left+this._margins.right)/n,t.height+=(this._margins.top+this._margins.bottom)/n,t},getCenter:function(e){var t,n,r,o,i,a,s=new zZ.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),l=new zZ.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return e?s:this.zoomPoint?(t=this.pixelFromPoint(this.zoomPoint,!0),o=(r=1/(n=this.getZoom()))/this.getAspectRatio(),i=new zZ.Rect(s.x-r/2,s.y-o/2,r,o),a=this._pixelFromPoint(this.zoomPoint,i).minus(t).divide(this._containerInnerSize.x*n),l.plus(a)):l},getZoom:function(e){return e?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(e){return Math.max(Math.min(e,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(e){var t=new zZ.Rect(e.x,e.y,e.width,e.height);if(!this.wrapHorizontal){var n=this.visibilityRatio*t.width,r=t.x+t.width,o=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,i=this._contentBoundsNoRotate.x-r+n,a=o-t.x-n;n>this._contentBoundsNoRotate.width?t.x+=(i+a)/2:a<0?t.x+=a:0<i&&(t.x+=i)}if(!this.wrapVertical){var s=this.visibilityRatio*t.height,l=t.y+t.height,c=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,u=this._contentBoundsNoRotate.y-l+s,p=c-t.y-s;s>this._contentBoundsNoRotate.height?t.y+=(u+p)/2:p<0?t.y+=p:0<u&&(t.y+=u)}return t},_raiseConstraintsEvent:function(e){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:e})},applyConstraints:function(e){var t=this.getZoom(),n=this._applyZoomConstraints(t);t!==n&&this.zoomTo(n,this.zoomPoint,e);var r=this.getBoundsNoRotate(),o=this._applyBoundaryConstraints(r);return this._raiseConstraintsEvent(e),r.x===o.x&&r.y===o.y&&!e||this.fitBounds(o.rotate(-this.getRotation()),e),this},ensureVisible:function(e){return this.applyConstraints(e)},_fitBounds:function(e,t){var n=(t=t||{}).immediately||!1,r=t.constraints||!1,o=this.getAspectRatio(),i=e.getCenter(),a=new zZ.Rect(e.x,e.y,e.width,e.height,e.degrees+this.getRotation()).getBoundingBox();a.getAspectRatio()>=o?a.height=a.width/o:a.width=a.height*o,a.x=i.x-a.width/2,a.y=i.y-a.height/2;var s=1/a.width;if(r){var l=a.getAspectRatio(),c=this._applyZoomConstraints(s);s!==c&&(s=c,a.width=1/s,a.x=i.x-a.width/2,a.height=a.width/l,a.y=i.y-a.height/2),i=(a=this._applyBoundaryConstraints(a)).getCenter(),this._raiseConstraintsEvent(n)}if(n)return this.panTo(i,!0),this.zoomTo(s,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var u=this.getBounds(),p=this.getZoom();if(0===p||Math.abs(s/p-1)<1e-8)return this.zoomTo(s,!0),this.panTo(i,n);var h=(a=a.rotate(-this.getRotation())).getTopLeft().times(s).minus(u.getTopLeft().times(p)).divide(s-p);return this.zoomTo(s,h,n)},fitBounds:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!1})},fitBoundsWithConstraints:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!0})},fitVertically:function(e){var t=new zZ.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(t,e)},fitHorizontally:function(e){var t=new zZ.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(t,e)},getConstrainedBounds:function(e){var t;return t=this.getBounds(e),this._applyBoundaryConstraints(t)},panBy:function(e,t){var n=new zZ.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(n.plus(e),t)},panTo:function(e,t){return t?(this.centerSpringX.resetTo(e.x),this.centerSpringY.resetTo(e.y)):(this.centerSpringX.springTo(e.x),this.centerSpringY.springTo(e.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:e,immediately:t}),this},zoomBy:function(e,t,n){return this.zoomTo(this.zoomSpring.target.value*e,t,n)},zoomTo:function(e,t,n){var r=this;return this.zoomPoint=t instanceof zZ.Point&&!isNaN(t.x)&&!isNaN(t.y)?t:null,n?this._adjustCenterSpringsForZoomPoint(function(){r.zoomSpring.resetTo(e)}):this.zoomSpring.springTo(e),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:e,refPoint:t,immediately:n}),this},setRotation:function(e){return this.viewer&&this.viewer.drawer.canRotate()&&(this.degrees=zZ.positiveModulo(e,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:e})),this},getRotation:function(){return this.degrees},resize:function(e,t){var n,r=this.getBoundsNoRotate(),o=r;return this.containerSize.x=e.x,this.containerSize.y=e.y,this._updateContainerInnerSize(),t&&(n=e.x/this.containerSize.x,o.width=r.width*n,o.height=o.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:t}),this.fitBounds(o,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new zZ.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var e=this;this._adjustCenterSpringsForZoomPoint(function(){e.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var t=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,t},_adjustCenterSpringsForZoomPoint:function(e){if(this.zoomPoint){var t=this.pixelFromPoint(this.zoomPoint,!0);e();var n=this.pixelFromPoint(this.zoomPoint,!0).minus(t),r=this.deltaPointsFromPixels(n,!0);this.centerSpringX.shiftBy(r.x),this.centerSpringY.shiftBy(r.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else e()},deltaPixelsFromPointsNoRotate:function(e,t){return e.times(this._containerInnerSize.x*this.getZoom(t))},deltaPixelsFromPoints:function(e,t){return this.deltaPixelsFromPointsNoRotate(e.rotate(this.getRotation()),t)},deltaPointsFromPixelsNoRotate:function(e,t){return e.divide(this._containerInnerSize.x*this.getZoom(t))},deltaPointsFromPixels:function(e,t){return this.deltaPointsFromPixelsNoRotate(e,t).rotate(-this.getRotation())},pixelFromPointNoRotate:function(e,t){return this._pixelFromPointNoRotate(e,this.getBoundsNoRotate(t))},pixelFromPoint:function(e,t){return this._pixelFromPoint(e,this.getBoundsNoRotate(t))},_pixelFromPointNoRotate:function(e,t){return e.minus(t.getTopLeft()).times(this._containerInnerSize.x/t.width).plus(new zZ.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(e,t){return this._pixelFromPointNoRotate(e.rotate(this.getRotation(),this.getCenter(!0)),t)},pointFromPixelNoRotate:function(e,t){var n=this.getBoundsNoRotate(t);return e.minus(new zZ.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/n.width).plus(n.getTopLeft())},pointFromPixel:function(e,t){return this.pointFromPixelNoRotate(e,t).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(e,t){var n=this._contentBoundsNoRotate.width;return new zZ.Point(e*this._contentSizeNoRotate.x/n,t*this._contentSizeNoRotate.x/n)},viewportToImageCoordinates:function(e,t){if(e instanceof zZ.Point)return this.viewportToImageCoordinates(e.x,e.y);if(this.viewer){var n=this.viewer.world.getItemCount();if(1<n)zZ.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===n){return this.viewer.world.getItemAt(0).viewportToImageCoordinates(e,t,!0)}}return this._viewportToImageDelta(e-this._contentBoundsNoRotate.x,t-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(e,t){var n=this._contentBoundsNoRotate.width;return new zZ.Point(e/this._contentSizeNoRotate.x*n,t/this._contentSizeNoRotate.x*n)},imageToViewportCoordinates:function(e,t){if(e instanceof zZ.Point)return this.imageToViewportCoordinates(e.x,e.y);if(this.viewer){var n=this.viewer.world.getItemCount();if(1<n)zZ.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===n){return this.viewer.world.getItemAt(0).imageToViewportCoordinates(e,t,!0)}}var r=this._imageToViewportDelta(e,t);return r.x+=this._contentBoundsNoRotate.x,r.y+=this._contentBoundsNoRotate.y,r},imageToViewportRectangle:function(e,t,n,r){var o=e;if(o instanceof zZ.Rect||(o=new zZ.Rect(e,t,n,r)),this.viewer){var i=this.viewer.world.getItemCount();if(1<i)zZ.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===i){return this.viewer.world.getItemAt(0).imageToViewportRectangle(e,t,n,r,!0)}}var a=this.imageToViewportCoordinates(o.x,o.y),s=this._imageToViewportDelta(o.width,o.height);return new zZ.Rect(a.x,a.y,s.x,s.y,o.degrees)},viewportToImageRectangle:function(e,t,n,r){var o=e;if(o instanceof zZ.Rect||(o=new zZ.Rect(e,t,n,r)),this.viewer){var i=this.viewer.world.getItemCount();if(1<i)zZ.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===i){return this.viewer.world.getItemAt(0).viewportToImageRectangle(e,t,n,r,!0)}}var a=this.viewportToImageCoordinates(o.x,o.y),s=this._viewportToImageDelta(o.width,o.height);return new zZ.Rect(a.x,a.y,s.x,s.y,o.degrees)},viewerElementToImageCoordinates:function(e){var t=this.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){zZ.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var t=e.minus(zZ.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(t)},imageToWindowCoordinates:function(e){return zZ.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(e).plus(zZ.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(e){return this.pointFromPixel(e,!0)},viewportToViewerElementCoordinates:function(e){return this.pixelFromPoint(e,!0)},viewerElementToViewportRectangle:function(e){return zZ.Rect.fromSummits(this.pointFromPixel(e.getTopLeft(),!0),this.pointFromPixel(e.getTopRight(),!0),this.pointFromPixel(e.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(e){return zZ.Rect.fromSummits(this.pixelFromPoint(e.getTopLeft(),!0),this.pixelFromPoint(e.getTopRight(),!0),this.pixelFromPoint(e.getBottomLeft(),!0))},windowToViewportCoordinates:function(e){zZ.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var t=e.minus(zZ.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(t)},viewportToWindowCoordinates:function(e){return zZ.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(e).plus(zZ.getElementPosition(this.viewer.element))},viewportToImageZoom:function(e){if(this.viewer){var t=this.viewer.world.getItemCount();if(1<t)zZ.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===t){return this.viewer.world.getItemAt(0).viewportToImageZoom(e)}}var n=this._contentSizeNoRotate.x;return e*(this._containerInnerSize.x/n*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(e){if(this.viewer){var t=this.viewer.world.getItemCount();if(1<t)zZ.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===t){return this.viewer.world.getItemAt(0).imageToViewportZoom(e)}}return e*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(e){return this.flipped===e||(this.flipped=e,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:e})),this}},t2=OpenSeadragon,t2.TiledImage=function(e){var t=this;t2.console.assert(e.tileCache,"[TiledImage] options.tileCache is required"),t2.console.assert(e.drawer,"[TiledImage] options.drawer is required"),t2.console.assert(e.viewer,"[TiledImage] options.viewer is required"),t2.console.assert(e.imageLoader,"[TiledImage] options.imageLoader is required"),t2.console.assert(e.source,"[TiledImage] options.source is required"),t2.console.assert(!e.clip||e.clip instanceof t2.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),t2.EventSource.call(this),this._tileCache=e.tileCache,delete e.tileCache,this._drawer=e.drawer,delete e.drawer,this._imageLoader=e.imageLoader,delete e.imageLoader,e.clip instanceof t2.Rect&&(this._clip=e.clip.clone()),delete e.clip;var n=e.x||0;delete e.x;var r=e.y||0;delete e.y,this.normHeight=e.source.dimensions.y/e.source.dimensions.x,this.contentAspectX=e.source.dimensions.x/e.source.dimensions.y;var o=1;e.width?(o=e.width,delete e.width,e.height&&(t2.console.error("specifying both width and height to a tiledImage is not supported"),delete e.height)):e.height&&(o=e.height/this.normHeight,delete e.height);var i=e.fitBounds;delete e.fitBounds;var a=e.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete e.fitBoundsPlacement;var s=e.degrees||0;delete e.degrees,t2.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:t2.DEFAULT_SETTINGS.springStiffness,animationTime:t2.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:t2.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:t2.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t2.DEFAULT_SETTINGS.wrapVertical,immediateRender:t2.DEFAULT_SETTINGS.immediateRender,blendTime:t2.DEFAULT_SETTINGS.blendTime,alwaysBlend:t2.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:t2.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:t2.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:t2.DEFAULT_SETTINGS.iOSDevice,debugMode:t2.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:t2.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:t2.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:t2.DEFAULT_SETTINGS.placeholderFillStyle,opacity:t2.DEFAULT_SETTINGS.opacity,preload:t2.DEFAULT_SETTINGS.preload,compositeOperation:t2.DEFAULT_SETTINGS.compositeOperation},e),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new t2.Spring({initial:n,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new t2.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new t2.Spring({initial:o,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new t2.Spring({initial:s,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),i&&this.fitBounds(i,a,!0),this._drawingHandler=function(e){t.viewer.raiseEvent("tile-drawing",t2.extend({tiledImage:t},e))}},t2.extend(t2.TiledImage.prototype,t2.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(e){e!==this._fullyLoaded&&(this._fullyLoaded=e,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=t2.now(),this._needsDraw=!0},update:function(){var e=this._xSpring.update(),t=this._ySpring.update(),n=this._scaleSpring.update(),r=this._degreesSpring.update();return!!(e||t||n||r)&&(this._updateForScale(),this._needsDraw=!0)},draw:function(){0!==this.opacity||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(this.getRotation(e),this._getRotationPoint(e))},getBoundsNoRotate:function(e){return e?new t2.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new t2.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return t2.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(e){var t=this.getBoundsNoRotate(e);if(this._clip){var n=(e?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x,r=this._clip.times(n);t=new t2.Rect(t.x+r.x,t.y+r.y,r.width,r.height)}return t.rotate(this.getRotation(e),this._getRotationPoint(e))},getContentSize:function(){return new t2.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(e,t,n){var r=n?this._scaleSpring.current.value:this._scaleSpring.target.value;return new t2.Point(e*(this.source.dimensions.x/r),t*(this.source.dimensions.y*this.contentAspectX/r))},viewportToImageCoordinates:function(e,t,n){var r;return r=(r=e instanceof t2.Point?(n=t,e):new t2.Point(e,t)).rotate(-this.getRotation(n),this._getRotationPoint(n)),n?this._viewportToImageDelta(r.x-this._xSpring.current.value,r.y-this._ySpring.current.value):this._viewportToImageDelta(r.x-this._xSpring.target.value,r.y-this._ySpring.target.value)},_imageToViewportDelta:function(e,t,n){var r=n?this._scaleSpring.current.value:this._scaleSpring.target.value;return new t2.Point(e/this.source.dimensions.x*r,t/this.source.dimensions.y/this.contentAspectX*r)},imageToViewportCoordinates:function(e,t,n){e instanceof t2.Point&&(n=t,t=e.y,e=e.x);var r=this._imageToViewportDelta(e,t);return n?(r.x+=this._xSpring.current.value,r.y+=this._ySpring.current.value):(r.x+=this._xSpring.target.value,r.y+=this._ySpring.target.value),r.rotate(this.getRotation(n),this._getRotationPoint(n))},imageToViewportRectangle:function(e,t,n,r,o){var i=e;i instanceof t2.Rect?o=t:i=new t2.Rect(e,t,n,r);var a=this.imageToViewportCoordinates(i.getTopLeft(),o),s=this._imageToViewportDelta(i.width,i.height,o);return new t2.Rect(a.x,a.y,s.x,s.y,i.degrees+this.getRotation(o))},viewportToImageRectangle:function(e,t,n,r,o){var i=e;e instanceof t2.Rect?o=t:i=new t2.Rect(e,t,n,r);var a=this.viewportToImageCoordinates(i.getTopLeft(),o),s=this._viewportToImageDelta(i.width,i.height,o);return new t2.Rect(a.x,a.y,s.x,s.y,i.degrees-this.getRotation(o))},viewerElementToImageCoordinates:function(e){var t=this.viewport.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.viewport.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){var t=e.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(t)},imageToWindowCoordinates:function(e){return this.imageToViewerElementCoordinates(e).plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(e){var t=this._scaleSpring.current.value;return e=e.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new t2.Rect((e.x-this._xSpring.current.value)/t,(e.y-this._ySpring.current.value)/t,e.width/t,e.height/t,e.degrees)},viewportToImageZoom:function(e){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*e},imageToViewportZoom:function(e){return e/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(e,t){var n=this._xSpring.target.value===e.x&&this._ySpring.target.value===e.y;if(t){if(n&&this._xSpring.current.value===e.x&&this._ySpring.current.value===e.y)return;this._xSpring.resetTo(e.x),this._ySpring.resetTo(e.y),this._needsDraw=!0}else{if(n)return;this._xSpring.springTo(e.x),this._ySpring.springTo(e.y),this._needsDraw=!0}n||this._raiseBoundsChange()},setWidth:function(e,t){this._setScale(e,t)},setHeight:function(e,t){this._setScale(e/this.normHeight,t)},setCroppingPolygons:function(e){function t(e){return e.map(function(e){try{if((t=e)instanceof t2.Point||"number"==typeof t.x&&"number"==typeof t.y)return{x:e.x,y:e.y};throw new Error}catch(e){throw new Error("A Provided cropping polygon point is not supported")}var t})}try{if(!t2.isArray(e))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=e.map(function(e){return t(e)})}catch(e){t2.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),t2.console.error(e),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(e,t,n){t=t||t2.Placement.CENTER;var r=t2.Placement.properties[t],o=this.contentAspectX,i=0,a=0,s=1,l=1;if(this._clip&&(o=this._clip.getAspectRatio(),s=this._clip.width/this.source.dimensions.x,l=this._clip.height/this.source.dimensions.y,a=e.getAspectRatio()>o?(i=this._clip.x/this._clip.height*e.height,this._clip.y/this._clip.height*e.height):(i=this._clip.x/this._clip.width*e.width,this._clip.y/this._clip.width*e.width)),e.getAspectRatio()>o){var c=e.height/l,u=0;r.isHorizontallyCentered?u=(e.width-e.height*o)/2:r.isRight&&(u=e.width-e.height*o),this.setPosition(new t2.Point(e.x-i+u,e.y-a),n),this.setHeight(c,n)}else{var p=e.width/s,h=0;r.isVerticallyCentered?h=(e.height-e.width/o)/2:r.isBottom&&(h=e.height-e.width/o),this.setPosition(new t2.Point(e.x-i,e.y-a+h),n),this.setWidth(p,n)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(e){t2.console.assert(!e||e instanceof t2.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),e instanceof t2.Rect?this._clip=e.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(e){e!==this.opacity&&(this.opacity=e,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(e){this._preload=!!e,this._needsDraw=!0},getRotation:function(e){return e?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(e,t){this._degreesSpring.target.value===e&&this._degreesSpring.isAtTargetValue()||(t?this._degreesSpring.resetTo(e):this._degreesSpring.springTo(e),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(e){return this.getBoundsNoRotate(e).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(e){e!==this.compositeOperation&&(this.compositeOperation=e,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(e,t){var n=this._scaleSpring.target.value===e;if(t){if(n&&this._scaleSpring.current.value===e)return;this._scaleSpring.resetTo(e),this._updateForScale(),this._needsDraw=!0}else{if(n)return;this._scaleSpring.springTo(e),this._updateForScale(),this._needsDraw=!0}n||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var e=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),t=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,n=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(t/this.minPixelRatio)/Math.log(2))));return n=Math.max(n,this.source.minLevel||0),{lowestLevel:e=Math.min(e,n),highestLevel:n}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};0<this.lastDrawn.length;){this.lastDrawn.pop().beingDrawn=!1}var e=this.viewport,t=this._viewportToTiledImageRectangle(e.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var n=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(null===(t=t.intersection(n)))return}for(var r,o,i,a=this._getLevelsInterval(),s=a.lowestLevel,l=a.highestLevel,c=null,u=!1,p=t2.now(),h=l;s<=h;h--){var d=!1,f=e.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(h),!0).x*this._scaleSpring.current.value;if(h===s||!u&&f>=this.minPixelRatio)u=d=!0;else if(!u)continue;var m=e.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(h),!1).x*this._scaleSpring.current.value,g=e.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,y=this.immediateRender?1:g;if(c=u2(this,u,d,h,Math.min(1,(f-.5)/.5),y/Math.abs(y-m),t,p,c),C2(this.coverage,h))break}!function(r,e){if(0===r.opacity||0===e.length&&!r.placeholderFillStyle)return;var t,o,n,i=e[0];i&&(t=r.opacity<1||r.compositeOperation&&"source-over"!==r.compositeOperation||!r._isBottomItem()&&i._hasTransparencyChannel());var a,s=r.viewport.getZoom(!0),l=r.viewportToImageZoom(s);1<e.length&&l>r.smoothTileEdgesMinZoom&&!r.iOSDevice&&r.getRotation(!0)%360==0&&t2.supportsCanvas&&(t=!0,o=i.getScaleForEdgeSmoothing(),n=i.getTranslationForEdgeSmoothing(o,r._drawer.getCanvasSize(!1),r._drawer.getCanvasSize(!0)));t&&(o||(a=r.viewport.viewportToViewerElementRectangle(r.getClippedBounds(!0)).getIntegerBoundingBox(),r._drawer.viewer.viewport.getFlip()&&(0===r.viewport.degrees&&r.getRotation(!0)%360==0||(a.x=r._drawer.viewer.container.clientWidth-(a.x+a.width))),a=a.times(t2.pixelDensityRatio)),r._drawer._clear(!0,a));o||(0!==r.viewport.degrees&&r._drawer._offsetForRotation({degrees:r.viewport.degrees,useSketch:t}),r.getRotation(!0)%360!=0&&r._drawer._offsetForRotation({degrees:r.getRotation(!0),point:r.viewport.pixelFromPointNoRotate(r._getRotationPoint(!0),!0),useSketch:t}),0===r.viewport.degrees&&r.getRotation(!0)%360==0&&r._drawer.viewer.viewport.getFlip()&&r._drawer._flip());var c=!1;if(r._clip){r._drawer.saveContext(t);var u=r.imageToViewportRectangle(r._clip,!0);u=u.rotate(-r.getRotation(!0),r._getRotationPoint(!0));var p=r._drawer.viewportToDrawerRectangle(u);o&&(p=p.times(o)),n&&(p=p.translate(n)),r._drawer.setClip(p,t),c=!0}if(r._croppingPolygons){r._drawer.saveContext(t);try{var h=r._croppingPolygons.map(function(e){return e.map(function(e){var t=r.imageToViewportCoordinates(e.x,e.y,!0).rotate(-r.getRotation(!0),r._getRotationPoint(!0)),n=r._drawer.viewportCoordToDrawerCoord(t);return o&&(n=n.times(o)),n})});r._drawer.clipWithPolygons(h,t)}catch(e){t2.console.error(e)}c=!0}if(r.placeholderFillStyle&&!1===r._hasOpaqueTile){var d=r._drawer.viewportToDrawerRectangle(r.getBounds(!0));o&&(d=d.times(o)),n&&(d=d.translate(n));var f=null;f="function"==typeof r.placeholderFillStyle?r.placeholderFillStyle(r,r._drawer.context):r.placeholderFillStyle,r._drawer.drawRectangle(d,f,t)}for(var m=e.length-1;0<=m;m--)i=e[m],r._drawer.drawTile(i,r._drawingHandler,t,o,n),i.beingDrawn=!0,r.viewer&&r.viewer.raiseEvent("tile-drawn",{tiledImage:r,tile:i});c&&r._drawer.restoreContext(t);o||(r.getRotation(!0)%360!=0&&r._drawer._restoreRotationChanges(t),0!==r.viewport.degrees&&r._drawer._restoreRotationChanges(t));t&&(o&&(0!==r.viewport.degrees&&r._drawer._offsetForRotation({degrees:r.viewport.degrees,useSketch:!1}),r.getRotation(!0)%360!=0&&r._drawer._offsetForRotation({degrees:r.getRotation(!0),point:r.viewport.pixelFromPointNoRotate(r._getRotationPoint(!0),!0),useSketch:!1})),r._drawer.blendSketch({opacity:r.opacity,scale:o,translate:n,compositeOperation:r.compositeOperation,bounds:a}),o&&(r.getRotation(!0)%360!=0&&r._drawer._restoreRotationChanges(!1),0!==r.viewport.degrees&&r._drawer._restoreRotationChanges(!1)));o||0===r.viewport.degrees&&r.getRotation(!0)%360==0&&r._drawer.viewer.viewport.getFlip()&&r._drawer._flip();!function(e,t){if(e.debugMode)for(var n=t.length-1;0<=n;n--){var r=t[n];try{e._drawer.drawDebugInfo(r,t.length,n,e)}catch(e){t2.console.error(e)}}}(r,e)}(this,this.lastDrawn),c&&!c.context2D?(r=this,i=p,(o=c).loading=!0,r._imageLoader.addJob({src:o.url,loadWithAjax:o.loadWithAjax,ajaxHeaders:o.ajaxHeaders,crossOriginPolicy:r.crossOriginPolicy,ajaxWithCredentials:r.ajaxWithCredentials,callback:function(e,t,n){!function(t,n,e,r,o,i){if(!r)return t2.console.log("Tile %s failed to load: %s - error: %s",n,n.url,o),t.viewer.raiseEvent("tile-load-failed",{tile:n,tiledImage:t,time:e,message:o,tileRequest:i}),n.loading=!1,n.exists=!1;if(e<t.lastResetTime)return t2.console.log("Ignoring tile %s loaded before reset: %s",n,n.url),n.loading=!1;function a(){var e=t.source.getClosestLevel();z2(t,n,r,e,i)}t._midDraw?window.setTimeout(a,1):a()}(r,o,i,e,t,n)},abort:function(){o.loading=!1}}),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(0===this._tilesLoading)},_getCornerTiles:function(e,t,n){var r,o,i,a;o=this.wrapHorizontal?(r=t2.positiveModulo(t.x,1),t2.positiveModulo(n.x,1)):(r=Math.max(0,t.x),Math.min(1,n.x));var s=1/this.source.aspectRatio;a=this.wrapVertical?(i=t2.positiveModulo(t.y,s),t2.positiveModulo(n.y,s)):(i=Math.max(0,t.y),Math.min(s,n.y));var l=this.source.getTileAtPoint(e,new t2.Point(r,i)),c=this.source.getTileAtPoint(e,new t2.Point(o,a)),u=this.source.getNumTiles(e);return this.wrapHorizontal&&(l.x+=u.x*Math.floor(t.x),c.x+=u.x*Math.floor(n.x)),this.wrapVertical&&(l.y+=u.y*Math.floor(t.y/s),c.y+=u.y*Math.floor(n.y/s)),{topLeft:l,bottomRight:c}}}),_8=OpenSeadragon,b9.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var e=document.createElement("canvas");e.width=this._image.width,e.height=this._image.height,this._renderedContext=e.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(e){_8.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=e},addTile:function(e){_8.console.assert(e,"[ImageRecord.addTile] tile is required"),this._tiles.push(e)},removeTile:function(e){for(var t=0;t<this._tiles.length;t++)if(this._tiles[t]===e)return void this._tiles.splice(t,1);_8.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",e)},getTileCount:function(){return this._tiles.length}},_8.TileCache=function(e){e=e||{},this._maxImageCacheCount=e.maxImageCacheCount||_8.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},_8.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(e){_8.console.assert(e,"[TileCache.cacheTile] options is required"),_8.console.assert(e.tile,"[TileCache.cacheTile] options.tile is required"),_8.console.assert(e.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),_8.console.assert(e.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var t=e.cutoff||0,n=this._tilesLoaded.length,r=this._imagesLoaded[e.tile.cacheKey];if(r||(_8.console.assert(e.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),r=this._imagesLoaded[e.tile.cacheKey]=new b9({image:e.image}),this._imagesLoadedCount++),r.addTile(e.tile),e.tile.cacheImageRecord=r,this._imagesLoadedCount>this._maxImageCacheCount){for(var o,i,a,s,l,c,u=null,p=-1,h=null,d=this._tilesLoaded.length-1;0<=d;d--)(o=(c=this._tilesLoaded[d]).tile).level<=t||o.beingDrawn||(u?(s=o.lastTouchTime,i=u.lastTouchTime,l=o.level,a=u.level,(s<i||s==i&&a<l)&&(u=o,p=d,h=c)):(u=o,p=d,h=c));u&&0<=p&&(this._unloadTile(h),n=p)}this._tilesLoaded[n]=new a9({tile:e.tile,tiledImage:e.tiledImage})},clearTilesFor:function(e){var t;_8.console.assert(e,"[TileCache.clearTilesFor] tiledImage is required");for(var n=0;n<this._tilesLoaded.length;++n)(t=this._tilesLoaded[n]).tiledImage===e&&(this._unloadTile(t),this._tilesLoaded.splice(n,1),n--)},getImageRecord:function(e){return _8.console.assert(e,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[e]},_unloadTile:function(e){_8.console.assert(e,"[TileCache._unloadTile] tileRecord is required");var t=e.tile,n=e.tiledImage;t.unload(),t.cacheImageRecord=null;var r=this._imagesLoaded[t.cacheKey];r.removeTile(t),r.getTileCount()||(r.destroy(),delete this._imagesLoaded[t.cacheKey],this._imagesLoadedCount--),n.viewer.raiseEvent("tile-unloaded",{tile:t,tiledImage:n})}},U9=OpenSeadragon,U9.World=function(e){var t=this;U9.console.assert(e.viewer,"[World] options.viewer is required"),U9.EventSource.call(this),this.viewer=e.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(e){t._autoRefigureSizes?t._figureSizes():t._needsSizesFigured=!0},this._figureSizes()},U9.extend(U9.World.prototype,U9.EventSource.prototype,{addItem:function(e,t){if(U9.console.assert(e,"[World.addItem] item is required"),U9.console.assert(e instanceof U9.TiledImage,"[World.addItem] only TiledImages supported at this time"),void 0!==(t=t||{}).index){var n=Math.max(0,Math.min(this._items.length,t.index));this._items.splice(n,0,e)}else this._items.push(e);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,e.addHandler("bounds-change",this._delegatedFigureSizes),e.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:e})},getItemAt:function(e){return U9.console.assert(void 0!==e,"[World.getItemAt] index is required"),this._items[e]},getIndexOfItem:function(e){return U9.console.assert(e,"[World.getIndexOfItem] item is required"),U9.indexOf(this._items,e)},getItemCount:function(){return this._items.length},setItemIndex:function(e,t){U9.console.assert(e,"[World.setItemIndex] item is required"),U9.console.assert(void 0!==t,"[World.setItemIndex] index is required");var n=this.getIndexOfItem(e);if(t>=this._items.length)throw new Error("Index bigger than number of layers.");t!==n&&-1!==n&&(this._items.splice(n,1),this._items.splice(t,0,e),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:e,previousIndex:n,newIndex:t}))},removeItem:function(e){U9.console.assert(e,"[World.removeItem] item is required");var t=U9.indexOf(this._items,e);-1!==t&&(e.removeHandler("bounds-change",this._delegatedFigureSizes),e.removeHandler("clip-change",this._delegatedFigureSizes),e.destroy(),this._items.splice(t,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(e))},removeAll:function(){var e,t;for(this.viewer._cancelPendingImages(),t=0;t<this._items.length;t++)(e=this._items[t]).removeHandler("bounds-change",this._delegatedFigureSizes),e.removeHandler("clip-change",this._delegatedFigureSizes),e.destroy();var n=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,t=0;t<n.length;t++)e=n[t],this._raiseRemoveItem(e)},resetItems:function(){for(var e=0;e<this._items.length;e++)this._items[e].reset()},update:function(){for(var e=!1,t=0;t<this._items.length;t++)e=this._items[t].update()||e;return e},draw:function(){for(var e=0;e<this._items.length;e++)this._items[e].draw();this._needsDraw=!1},needsDraw:function(){for(var e=0;e<this._items.length;e++)if(this._items[e].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(e){(this._autoRefigureSizes=e)&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(e){var t,n=(e=e||{}).immediately||!1,r=e.layout||U9.DEFAULT_SETTINGS.collectionLayout,o=e.rows||U9.DEFAULT_SETTINGS.collectionRows,i=e.columns||U9.DEFAULT_SETTINGS.collectionColumns,a=e.tileSize||U9.DEFAULT_SETTINGS.collectionTileSize,s=a+(e.tileMargin||U9.DEFAULT_SETTINGS.collectionTileMargin);t=!e.rows&&i?i:Math.ceil(this._items.length/o);var l,c,u,p,h,d=0,f=0;this.setAutoRefigureSizes(!1);for(var m=0;m<this._items.length;m++)m&&m%t==0&&("horizontal"===r?(f+=s,d=0):(d+=s,f=0)),p=(u=(c=(l=this._items[m]).getBounds()).width>c.height?a:a*(c.width/c.height))*(c.height/c.width),h=new U9.Point(d+(a-u)/2,f+(a-p)/2),l.setPosition(h,n),l.setWidth(u,n),"horizontal"===r?d+=s:f+=s;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var e=this._homeBounds?this._homeBounds.clone():null,t=this._contentSize?this._contentSize.clone():null,n=this._contentFactor||0;if(this._items.length){var r=this._items[0],o=r.getBounds();this._contentFactor=r.getContentSize().x/o.width;for(var i=r.getClippedBounds().getBoundingBox(),a=i.x,s=i.y,l=i.x+i.width,c=i.y+i.height,u=1;u<this._items.length;u++)o=(r=this._items[u]).getBounds(),this._contentFactor=Math.max(this._contentFactor,r.getContentSize().x/o.width),i=r.getClippedBounds().getBoundingBox(),a=Math.min(a,i.x),s=Math.min(s,i.y),l=Math.max(l,i.x+i.width),c=Math.max(c,i.y+i.height);this._homeBounds=new U9.Rect(a,s,l-a,c-s),this._contentSize=new U9.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new U9.Rect(0,0,1,1),this._contentSize=new U9.Point(1,1),this._contentFactor=1;this._contentFactor===n&&this._homeBounds.equals(e)&&this._contentSize.equals(t)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(e){this.raiseEvent("remove-item",{item:e})}})},
/*!************************************************************************!*\
  !*** ../recogito-client-core/node_modules/es-abstract/GetIntrinsic.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,s=TypeError,l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}function i(){throw new s}var a=l?function(){try{return i}catch(e){try{return l(arguments,"callee").get}catch(e){return i}}}():i,c=n(/*! has-symbols */54)(),u=Object.getPrototypeOf||function(e){return e.__proto__},p=o,h="undefined"==typeof Uint8Array?o:u(Uint8Array),d={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?o:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?o:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":c?u([][Symbol.iterator]()):o,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":o,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":o,"%AsyncGenerator%":o,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":o,"%AsyncIteratorPrototype%":p&&c&&Symbol.asyncIterator?p[Symbol.asyncIterator]():o,"%Atomics%":"undefined"==typeof Atomics?o:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?o:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?o:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?o:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?o:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?o:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?o:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":o,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":o,"%Int8Array%":"undefined"==typeof Int8Array?o:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?o:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?o:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?o:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?o:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?o:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":c?u(u([][Symbol.iterator]())):o,"%JSON%":"object"===("undefined"==typeof JSON?"undefined":r(JSON))?JSON:o,"%JSONParse%":"object"===("undefined"==typeof JSON?"undefined":r(JSON))?JSON.parse:o,"%Map%":"undefined"==typeof Map?o:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&c?u((new Map)[Symbol.iterator]()):o,"%MapPrototype%":"undefined"==typeof Map?o:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?o:Promise,"%PromisePrototype%":"undefined"==typeof Promise?o:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?o:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?o:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?o:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?o:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?o:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?o:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?o:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&c?u((new Set)[Symbol.iterator]()):o,"%SetPrototype%":"undefined"==typeof Set?o:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?o:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?o:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":c?u(""[Symbol.iterator]()):o,"%StringPrototype%":String.prototype,"%Symbol%":c?Symbol:o,"%SymbolPrototype%":c?Symbol.prototype:o,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":a,"%TypedArray%":h,"%TypedArrayPrototype%":h?h.prototype:o,"%TypeError%":s,"%TypeErrorPrototype%":s.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?o:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?o:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?o:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?o:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?o:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?o:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?o:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?o:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?o:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?o:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?o:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?o:WeakSet.prototype},f=n(/*! function-bind */11).call(Function.call,String.prototype.replace),m=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,g=/\\(\\)?/g;e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean');for(var o,n=(o=[],f(e,m,function(e,t,n,r){o[o.length]=n?f(r,g,"$1"):t||e}),o),r=function(e,t){if(!(e in d))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===d[e]&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return d[e]}("%"+(0<n.length?n[0]:"")+"%",t),i=1;i<n.length;i+=1)if(null!=r)if(l&&i+1>=n.length){var a=l(r,n[i]);if(!(t||n[i]in r))throw new s("base intrinsic for "+e+" exists, but the property is not available.");r=a?a.get||a.value:r[n[i]]}else r=r[n[i]];return r}},
/*!********************************************!*\
  !*** ./node_modules/tiny-emitter/index.js ***!
  \********************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function o(){r.off(e,o),t.apply(n,arguments)}return o._=t,this.on(e,o,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,a=r.length;i<a;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}},e.exports=n,e.exports.TinyEmitter=n},
/*!*******************************************************!*\
  !*** ../recogito-client-core/node_modules/uuid/v1.js ***!
  \*******************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){var f,m,g=n(/*! ./lib/rng */72),y=n(/*! ./lib/bytesToUuid */73),v=0,b=0;e.exports=function(e,t,n){var r=t&&n||0,o=t||[],i=(e=e||{}).node||f,a=void 0!==e.clockseq?e.clockseq:m;if(null==i||null==a){var s=g();null==i&&(i=f=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=m=16383&(s[6]<<8|s[7]))}var l=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:b+1,u=l-v+(c-b)/1e4;if(u<0&&void 0===e.clockseq&&(a=a+1&16383),(u<0||v<l)&&void 0===e.nsecs&&(c=0),1e4<=c)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=l,m=a;var p=(1e4*(268435455&(l+=122192928e5))+(b=c))%4294967296;o[r++]=p>>>24&255,o[r++]=p>>>16&255,o[r++]=p>>>8&255,o[r++]=255&p;var h=l/4294967296*1e4&268435455;o[r++]=h>>>8&255,o[r++]=255&h,o[r++]=h>>>24&15|16,o[r++]=h>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(var d=0;d<6;++d)o[r+d]=i[d];return t||y(o)}},
/*!***********************************************************************************************!*\
  !*** ../recogito-client-core/node_modules/react-contenteditable/lib/react-contenteditable.js ***!
  \***********************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(/*! react */0)),u=l(n(/*! fast-deep-equal */76)),p=i(n(/*! prop-types */12));function h(e){return e&&e.replace(/&nbsp;|\u202F|\u00A0/g," ")}var d,f=(d=c.Component,o(m,d),m.prototype.render=function(){var t=this,e=this.props,n=e.tagName,r=e.html,o=e.innerRef,i=s(e,["tagName","html","innerRef"]);return c.createElement(n||"div",a(a({},i),{ref:"function"==typeof o?function(e){o(e),t.el.current=e}:o||this.el,onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,onKeyUp:this.props.onKeyUp||this.emitChange,onKeyDown:this.props.onKeyDown||this.emitChange,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html:r}}),this.props.children)},m.prototype.shouldComponentUpdate=function(e){var t=this.props,n=this.getEl();return!n||h(e.html)!==h(n.innerHTML)||t.disabled!==e.disabled||t.tagName!==e.tagName||t.className!==e.className||t.innerRef!==e.innerRef||!u.default(t.style,e.style)},m.prototype.componentDidUpdate=function(){var e=this.getEl();e&&(this.props.html!==e.innerHTML&&(e.innerHTML=this.lastHtml=this.props.html),function(e){var t=document.createTextNode("");e.appendChild(t);var n=document.activeElement===e;if(null!==t&&null!==t.nodeValue&&n){var r=window.getSelection();if(null!==r){var o=document.createRange();o.setStart(t,t.nodeValue.length),o.collapse(!0),r.removeAllRanges(),r.addRange(o)}e instanceof HTMLElement&&e.focus()}}(e))},m.propTypes={html:p.string.isRequired,onChange:p.func,disabled:p.bool,tagName:p.string,className:p.string,style:p.object,innerRef:p.oneOfType([p.object,p.func])},m);function m(){var o=null!==d&&d.apply(this,arguments)||this;return o.lastHtml=o.props.html,o.el="function"==typeof o.props.innerRef?{current:null}:c.createRef(),o.getEl=function(){return(o.props.innerRef&&"function"!=typeof o.props.innerRef?o.props.innerRef:o.el).current},o.emitChange=function(e){var t=o.getEl();if(t){var n=t.innerHTML;if(o.props.onChange&&n!==o.lastHtml){var r=Object.assign({},e,{target:{value:n}});o.props.onChange(r)}o.lastHtml=n}},o}t.default=f},
/*!**********************************************!*\
  !*** ../annotorious/dist/annotorious.min.js ***!
  \**********************************************/
/*! no static exports found */
/*! exports used: RubberbandRectSelector, drawRect, parseRectFragment */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,i,t){(function(e){var t,n,r,o;function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window,o=function(){return r={},o.m=n=[function(e,t,n){"use strict";n.r(t),n.d(t,"version",function(){return L}),n.d(t,"Children",function(){return g}),n.d(t,"render",function(){return k}),n.d(t,"hydrate",function(){return z}),n.d(t,"unmountComponentAtNode",function(){return H}),n.d(t,"createPortal",function(){return C}),n.d(t,"createFactory",function(){return M}),n.d(t,"cloneElement",function(){return B}),n.d(t,"isValidElement",function(){return F}),n.d(t,"findDOMNode",function(){return U}),n.d(t,"PureComponent",function(){return u}),n.d(t,"memo",function(){return h}),n.d(t,"forwardRef",function(){return f}),n.d(t,"unstable_batchedUpdates",function(){return V}),n.d(t,"Suspense",function(){return b}),n.d(t,"SuspenseList",function(){return _}),n.d(t,"lazy",function(){return x});var r=n(2);n.d(t,"useState",function(){return r.k}),n.d(t,"useReducer",function(){return r.i}),n.d(t,"useEffect",function(){return r.d}),n.d(t,"useLayoutEffect",function(){return r.g}),n.d(t,"useRef",function(){return r.j}),n.d(t,"useImperativeHandle",function(){return r.f}),n.d(t,"useMemo",function(){return r.h}),n.d(t,"useCallback",function(){return r.a}),n.d(t,"useContext",function(){return r.b}),n.d(t,"useDebugValue",function(){return r.c}),n.d(t,"useErrorBoundary",function(){return r.e});var a=n(1);function o(e,t){for(var n in t)e[n]=t[n];return e}function i(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}n.d(t,"createElement",function(){return a.f}),n.d(t,"createContext",function(){return a.e}),n.d(t,"createRef",function(){return a.g}),n.d(t,"Fragment",function(){return a.b}),n.d(t,"Component",function(){return a.a});var s,l,c,u=(c=s=a.a,(l=p).prototype=Object.create(c.prototype),(l.prototype.constructor=l).__proto__=c,p.prototype.shouldComponentUpdate=function(e,t){return i(this.props,e)||i(this.state,t)},p);function p(e){var t;return(t=s.call(this,e)||this).isPureReactComponent=!0,t}function h(t,r){function n(e){var t=this.props.ref,n=t==e.ref;return!n&&t&&(t.call?t(null):t.current=null),r?!r(this.props,e)||!n:i(this.props,e)}function e(e){return this.shouldComponentUpdate=n,Object(a.f)(t,o({},e))}return e.prototype.isReactComponent=!0,e.displayName="Memo("+(t.displayName||t.name)+")",e.t=!0,e}var d=a.i.__b;function f(n){function e(e){var t=o({},e);return delete t.ref,n(t,e.ref)}return e.prototype.isReactComponent=e.t=!0,e.displayName="ForwardRef("+(n.displayName||n.name)+")",e}function m(e,r){return e?Object(a.k)(e).reduce(function(e,t,n){return e.concat(r(t,n))},[]):null}a.i.__b=function(e){e.type&&e.type.t&&e.ref&&(e.props.ref=e.ref,e.ref=null),d&&d(e)};var g={map:m,forEach:m,count:function(e){return e?Object(a.k)(e).length:0},only:function(e){if(1!==(e=Object(a.k)(e)).length)throw new Error("Children.only() expects only one child.");return e[0]},toArray:a.k},y=a.i.__e;function v(e){return e&&((e=o({},e)).__c=null,e.__k=e.__k&&e.__k.map(v)),e}function b(){this.__u=0,this.o=null,this.__b=null}function w(e){var t=e.__.__c;return t&&t.u&&t.u(e)}function x(t){var n,r,o;function e(e){if(n||(n=t()).then(function(e){r=e.default||e},function(e){o=e}),o)throw o;if(!r)throw n;return Object(a.f)(r,e)}return e.displayName="Lazy",e.t=!0,e}function _(){this.i=null,this.l=null}function S(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(n=e.i;n;){for(;3<n.length;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}}a.i.__e=function(e,t,n){if(e.then)for(var r,o=t;o=o.__;)if((r=o.__c)&&r.__c)return r.__c(e,t.__c);y(e,t,n)},(b.prototype=new a.a).__c=function(e,t){var n=this;function r(){i||(i=!0,o?o(a):a())}null==n.o&&(n.o=[]),n.o.push(t);var o=w(n.__v),i=!1;t.__c=t.componentWillUnmount,t.componentWillUnmount=function(){r(),t.__c&&t.__c()};var a=function(){var e;if(!--n.__u)for(n.__v.__k[0]=n.state.u,n.setState({u:n.__b=null});e=n.o.pop();)e.forceUpdate()};n.__u++||n.setState({u:n.__b=n.__v.__k[0]}),e.then(r,r)},b.prototype.render=function(e,t){return this.__b&&(this.__v.__k[0]=v(this.__b),this.__b=null),[Object(a.f)(a.a,null,t.u?null:e.children),t.u&&e.fallback]},(_.prototype=new a.a).u=function(n){var r=this,o=w(r.__v),i=r.l.get(n);return i[0]++,function(e){function t(){r.props.revealOrder?(i.push(e),S(r,n,i)):e()}o?o(t):t()}},_.prototype.render=function(e){this.i=null,this.l=new Map;var t=Object(a.k)(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},_.prototype.componentDidUpdate=_.prototype.componentDidMount=function(){var n=this;n.l.forEach(function(e,t){S(n,t,e)})};var E,T=((E=P.prototype).getChildContext=function(){return this.props.context},E.render=function(e){return e.children},P);function P(){}function O(e){var t=this,n=e.container,r=Object(a.f)(T,{context:t.context},e.vnode);return t.s&&t.s!==n&&(t.v.parentNode&&t.s.removeChild(t.v),Object(a.c)(t.h),t.p=!1),e.vnode?t.p?(n.__k=t.__k,Object(a.j)(r,n),t.__k=n.__k):(t.v=document.createTextNode(""),Object(a.h)("",n),n.appendChild(t.v),t.p=!0,t.s=n,Object(a.j)(r,n,t.v),t.__k=t.v.__k):t.p&&(t.v.parentNode&&t.s.removeChild(t.v),Object(a.c)(t.h)),t.h=r,t.componentWillUnmount=function(){t.v.parentNode&&t.s.removeChild(t.v),Object(a.c)(t.h)},null}function C(e,t){return Object(a.f)(O,{vnode:e,container:t})}var A=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;a.a.prototype.isReactComponent={};var R="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;function k(e,t,n){if(null==t.__k)for(;t.firstChild;)t.removeChild(t.firstChild);return Object(a.j)(e,t),"function"==typeof n&&n(),e?e.__c:null}function z(e,t,n){return Object(a.h)(e,t),"function"==typeof n&&n(),e?e.__c:null}var D=a.i.event;function j(e,t){e["UNSAFE_"+t]&&!e[t]&&Object.defineProperty(e,t,{configurable:!1,get:function(){return this["UNSAFE_"+t]},set:function(e){this["UNSAFE_"+t]=e}})}a.i.event=function(e){D&&(e=D(e));var t=!(e.persist=function(){}),n=!1,r=e.stopPropagation;e.stopPropagation=function(){r.call(e),t=!0};var o=e.preventDefault;return e.preventDefault=function(){o.call(e),n=!0},e.isPropagationStopped=function(){return t},e.isDefaultPrevented=function(){return n},e.nativeEvent=e};var I={configurable:!0,get:function(){return this.class}},N=a.i.vnode;a.i.vnode=function(i){i.$$typeof=R;var e=i.type,t=i.props;if(e){if(t.class!=t.className&&(I.enumerable="className"in t,null!=t.className&&(t.class=t.className),Object.defineProperty(t,"className",I)),"function"!=typeof e){var n,r,o;for(o in t.defaultValue&&void 0!==t.value&&(t.value||0===t.value||(t.value=t.defaultValue),delete t.defaultValue),Array.isArray(t.value)&&t.multiple&&"select"===e&&(Object(a.k)(t.children).forEach(function(e){-1!=t.value.indexOf(e.props.value)&&(e.props.selected=!0)}),delete t.value),t)if(n=A.test(o))break;if(n)for(o in r=i.props={},t)r[A.test(o)?o.replace(/[A-Z0-9]/,"-$&").toLowerCase():o]=t[o]}!function(){var e=i.type,t=i.props;if(t&&"string"==typeof e){var n={};for(var r in t)/^on(Ani|Tra|Tou)/.test(r)&&(t[r.toLowerCase()]=t[r],delete t[r]),n[r.toLowerCase()]=r;if(n.ondoubleclick&&(t.ondblclick=t[n.ondoubleclick],delete t[n.ondoubleclick]),n.onbeforeinput&&(t.onbeforeinput=t[n.onbeforeinput],delete t[n.onbeforeinput]),n.onchange&&("textarea"===e||"input"===e.toLowerCase()&&!/^fil|che|ra/i.test(t.type))){var o=n.oninput||"oninput";t[o]||(t[o]=t[n.onchange],delete t[n.onchange])}}}(),"function"==typeof e&&!e.m&&e.prototype&&(j(e.prototype,"componentWillMount"),j(e.prototype,"componentWillReceiveProps"),j(e.prototype,"componentWillUpdate"),e.m=!0)}N&&N(i)};var L="16.8.0";function M(e){return a.f.bind(null,e)}function F(e){return!!e&&e.$$typeof===R}function B(e){return F(e)?a.d.apply(null,arguments):e}function H(e){return!!e.__k&&(Object(a.j)(null,e),!0)}function U(e){return e&&(e.base||1===e.nodeType&&e)||null}var V=function(e,t){return e(t)};t.default={useState:r.k,useReducer:r.i,useEffect:r.d,useLayoutEffect:r.g,useRef:r.j,useImperativeHandle:r.f,useMemo:r.h,useCallback:r.a,useContext:r.b,useDebugValue:r.c,version:"16.8.0",Children:g,render:k,hydrate:k,unmountComponentAtNode:H,createPortal:C,createElement:a.f,createContext:a.e,createFactory:M,cloneElement:B,createRef:a.g,Fragment:a.b,isValidElement:F,findDOMNode:U,Component:a.a,PureComponent:u,memo:h,forwardRef:f,unstable_batchedUpdates:V,Suspense:b,SuspenseList:_,lazy:x}},function(e,t,n){"use strict";n.d(t,"j",function(){return j}),n.d(t,"h",function(){return I}),n.d(t,"f",function(){return u}),n.d(t,"b",function(){return E}),n.d(t,"g",function(){return h}),n.d(t,"a",function(){return T}),n.d(t,"d",function(){return N}),n.d(t,"e",function(){return L}),n.d(t,"k",function(){return C}),n.d(t,"c",function(){return z}),n.d(t,"i",function(){return w});var w,r,o,i,a,s,l,x={},_=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function S(e,t){for(var n in t)e[n]=t[n];return e}function b(e){var t=e.parentNode;t&&t.removeChild(e)}function u(e,t,n){var r,o=arguments,i={};for(r in t)"key"!==r&&"ref"!==r&&(i[r]=t[r]);if(3<arguments.length)for(n=[n],r=3;r<arguments.length;r++)n.push(o[r]);if(null!=n&&(i.children=n),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===i[r]&&(i[r]=e.defaultProps[r]);return p(e,i,t&&t.key,t&&t.ref,null)}function p(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o};return null==o&&(i.__v=i),w.vnode&&w.vnode(i),i}function h(){return{}}function E(e){return e.children}function T(e,t){this.props=e,this.context=t}function P(e,t){if(null==t)return e.__?P(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?P(e):null}function d(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return d(e)}}function f(e){(!e.__d&&(e.__d=!0)&&r.push(e)&&!o++||a!==w.debounceRendering)&&((a=w.debounceRendering)||i)(m)}function m(){for(var e;o=r.length;)e=r.sort(function(e,t){return e.__v.__b-t.__v.__b}),r=[],e.some(function(e){var t,n,r,o,i,a,s;e.__d&&(a=(i=(t=e).__v).__e,(s=t.__P)&&(n=[],o=R(s,i,(r=S({},i)).__v=r,t.__n,void 0!==s.ownerSVGElement,null,n,null==a?P(i):a),v(n,i),o!=a&&d(i)))})}function O(n,r,e,o,i,a,s,l,c){var u,p,h,d,f,m,g,y=e&&e.__k||_,v=y.length;if(l==x&&(l=null!=a?a[0]:v?P(e,0):null),u=0,r.__k=C(r.__k,function(e){if(null!=e){if(e.__=r,e.__b=r.__b+1,null===(h=y[u])||h&&e.key==h.key&&e.type===h.type)y[u]=void 0;else for(p=0;p<v;p++){if((h=y[p])&&e.key==h.key&&e.type===h.type){y[p]=void 0;break}h=null}if(d=R(n,e,h=h||x,o,i,a,s,l,c),(p=e.ref)&&h.ref!=p&&(g=g||[],h.ref&&g.push(h.ref,null,e),g.push(p,e.__c||d,e)),null!=d){var t;if(null==m&&(m=d),void 0!==e.__d)t=e.__d,e.__d=void 0;else if(a==h||d!=l||null==d.parentNode){e:if(null==l||l.parentNode!==n)n.appendChild(d),t=null;else{for(f=l,p=0;(f=f.nextSibling)&&p<v;p+=2)if(f==d)break e;n.insertBefore(d,l),t=l}"option"==r.type&&(n.value="")}l=void 0!==t?t:d.nextSibling,"function"==typeof r.type&&(r.__d=l)}else l&&h.__e==l&&l.parentNode!=n&&(l=P(h))}return u++,e}),r.__e=m,null!=a&&"function"!=typeof r.type)for(u=a.length;u--;)null!=a[u]&&b(a[u]);for(u=v;u--;)null!=y[u]&&z(y[u],y[u]);if(g)for(u=0;u<g.length;u++)k(g[u],g[++u],g[++u])}function C(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var r=0;r<e.length;r++)C(e[r],t,n);else n.push(t?t("string"==typeof e||"number"==typeof e?p(null,e,null,null,e):null!=e.__e||null!=e.__c?p(e.type,e.props,e.key,null,e.__v):e):e);return n}function g(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===c.test(t)?n+"px":null==n?"":n}function A(e,t,n,r,o){var i,a,s,l,c;if(o?"className"===t&&(t="class"):"class"===t&&(t="className"),"style"===t)if(i=e.style,"string"==typeof n)i.cssText=n;else{if("string"==typeof r&&(i.cssText="",r=null),r)for(l in r)n&&l in n||g(i,l,"");if(n)for(c in n)r&&n[c]===r[c]||g(i,c,n[c])}else"o"===t[0]&&"n"===t[1]?(a=t!==(t=t.replace(/Capture$/,"")),t=((s=t.toLowerCase())in e?s:t).slice(2),n?(r||e.addEventListener(t,y,a),(e.l||(e.l={}))[t]=n):e.removeEventListener(t,y,a)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&!o&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,n))}function y(e){this.l[e.type](w.event?w.event(e):e)}function R(e,t,n,r,o,i,a,s,l){var c,u,p,h,d,f,m,g,y,v,b=t.type;if(void 0!==t.constructor)return null;(c=w.__b)&&c(t);try{e:if("function"==typeof b){if(g=t.props,y=(c=b.contextType)&&r[c.__c],v=c?y?y.props.value:c.__:r,n.__c?m=(u=t.__c=n.__c).__=u.__E:("prototype"in b&&b.prototype.render?t.__c=u=new b(g,v):(t.__c=u=new T(g,v),u.constructor=b,u.render=D),y&&y.sub(u),u.props=g,u.state||(u.state={}),u.context=v,u.__n=r,p=u.__d=!0,u.__h=[]),null==u.__s&&(u.__s=u.state),null!=b.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=S({},u.__s)),S(u.__s,b.getDerivedStateFromProps(g,u.__s))),h=u.props,d=u.state,p)null==b.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==b.getDerivedStateFromProps&&g!==h&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(g,v),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(g,u.__s,v)||t.__v===n.__v&&!u.__){for(u.props=g,u.state=u.__s,t.__v!==n.__v&&(u.__d=!1),(u.__v=t).__e=n.__e,t.__k=n.__k,u.__h.length&&a.push(u),c=0;c<t.__k.length;c++)t.__k[c]&&(t.__k[c].__=t);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(g,u.__s,v),null!=u.componentDidUpdate&&u.__h.push(function(){u.componentDidUpdate(h,d,f)})}u.context=v,u.props=g,u.state=u.__s,(c=w.__r)&&c(t),u.__d=!1,u.__v=t,u.__P=e,c=u.render(u.props,u.state,u.context),t.__k=null!=c&&c.type==E&&null==c.key?c.props.children:Array.isArray(c)?c:[c],null!=u.getChildContext&&(r=S(S({},r),u.getChildContext())),p||null==u.getSnapshotBeforeUpdate||(f=u.getSnapshotBeforeUpdate(h,d)),O(e,t,n,r,o,i,a,s,l),u.base=t.__e,u.__h.length&&a.push(u),m&&(u.__E=u.__=null),u.__e=!1}else null==i&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,r,o,i,a,s){var l,c,u,p,h,d=n.props,f=t.props;if(o="svg"===t.type||o,null!=i)for(l=0;l<i.length;l++)if(null!=(c=i[l])&&((null===t.type?3===c.nodeType:c.localName===t.type)||e==c)){e=c,i[l]=null;break}if(null==e){if(null===t.type)return document.createTextNode(f);e=o?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,f.is&&{is:f.is}),i=null,s=!1}if(null===t.type)d!==f&&e.data!=f&&(e.data=f);else{if(null!=i&&(i=_.slice.call(e.childNodes)),u=(d=n.props||x).dangerouslySetInnerHTML,p=f.dangerouslySetInnerHTML,!s){if(d===x)for(d={},h=0;h<e.attributes.length;h++)d[e.attributes[h].name]=e.attributes[h].value;(p||u)&&(p&&u&&p.__html==u.__html||(e.innerHTML=p&&p.__html||""))}(function(e,t,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in t||A(e,i,null,n[i],r);for(i in t)o&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||A(e,i,t[i],n[i],r)})(e,f,d,o,s),p?t.__k=[]:(t.__k=t.props.children,O(e,t,n,r,"foreignObject"!==t.type&&o,i,a,x,s)),s||("value"in f&&void 0!==(l=f.value)&&l!==e.value&&A(e,"value",l,d.value,!1),"checked"in f&&void 0!==(l=f.checked)&&l!==e.checked&&A(e,"checked",l,d.checked,!1))}return e}(n.__e,t,n,r,o,i,a,l);(c=w.diffed)&&c(t)}catch(e){t.__v=null,w.__e(e,t,n)}return t.__e}function v(e,t){w.__c&&w.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){w.__e(e,t.__v)}})}function k(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){w.__e(e,n)}}function z(e,t,n){var r,o,i;if(w.unmount&&w.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||k(r,null,t)),n||"function"==typeof e.type||(n=null!=(o=e.__e)),e.__e=e.__d=void 0,null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){w.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&z(r[i],t,n);null!=o&&b(o)}function D(e,t,n){return this.constructor(e,n)}function j(e,t,n){var r,o,i;w.__&&w.__(e,t),o=(r=n===s)?null:n&&n.__k||t.__k,e=u(E,null,[e]),i=[],R(t,(!r&&n||t).__k=e,o||x,x,void 0!==t.ownerSVGElement,n&&!r?[n]:o?null:_.slice.call(t.childNodes),i,n||x,r),v(i,e)}function I(e,t){j(e,t,s)}function N(e,t){var n,r;for(r in t=S(S({},e.props),t),2<arguments.length&&(t.children=_.slice.call(arguments,2)),n={},t)"key"!==r&&"ref"!==r&&(n[r]=t[r]);return p(e.type,n,t.key||e.key,t.ref||e.ref,null)}function L(e){var t={},o={__c:"__cC"+l++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r=this;return this.getChildContext||(n=[],this.getChildContext=function(){return t[o.__c]=r,t},this.shouldComponentUpdate=function(t){r.props.value!==t.value&&n.some(function(e){e.context=t.value,f(e)})},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return(o.Consumer.contextType=o).Provider.__=o}w={__e:function(e,t){for(var n,r;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(r=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(r=!0,n.componentDidCatch(e)),r)return f(n.__E=n)}catch(t){e=t}throw e}},T.prototype.setState=function(e,t){var n;n=this.__s!==this.state?this.__s:this.__s=S({},this.state),"function"==typeof e&&(e=e(n,this.props)),e&&S(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),f(this))},T.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),f(this))},T.prototype.render=E,r=[],o=0,i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,s=x,l=0},function(e,t,n){"use strict";n.d(t,"k",function(){return f}),n.d(t,"i",function(){return m}),n.d(t,"d",function(){return g}),n.d(t,"g",function(){return y}),n.d(t,"j",function(){return v}),n.d(t,"f",function(){return b}),n.d(t,"h",function(){return w}),n.d(t,"a",function(){return x}),n.d(t,"b",function(){return _}),n.d(t,"c",function(){return S}),n.d(t,"e",function(){return E});var o,i,r,a=n(1),s=0,l=[],c=a.i.__r,u=a.i.diffed,p=a.i.__c,h=a.i.unmount;function d(e,t){a.i.__h&&a.i.__h(i,e,s||t),s=0;var n=i.__H||(i.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function f(e){return s=1,m(A,e)}function m(n,e,t){var r=d(o++,2);return r.__c||(r.__c=i,r.__=[t?t(e):A(void 0,e),function(e){var t=n(r.__[0],e);r.__[0]!==t&&(r.__[0]=t,r.__c.setState({}))}]),r.__}function g(e,t){var n=d(o++,3);!a.i.__s&&C(n.__H,t)&&(n.__=e,n.__H=t,i.__H.__h.push(n))}function y(e,t){var n=d(o++,4);!a.i.__s&&C(n.__H,t)&&(n.__=e,n.__H=t,i.__h.push(n))}function v(e){return s=5,w(function(){return{current:e}},[])}function b(e,t,n){s=6,y(function(){"function"==typeof e?e(t()):e&&(e.current=t())},null==n?n:n.concat(e))}function w(e,t){var n=d(o++,7);return C(n.__H,t)?(n.__H=t,n.__h=e,n.__=e()):n.__}function x(e,t){return s=8,w(function(){return e},t)}function _(e){var t=i.context[e.__c],n=d(o++,9);return n.__c=e,t?(null==n.__&&(n.__=!0,t.sub(i)),t.props.value):e.__}function S(e,t){a.i.useDebugValue&&a.i.useDebugValue(t?t(e):e)}function E(e){var t=d(o++,10),n=f();return t.__=e,i.componentDidCatch||(i.componentDidCatch=function(e){t.__&&t.__(e),n[1](e)}),[n[0],function(){n[1](void 0)}]}function T(){l.some(function(t){if(t.__P)try{t.__H.__h.forEach(P),t.__H.__h.forEach(O),t.__H.__h=[]}catch(e){return t.__H.__h=[],a.i.__e(e,t.__v),!0}}),l=[]}function P(e){e.t&&e.t()}function O(e){var t=e.__();"function"==typeof t&&(e.t=t)}function C(n,e){return!n||e.some(function(e,t){return e!==n[t]})}function A(e,t){return"function"==typeof t?t(e):t}a.i.__r=function(e){c&&c(e),o=0,(i=e.__c).__H&&(i.__H.__h.forEach(P),i.__H.__h.forEach(O),i.__H.__h=[])},a.i.diffed=function(e){u&&u(e);var t=e.__c;if(t){var n=t.__H;n&&n.__h.length&&(1!==l.push(t)&&r===a.i.requestAnimationFrame||((r=a.i.requestAnimationFrame)||function(e){function t(){clearTimeout(r),cancelAnimationFrame(n),setTimeout(e)}var n,r=setTimeout(t,100);"undefined"!=typeof window&&(n=requestAnimationFrame(t))})(T))}},a.i.__c=function(e,n){n.some(function(t){try{t.__h.forEach(P),t.__h=t.__h.filter(function(e){return!e.__||O(e)})}catch(e){n.some(function(e){e.__h&&(e.__h=[])}),n=[],a.i.__e(e,t.__v)}}),p&&p(e,n)},a.i.unmount=function(e){h&&h(e);var t=e.__c;if(t){var n=t.__H;if(n)try{n.__.forEach(function(e){return e.t&&e.t()})}catch(e){a.i.__e(e,t.__v)}}}},function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function o(){r.off(e,o),t.apply(n,arguments)}return o._=t,this.on(e,o,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,a=r.length;i<a;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}},e.exports=n,e.exports.TinyEmitter=n},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}var o=n(12),r=Object.prototype.toString;function a(e){return"[object Array]"===r.call(e)}function s(e){return void 0===e}function l(e){return null!==e&&"object"===i(e)}function c(e){return"[object Function]"===r.call(e)}function u(e,t){if(null!=e)if("object"!==i(e)&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:l,isUndefined:s,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return l(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function n(){var r={};function e(e,t){"object"===i(r[t])&&"object"===i(e)?r[t]=n(r[t],e):r[t]=e}for(var t=0,o=arguments.length;t<o;t++)u(arguments[t],e);return r},deepMerge:function n(){var r={};function e(e,t){"object"===i(r[t])&&"object"===i(e)?r[t]=n(r[t],e):"object"===i(e)?r[t]=n({},e):r[t]=e}for(var t=0,o=arguments.length;t<o;t++)u(arguments[t],e);return r},extend:function(n,e,r){return u(e,function(e,t){n[t]=r&&"function"==typeof e?o(e,r):e}),n},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}var o,s=TypeError,l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}function i(){throw new s}var a=l?function(){try{return i}catch(e){try{return l(arguments,"callee").get}catch(e){return i}}}():i,c=n(51)(),u=Object.getPrototypeOf||function(e){return e.__proto__},p=o,h="undefined"==typeof Uint8Array?o:u(Uint8Array),d={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?o:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?o:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":c?u([][Symbol.iterator]()):o,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":o,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":o,"%AsyncGenerator%":o,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":o,"%AsyncIteratorPrototype%":p&&c&&Symbol.asyncIterator?p[Symbol.asyncIterator]():o,"%Atomics%":"undefined"==typeof Atomics?o:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?o:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?o:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?o:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?o:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?o:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?o:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":o,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":o,"%Int8Array%":"undefined"==typeof Int8Array?o:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?o:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?o:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?o:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?o:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?o:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":c?u(u([][Symbol.iterator]())):o,"%JSON%":"object"===("undefined"==typeof JSON?"undefined":r(JSON))?JSON:o,"%JSONParse%":"object"===("undefined"==typeof JSON?"undefined":r(JSON))?JSON.parse:o,"%Map%":"undefined"==typeof Map?o:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&c?u((new Map)[Symbol.iterator]()):o,"%MapPrototype%":"undefined"==typeof Map?o:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?o:Promise,"%PromisePrototype%":"undefined"==typeof Promise?o:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?o:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?o:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?o:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?o:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?o:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?o:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?o:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&c?u((new Set)[Symbol.iterator]()):o,"%SetPrototype%":"undefined"==typeof Set?o:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?o:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?o:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":c?u(""[Symbol.iterator]()):o,"%StringPrototype%":String.prototype,"%Symbol%":c?Symbol:o,"%SymbolPrototype%":c?Symbol.prototype:o,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":a,"%TypedArray%":h,"%TypedArrayPrototype%":h?h.prototype:o,"%TypeError%":s,"%TypeErrorPrototype%":s.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?o:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?o:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?o:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?o:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?o:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?o:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?o:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?o:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?o:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?o:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?o:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?o:WeakSet.prototype},f=n(8).call(Function.call,String.prototype.replace),m=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,g=/\\(\\)?/g;e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean');for(var o,n=(o=[],f(e,m,function(e,t,n,r){o[o.length]=n?f(r,g,"$1"):t||e}),o),r=function(e,t){if(!(e in d))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===d[e]&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return d[e]}("%"+(0<n.length?n[0]:"")+"%",t),i=1;i<n.length;i+=1)if(null!=r)if(l&&i+1>=n.length){var a=l(r,n[i]);if(!(t||n[i]in r))throw new s("base intrinsic for "+e+" exists, but the property is not available.");r=a?a.get||a.value:r[n[i]]}else r=r[n[i]];return r}},function(e,t,n){var f,m,g=n(69),y=n(70),v=0,b=0;e.exports=function(e,t,n){var r=t&&n||0,o=t||[],i=(e=e||{}).node||f,a=void 0!==e.clockseq?e.clockseq:m;if(null==i||null==a){var s=g();null==i&&(i=f=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=m=16383&(s[6]<<8|s[7]))}var l=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:b+1,u=l-v+(c-b)/1e4;if(u<0&&void 0===e.clockseq&&(a=a+1&16383),(u<0||v<l)&&void 0===e.nsecs&&(c=0),1e4<=c)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=l,m=a;var p=(1e4*(268435455&(l+=122192928e5))+(b=c))%4294967296;o[r++]=p>>>24&255,o[r++]=p>>>16&255,o[r++]=p>>>8&255,o[r++]=255&p;var h=l/4294967296*1e4&268435455;o[r++]=h>>>8&255,o[r++]=255&h,o[r++]=h>>>24&15|16,o[r++]=h>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(var d=0;d<6;++d)o[r+d]=i[d];return t||y(o)}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(0)),u=l(n(73)),p=i(n(11));function h(e){return e&&e.replace(/&nbsp;|\u202F|\u00A0/g," ")}var d,f=(o(m,d=c.Component),m.prototype.render=function(){var t=this,e=this.props,n=e.tagName,r=e.html,o=e.innerRef,i=s(e,["tagName","html","innerRef"]);return c.createElement(n||"div",a(a({},i),{ref:"function"==typeof o?function(e){o(e),t.el.current=e}:o||this.el,onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,onKeyUp:this.props.onKeyUp||this.emitChange,onKeyDown:this.props.onKeyDown||this.emitChange,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html:r}}),this.props.children)},m.prototype.shouldComponentUpdate=function(e){var t=this.props,n=this.getEl();return!n||h(e.html)!==h(n.innerHTML)||t.disabled!==e.disabled||t.tagName!==e.tagName||t.className!==e.className||t.innerRef!==e.innerRef||!u.default(t.style,e.style)},m.prototype.componentDidUpdate=function(){var e=this.getEl();e&&(this.props.html!==e.innerHTML&&(e.innerHTML=this.lastHtml=this.props.html),function(e){var t=document.createTextNode("");e.appendChild(t);var n=document.activeElement===e;if(null!==t&&null!==t.nodeValue&&n){var r=window.getSelection();if(null!==r){var o=document.createRange();o.setStart(t,t.nodeValue.length),o.collapse(!0),r.removeAllRanges(),r.addRange(o)}e instanceof HTMLElement&&e.focus()}}(e))},m.propTypes={html:p.string.isRequired,onChange:p.func,disabled:p.bool,tagName:p.string,className:p.string,style:p.object,innerRef:p.oneOfType([p.object,p.func])},m);function m(){var o=null!==d&&d.apply(this,arguments)||this;return o.lastHtml=o.props.html,o.el="function"==typeof o.props.innerRef?{current:null}:c.createRef(),o.getEl=function(){return(o.props.innerRef&&"function"!=typeof o.props.innerRef?o.props.innerRef:o.el).current},o.emitChange=function(e){var t=o.getEl();if(t){var n=t.innerHTML;if(o.props.onChange&&n!==o.lastHtml){var r=Object.assign({},e,{target:{value:n}});o.props.onChange(r)}o.lastHtml=n}},o}t.default=f},function(e,t,n){"use strict";var r=n(49);e.exports=Function.prototype.bind||r},function(e,t,i){"use strict";var n,r,a=(r={},function(e){if(void 0===r[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}r[e]=t}return r[e]}),p=[];function h(e){for(var t=-1,n=0;n<p.length;n++)if(p[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},r=[],o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],s=n[a]||0,l="".concat(a," ").concat(s);n[a]=s+1;var c=h(l),u={css:i[1],media:i[2],sourceMap:i[3]};-1!==c?(p[c].references++,p[c].updater(u)):p.push({identifier:l,updater:m(u,t),references:1}),r.push(l)}return r}function s(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=i.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])}),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var o,c=(o=[],function(e,t){return o[e]=t,o.filter(Boolean).join("\n")});function u(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=c(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}var d=null,f=0;function m(t,e){var n,r,o;if(e.singleton){var i=f++;n=d=d||s(e),r=u.bind(null,n,i,!1),o=u.bind(null,n,i,!0)}else n=s(e),r=function(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,n,e),o=function(){null!==n.parentNode&&n.parentNode.removeChild(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}e.exports=function(e,a){(a=a||{}).singleton||"boolean"==typeof a.singleton||(a.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var s=l(e=e||[],a);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var t=0;t<s.length;t++){var n=h(s[t]);p[n].references--}for(var r=l(e,a),o=0;o<s.length;o++){var i=h(s[o]);0===p[i].references&&(p[i].updater(),p.splice(i,1))}s=r}}}},function(e,t,n){"use strict";e.exports=function(t){var l=[];return l.toString=function(){return this.map(function(l){var e=function(e){var t,n,r,o=l[1]||"",i=l[3];if(!i)return o;if(e&&"function"==typeof btoa){var a=(t=i,n=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(r," */")),s=i.sources.map(function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")});return[o].concat(s).concat([a]).join("\n")}return[o].join("\n")}(t);return l[2]?"@media ".concat(l[2]," {").concat(e,"}"):e}).join("")},l.i=function(e,t,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(var a=0;a<e.length;a++){var s=[].concat(e[a]);n&&r[s[0]]||(t&&(s[2]?s[2]="".concat(t," and ").concat(s[2]):s[2]=t),l.push(s))}},l}},function(e,t,n){e.exports=n(74)()},function(e,t,n){"use strict";e.exports=function(n,r){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return n.apply(r,e)}}},function(e,t,n){"use strict";var a=n(4);function s(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(a.isURLSearchParams(t))r=t.toString();else{var o=[];a.forEach(t,function(e,t){null!=e&&(a.isArray(e)?t+="[]":e=[e],a.forEach(e,function(e){a.isDate(e)?e=e.toISOString():a.isObject(e)&&(e=JSON.stringify(e)),o.push(s(t)+"="+s(e))}))}),r=o.join("&")}if(r){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(s,e,l){"use strict";(function(e){var n=l(4),r=l(34),t={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i,a={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(i=l(16)),i),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function(e){a.headers[e]={}}),n.forEach(["post","put","patch"],function(e){a.headers[e]=n.merge(t)}),s.exports=a}).call(this,l(33))},function(e,t,p){"use strict";var h=p(4),d=p(35),f=p(13),m=p(37),g=p(40),y=p(41),v=p(17);e.exports=function(u){return new Promise(function(n,r){var o=u.data,i=u.headers;h.isFormData(o)&&delete i["Content-Type"];var a=new XMLHttpRequest;if(u.auth){var e=u.auth.username||"",t=u.auth.password||"";i.Authorization="Basic "+btoa(e+":"+t)}var s=m(u.baseURL,u.url);if(a.open(u.method.toUpperCase(),f(s,u.params,u.paramsSerializer),!0),a.timeout=u.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in a?g(a.getAllResponseHeaders()):null,t={data:u.responseType&&"text"!==u.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:e,config:u,request:a};d(n,r,t),a=null}},a.onabort=function(){a&&(r(v("Request aborted",u,"ECONNABORTED",a)),a=null)},a.onerror=function(){r(v("Network Error",u,null,a)),a=null},a.ontimeout=function(){var e="timeout of "+u.timeout+"ms exceeded";u.timeoutErrorMessage&&(e=u.timeoutErrorMessage),r(v(e,u,"ECONNABORTED",a)),a=null},h.isStandardBrowserEnv()){var l=p(42),c=(u.withCredentials||y(s))&&u.xsrfCookieName?l.read(u.xsrfCookieName):void 0;c&&(i[u.xsrfHeaderName]=c)}if("setRequestHeader"in a&&h.forEach(i,function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete i[t]:a.setRequestHeader(t,e)}),h.isUndefined(u.withCredentials)||(a.withCredentials=!!u.withCredentials),u.responseType)try{a.responseType=u.responseType}catch(e){if("json"!==u.responseType)throw e}"function"==typeof u.onDownloadProgress&&a.addEventListener("progress",u.onDownloadProgress),"function"==typeof u.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",u.onUploadProgress),u.cancelToken&&u.cancelToken.promise.then(function(e){a&&(a.abort(),r(e),a=null)}),void 0===o&&(o=null),a.send(o)})}},function(e,t,n){"use strict";var a=n(36);e.exports=function(e,t,n,r,o){var i=new Error(e);return a(i,t,n,r,o)}},function(e,t,n){"use strict";var l=n(4);e.exports=function(t,n){n=n||{};var r={},e=["url","method","params","data"],o=["headers","auth","proxy"],i=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];l.forEach(e,function(e){void 0!==n[e]&&(r[e]=n[e])}),l.forEach(o,function(e){l.isObject(n[e])?r[e]=l.deepMerge(t[e],n[e]):void 0!==n[e]?r[e]=n[e]:l.isObject(t[e])?r[e]=l.deepMerge(t[e]):void 0!==t[e]&&(r[e]=t[e])}),l.forEach(i,function(e){void 0!==n[e]?r[e]=n[e]:void 0!==t[e]&&(r[e]=t[e])});var a=e.concat(o).concat(i),s=Object.keys(n).filter(function(e){return-1===a.indexOf(e)});return l.forEach(s,function(e){void 0!==n[e]?r[e]=n[e]:void 0!==t[e]&&(r[e]=t[e])}),r}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";var r=n(8),o=n(5)("%Function%"),i=o.apply,a=o.call;e.exports=function(){return r.apply(a,arguments)},e.exports.apply=function(){return r.apply(i,arguments)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}function o(e,t,n){var r,o,i,a,s=2<arguments.length?n:{},l=u(t);p&&(l=d.call(l,Object.getOwnPropertySymbols(t)));for(var c=0;c<l.length;c+=1)r=e,o=l[c],i=t[l[c]],a=s[l[c]],o in r&&("function"!=typeof a||"[object Function]"!==h.call(a)||!a())||(m?f(r,o,{configurable:!0,enumerable:!1,value:i,writable:!0}):r[o]=i)}var u=n(54),p="function"==typeof Symbol&&"symbol"===r(Symbol("foo")),h=Object.prototype.toString,d=Array.prototype.concat,f=Object.defineProperty,m=f&&function(){var e={};try{for(var t in f(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}();o.supportsDescriptors=!!m,e.exports=o},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}var o=Object.prototype.toString;e.exports=function(e){var t=o.call(e),n="[object Arguments]"===t;return n||"[object Array]"!==t&&null!==e&&"object"===r(e)&&"number"==typeof e.length&&0<=e.length&&"[object Function]"===o.call(e.callee)}},function(e,t,n){"use strict";var r=n(56),o=n(57),i=n(58)("String.prototype.replace"),a=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,s=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;e.exports=function(){var e=o(r(this));return i(i(e,a,""),s,"")}},function(e,t,n){"use strict";var r=n(23);e.exports=function(){return String.prototype.trim&&""==="".trim()?String.prototype.trim:r}},function(e,t,n){e.exports=n(28)},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}function r(e){a(!1,e)}function i(e){var t=e%100,n=t%10;return 11!=t&&1==n?0:2<=n&&n<=4&&!(12<=t&&t<=14)?1:2}var g=n(45),a=n(47),y=n(48),v=n(50),b=String.prototype.replace,w=String.prototype.split,x="||||",_={pluralTypes:{arabic:function(e){if(e<3)return e;var t=e%100;return 3<=t&&t<=10?3:11<=t?4:5},bosnian_serbian:i,chinese:function(){return 0},croatian:i,french:function(e){return 1<e?1:0},german:function(e){return 1!==e?1:0},russian:i,lithuanian:function(e){return e%10==1&&e%100!=11?0:2<=e%10&&e%10<=9&&(e%100<11||19<e%100)?1:2},czech:function(e){return 1===e?0:2<=e&&e<=4?1:2},polish:function(e){if(1===e)return 0;var t=e%10;return 2<=t&&t<=4&&(e%100<10||20<=e%100)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0},slovenian:function(e){var t=e%100;return 1==t?0:2==t?1:3==t||4==t?2:3}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]}};function s(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var S=/%\{(.*?)\}/g;function l(e,t,n,r,o){if("string"!=typeof e)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return e;var i,a,s,l,c,u,p=e,h=r||S,d=o||_,f="number"==typeof t?{smart_count:t}:t;if(null!=f.smart_count&&p){var m=w.call(p,x);p=v(m[i=n||"en",a=f.smart_count,d.pluralTypes[s=i,l=d.pluralTypeToLanguages,c={},g(l,function(e,t){g(e,function(e){c[e]=t})}),(u=c)[s]||u[w.call(s,/-/,1)[0]]||u.en](a)]||m[0])}return b.call(p,h,function(e,t){return y(f,t)&&null!=f[t]?f[t]:e})}function c(e){var t=e||{};this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en";var n=t.allowMissing?l:null;this.onMissingKey="function"==typeof t.onMissingKey?t.onMissingKey:n,this.warn=t.warn||r,this.tokenRegex=function(e){var t=e&&e.prefix||"%{",n=e&&e.suffix||"}";if(t===x||n===x)throw new RangeError('"'+x+'" token is reserved for pluralization');return new RegExp(s(t)+"(.*?)"+s(n),"g")}(t.interpolation),this.pluralRules=t.pluralRules||_}c.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},c.prototype.extend=function(e,r){g(e,function(e,t){var n=r?r+"."+t:t;"object"===o(e)?this.extend(e,n):this.phrases[n]=e},this)},c.prototype.unset=function(e,r){"string"==typeof e?delete this.phrases[e]:g(e,function(e,t){var n=r?r+"."+t:t;"object"===o(e)?this.unset(e,n):delete this.phrases[n]},this)},c.prototype.clear=function(){this.phrases={}},c.prototype.replace=function(e){this.clear(),this.extend(e)},c.prototype.t=function(e,t){var n,r,o=null==t?{}:t;return"string"==typeof this.phrases[e]?n=this.phrases[e]:"string"==typeof o._?n=o._:r=this.onMissingKey?(0,this.onMissingKey)(e,o,this.currentLocale,this.tokenRegex,this.pluralRules):(this.warn('Missing translation for key: "'+e+'"'),e),"string"==typeof n&&(r=l(n,o,this.currentLocale,this.tokenRegex,this.pluralRules)),r},c.prototype.has=function(e){return y(this.phrases,e)},c.transformPhrase=function(e,t,n){return l(e,t,n)},e.exports=c},,function(e,t,n){"use strict";var r=n(4),o=n(12),i=n(29),a=n(18);function s(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var l=s(n(15));l.Axios=i,l.create=function(e){return s(a(l.defaults,e))},l.Cancel=n(19),l.CancelToken=n(43),l.isCancel=n(14),l.all=function(e){return Promise.all(e)},l.spread=n(44),e.exports=l,e.exports.default=l},function(e,t,n){"use strict";var o=n(4),r=n(13),i=n(30),a=n(31),s=n(18);function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e,t){"string"==typeof e?(e=t||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=[a,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){n.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){n.push(e.fulfilled,e.rejected)});n.length;)r=r.then(n.shift(),n.shift());return r},l.prototype.getUri=function(e){return e=s(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],function(n){l.prototype[n]=function(e,t){return this.request(o.merge(t||{},{method:n,url:e}))}}),o.forEach(["post","put","patch"],function(r){l.prototype[r]=function(e,t,n){return this.request(o.merge(n||{},{method:r,url:e,data:t}))}}),e.exports=l},function(e,t,n){"use strict";var r=n(4);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},e.exports=o},function(e,t,n){"use strict";var r=n(4),o=n(32),i=n(14),a=n(15);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(t){return s(t),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return s(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return i(e)||(s(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(e,t,n){"use strict";var r=n(4);e.exports=function(t,n,e){return r.forEach(e,function(e){t=e(t,n)}),t}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,c=[],u=!1,p=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):p=-1,c.length&&d())}function d(){if(!u){var e=s(h);u=!0;for(var t=c.length;t;){for(l=c,c=[];++p<t;)l&&l[p].run();p=-1,t=c.length}l=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var o=n(4);e.exports=function(n,r){o.forEach(n,function(e,t){t!==r&&t.toUpperCase()===r.toUpperCase()&&(n[r]=e,delete n[t])})}},function(e,t,n){"use strict";var o=n(17);e.exports=function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(o("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(38),o=n(39);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var i=n(4),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,r,o={};return e&&i.forEach(e.split("\n"),function(e){if(r=e.indexOf(":"),t=i.trim(e.substr(0,r)).toLowerCase(),n=i.trim(e.substr(r+1)),t){if(o[t]&&0<=a.indexOf(t))return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}}),o}},function(e,t,n){"use strict";var r,o,i,a=n(4);function s(e){var t=e;return o&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}e.exports=a.isStandardBrowserEnv()?(o=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),r=s(window.location.href),function(e){var t=a.isString(e)?s(e):e;return t.protocol===r.protocol&&t.host===r.host}):function(){return!0}},function(e,t,n){"use strict";var s=n(4);e.exports=s.isStandardBrowserEnv()?{write:function(e,t,n,r,o,i){var a=[];a.push(e+"="+encodeURIComponent(t)),s.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),s.isString(r)&&a.push("path="+r),s.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(19);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},e.exports=o},function(e,t,n){"use strict";e.exports=function(t){return function(e){return t.apply(null,e)}}},function(e,t,n){"use strict";var o=n(46),i=Object.prototype.toString,a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!o(t))throw new TypeError("iterator must be a function");var r;3<=arguments.length&&(r=n),("[object Array]"===i.call(e)?function(e,t,n){for(var r=0,o=e.length;r<o;r++)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}:"string"==typeof e?function(e,t,n){for(var r=0,o=e.length;r<o;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)}:function(e,t,n){for(var r in e)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))})(e,t,r)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}function o(e){try{var t=i.call(e);return a.test(t)}catch(e){return}}var i=Function.prototype.toString,a=/^\s*class\b/,s=Object.prototype.toString,l="function"==typeof Symbol&&"symbol"===r(Symbol.toStringTag);e.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!==r(e))return!1;if("function"==typeof e&&!e.prototype)return!0;if(l)return function(e){try{return!o(e)&&(i.call(e),!0)}catch(e){return!1}}(e);if(o(e))return!1;var t=s.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var r=n(8);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,n){"use strict";var l=Array.prototype.slice,c=Object.prototype.toString;e.exports=function(t){var n=this;if("function"!=typeof n||"[object Function]"!==c.call(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var r,o=l.call(arguments,1),e=Math.max(0,n.length-o.length),i=[],a=0;a<e;a++)i.push("$"+a);if(r=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof r){var e=n.apply(this,o.concat(l.call(arguments)));return Object(e)===e?e:this}return n.apply(t,o.concat(l.call(arguments)))}),n.prototype){var s=function(){};s.prototype=n.prototype,r.prototype=new s,s.prototype=null}return r}},function(e,t,n){"use strict";var r=n(20),o=n(21),i=n(23),a=n(24),s=n(59),l=r(a());o(l,{getPolyfill:a,implementation:i,shim:s}),e.exports=l},function(o,e,i){"use strict";(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}var n=e.Symbol,r=i(53);o.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"===t(n("foo"))&&"symbol"===t(Symbol("bar"))&&r()}}).call(this,i(52))},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"===i(Symbol.iterator))return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},function(e,t,n){"use strict";var r=Array.prototype.slice,o=n(22),i=Object.keys,a=i?function(e){return i(e)}:n(55),s=Object.keys;a.shim=function(){return Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return o(e)?s(r.call(e)):s(e)}):Object.keys=a,Object.keys||a},e.exports=a},function(e,t,n){"use strict";function h(e){return(h="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}var r;if(!Object.keys){var d=Object.prototype.hasOwnProperty,f=Object.prototype.toString,m=n(22),o=Object.prototype.propertyIsEnumerable,g=!o.call({toString:null},"toString"),y=o.call(function(){},"prototype"),v=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],b=function(e){var t=e.constructor;return t&&t.prototype===e},i={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},w=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!i["$"+e]&&d.call(window,e)&&null!==window[e]&&"object"===h(window[e]))try{b(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(e){var t=null!==e&&"object"===h(e),n="[object Function]"===f.call(e),r=m(e),o=t&&"[object String]"===f.call(e),i=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var a=y&&n;if(o&&0<e.length&&!d.call(e,0))for(var s=0;s<e.length;++s)i.push(String(s));if(r&&0<e.length)for(var l=0;l<e.length;++l)i.push(String(l));else for(var c in e)a&&"prototype"===c||!d.call(e,c)||i.push(String(c));if(g)for(var u=function(e){if("undefined"==typeof window||!w)return b(e);try{return b(e)}catch(e){return!1}}(e),p=0;p<v.length;++p)u&&"constructor"===v[p]||!d.call(e,v[p])||i.push(v[p]);return i}}e.exports=r},function(e,t,n){"use strict";var r=n(5)("%TypeError%");e.exports=function(e,t){if(null==e)throw new r(t||"Cannot call method on "+e);return e}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}var o=n(5),i=o("%String%"),a=o("%TypeError%");e.exports=function(e){if("symbol"===r(e))throw new a("Cannot convert a Symbol value to a string");return i(e)}},function(e,t,n){"use strict";var r=n(5),o=n(20),i=o(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&i(e,".prototype.")?o(n):n}},function(e,t,n){"use strict";var r=n(21),o=n(24);e.exports=function(){var e=o();return r(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}},function(e,t,n){var r={"./messages_ar.json":61,"./messages_de.json":62,"./messages_es.json":63,"./messages_gl.json":64,"./messages_hi.json":65,"./messages_it.json":66,"./messages_sv.json":67,"./messages_ur.json":68};function o(e){var t=i(e);return n(t)}function i(e){if(n.o(r,e))return r[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}o.keys=function(){return Object.keys(r)},o.resolve=i,(e.exports=o).id=60},function(e){e.exports=JSON.parse('{"Add a comment...":" ","Add a reply...":" ","Add tag...":" ","Cancel":"","Close":"","Edit":"Edit","Delete":"Delete","Ok":""}')},function(e){e.exports=JSON.parse('{"Add a comment...":"Kommentar schreiben...","Add a reply...":"Antwort schreiben...","Add tag...":"Tag...","Cancel":"Abbrechen","Close":"Schliessen","Edit":"Bearbeiten","Delete":"Lschen","Ok":"Ok"}')},function(e){e.exports=JSON.parse('{"Add a comment...":"Agregar un comentario...","Add a reply...":"Agregar una respuesta...","Add tag...":"Etiquetar...","Cancel":"Cancelar","Close":"Cerrar","Edit":"Edit","Delete":"Delete","Ok":"Ok"}')},function(e){e.exports=JSON.parse('{"Add a comment...":"Engadir un comentario...","Add a reply...":"Engadir unha resposta...","Add tag...":"Etiquetar...","Cancel":"Cancelar","Close":"Pechar","Edit":"Edit","Delete":"Delete","Ok":"Ok"}')},function(e){e.exports=JSON.parse('{"Add a comment...":" ","Add a reply...":" ","Add tag...":" ","Cancel":" ","Close":" ","Edit":" ","Delete":"","Ok":" "}')},function(e){e.exports=JSON.parse('{"Add a comment...":"Commenta...","Add a reply...":"Rispondi...","Add tag...":"Aggiungi tag...","Cancel":"Annulla","Close":"Chiudi","Edit":"Edit","Delete":"Delete","Ok":"Ok"}')},function(e){e.exports=JSON.parse('{"Add a comment...":"Skriv en kommentar...","Add a reply...":"Skriv ett svar...","Add tag...":"Tagg...","Cancel":"Cancel","Close":"Stng","Edit":"Edit","Delete":"Delete","Ok":"Ok"}')},function(e){e.exports=JSON.parse('{"Add a comment...":" ","Add a reply...":" ","Add tag...":" ","Cancel":" ","Close":" ","Edit":" ","Delete":"","Ok":" "}')},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},function(e,t,n){var r=n(9),o=n(72);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i=(r(o,{insert:"head",singleton:!1}),o.locals?o.locals:{});e.exports=i},function(e,t,n){(t=n(10)(!1)).push([e.i,".r6o-drawing{cursor:none}.r6o-relations-layer.readonly .handle rect{pointer-events:none}.r6o-relations-layer{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.r6o-relations-layer circle{stroke:#515151;stroke-width:0.4;fill:#3f3f3f}.r6o-relations-layer path{stroke:#595959;stroke-linecap:round;stroke-linejoin:round;fill:transparent}.r6o-relations-layer path.connection{stroke-width:1.6;stroke-dasharray:2,3}.r6o-relations-layer path.arrow{stroke-width:1.8;fill:#7f7f7f}.r6o-relations-layer .handle rect{stroke-width:1;stroke:#595959;fill:#fff;pointer-events:auto;cursor:pointer}.r6o-relations-layer .handle text{font-size:10px}.r6o-relations-layer .hover{stroke:rgba(63,63,63,0.9);stroke-width:1.4;fill:transparent}\n",""]),e.exports=t},function(e,t,n){"use strict";function d(e){return(d="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}var f=Array.isArray,m=Object.keys,g=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==d(t)&&"object"==d(n)){var r,o,i,a=f(t),s=f(n);if(a&&s){if((o=t.length)!=n.length)return!1;for(r=o;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(a!=s)return!1;var l=t instanceof Date,c=n instanceof Date;if(l!=c)return!1;if(l&&c)return t.getTime()==n.getTime();var u=t instanceof RegExp,p=n instanceof RegExp;if(u!=p)return!1;if(u&&p)return t.toString()==n.toString();var h=m(t);if((o=h.length)!==m(n).length)return!1;for(r=o;0!=r--;)if(!g.call(n,h[r]))return!1;for(r=o;0!=r--;)if(!e(t[i=h[r]],n[i]))return!1;return!0}return t!=t&&n!=n}},function(e,t,n){"use strict";var s=n(75);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,i){if(i!==s){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){var r=n(9),o=n(77);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i=(r(o,{insert:"head",singleton:!1}),o.locals?o.locals:{});e.exports=i},function(e,t,n){(t=n(10)(!1)).push([e.i,".r6o-editor{top:0;left:0}.a9s-annotationlayer{position:absolute;top:0;left:0;width:100%;height:100%}.a9s-annotationlayer .a9s-annotation rect,.a9s-annotationlayer .a9s-selection rect{fill:transparent;cursor:pointer;vector-effect:non-scaling-stroke}.a9s-annotationlayer .a9s-annotation rect.inner,.a9s-annotationlayer .a9s-selection rect.inner{stroke:#fff;stroke-width:1px}.a9s-annotationlayer .a9s-annotation rect.inner:hover,.a9s-annotationlayer .a9s-selection rect.inner:hover{stroke:#fff000}.a9s-annotationlayer .a9s-annotation rect.outer,.a9s-annotationlayer .a9s-selection rect.outer{stroke:rgba(0,0,0,0.7);stroke-width:3px}.a9s-annotationlayer .a9s-selection rect.inner{stroke:#fff000}.a9s-annotationlayer .a9s-annotation.editable rect.inner{stroke:#fff000;cursor:move}.a9s-annotationlayer .a9s-annotation.editable rect.inner:hover{fill:rgba(255,240,0,0.1)}.a9s-annotationlayer .resize-handle rect{fill:transparent;shape-rendering:crispEdges;stroke-linecap:round}.a9s-annotationlayer .resize-handle rect.handle-inner{stroke:#fff}.a9s-annotationlayer .resize-handle rect.handle-outer{stroke:#000}.a9s-annotationlayer .resize-handle:hover rect.handle-inner{stroke:#fff000}.a9s-annotationlayer .resize-handle.topleft rect{cursor:nw-resize}.a9s-annotationlayer .resize-handle.topleft .handle-outer{stroke-dasharray:13 26 13}.a9s-annotationlayer .resize-handle.topleft .handle-inner{stroke-dasharray:11 22 12}.a9s-annotationlayer .resize-handle.topright rect{cursor:ne-resize}.a9s-annotationlayer .resize-handle.topright .handle-outer{stroke-dasharray:26 26}.a9s-annotationlayer .resize-handle.topright .handle-inner{stroke-dasharray:22 22}.a9s-annotationlayer .resize-handle.bottomright rect{cursor:se-resize}.a9s-annotationlayer .resize-handle.bottomright .handle-outer{stroke-dasharray:0 13 26 13}.a9s-annotationlayer .resize-handle.bottomright .handle-inner{stroke-dasharray:0 11 22 11}.a9s-annotationlayer .resize-handle.bottomleft rect{cursor:sw-resize}.a9s-annotationlayer .resize-handle.bottomleft .handle-outer{stroke-dasharray:0 26 26}.a9s-annotationlayer .resize-handle.bottomleft .handle-inner{stroke-dasharray:0 22 22}\n",""]),e.exports=t},function(e,t,n){var r=n(9),o=n(79);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i=(r(o,{insert:"head",singleton:!1}),o.locals?o.locals:{});e.exports=i},function(e,t,n){(t=n(10)(!1)).push([e.i,".r6o-btn{background-color:#4483c4;border:1px solid #4483c4;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-size:14px;margin:0;outline:none;text-decoration:none;white-space:nowrap;padding:6px 18px;min-width:70px;vertical-align:middle;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.r6o-btn *{vertical-align:middle}.r6o-btn .icon{margin-right:4px}.r6o-btn:disabled{border-color:#a3c2e2 !important;background-color:#a3c2e2 !important}.r6o-btn:hover{background-color:#4f92d7;border-color:#4f92d7}.r6o-btn.outline{border:1px solid #4483c4;color:#4483c4;background-color:transparent;text-shadow:none}.r6o-annotation{background-color:rgba(255,165,0,0.2);border-bottom:2px solid orange;cursor:pointer}.r6o-selection{background-color:rgba(207,207,255,0.63);cursor:pointer}.hide-selection::selection,.hide-selection ::selection{background:transparent}.hide-selection::-moz-selection .hide-selection ::-moz-selection{background:transparent}.r6o-editable-text{max-height:120px;overflow:auto;outline:none;min-height:2em;font-size:14px;font-family:'Lato', sans-serif}.r6o-editable-text:empty:not(:focus):before{content:attr(data-placeholder);color:#c2c2c2}.r6o-widget.comment{font-size:14px;min-height:3em;background-color:#fff;position:relative;padding:8px 10px}.r6o-widget.comment .lastmodified{border:1px solid #e5e5e5;display:inline-block;border-radius:2px;padding:4px 5px;line-height:100%;font-size:12px}.r6o-widget.comment .lastmodified .lastmodified-at{color:#757575;padding-left:3px}.r6o-widget.comment .arrow-down{position:absolute;height:20px;width:20px;top:9px;right:9px;line-height:22px;background-color:#fff;text-align:center;-webkit-font-smoothing:antialiased;border:1px solid #e5e5e5;cursor:pointer;-webkit-border-radius:1px;-khtml-border-radius:1px;-moz-border-radius:1px;border-radius:1px}.r6o-widget.comment .arrow-down.menu-open{border-color:#4483c4}.r6o-widget.comment .comment-dropdown-menu{position:absolute;top:32px;right:8px;background-color:#fff;border:1px solid #e5e5e5;list-style-type:none;margin:0;padding:5px 0;z-index:9999;-webkit-box-shadow:0 2px 4px rgba(0,0,0,0.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,0.2);box-shadow:0 2px 4px rgba(0,0,0,0.2)}.r6o-widget.comment .comment-dropdown-menu li{padding:0 15px;cursor:pointer}.r6o-widget.comment .comment-dropdown-menu li:hover{background-color:#ecf0f1}.r6o-widget.comment.editable{background-color:#ecf0f1}.tags:empty{display:none}.tags{background-color:#ecf0f1;border-bottom:1px solid #e5e5e5;padding:1px 3px}.tags ul,.tags li{padding:0;margin:0;display:inline}.tags li{display:inline-block;margin:1px 1px 1px 0;padding:0;vertical-align:middle;overflow:hidden;font-size:12px;background-color:#fff;border:1px solid #d6d7d9;cursor:pointer;position:relative;line-height:180%;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 0 4px rgba(0,0,0,0.1);-moz-box-shadow:0 0 4px rgba(0,0,0,0.1);box-shadow:0 0 4px rgba(0,0,0,0.1)}.tags li .label{padding:2px 8px;display:inline-block}.tags li .delete-wrapper{display:inline-block;padding:2px 0;color:#fff;width:0;height:100%;background-color:#4483c4;-webkit-border-top-right-radius:2px;-webkit-border-bottom-right-radius:2px;-khtml-border-radius-topright:2px;-khtml-border-radius-bottomright:2px;-moz-border-radius-topright:2px;-moz-border-radius-bottomright:2px;border-top-right-radius:2px;border-bottom-right-radius:2px}.tags li .delete-wrapper .delete{padding:2px 6px}.tags li .delete-wrapper .delete .icon{height:11px;padding-bottom:1px}.tags li .delete-wrapper svg{vertical-align:text-top}.tags li .delete-enter-active{width:24px;transition:width 200ms}.tags li .delete-enter-done{width:24px}.tags li .delete-exit{width:24px}.tags li .delete-exit-active{width:0;transition:width 200ms}.tags input{padding:0 3px;min-width:80px;outline:none;border:none;line-height:170%;background-color:transparent;color:#3f3f3f}.tags input::-webkit-input-placeholder{color:#c2c2c2}.tags input::-moz-placeholder{color:#c2c2c2}.tags input:-moz-placeholder{color:#c2c2c2}.tags input:-ms-input-placeholder{color:#c2c2c2}.type-selector{display:flex;border-bottom:1px solid #e5e5e5}.type-selector .type{flex:1;text-align:center;padding:7px;font-size:14px}.type-selector .type{cursor:pointer;border-right:1px solid #e5e5e5}.type-selector .type:last-child{border-right:none}.type-selector .type:hover{background-color:#f5f7f7}.type-selector .icon{margin:0 3px 1px 0;height:13px}.r6o-editor{position:absolute;z-index:99999;margin-top:18px;margin-left:-14px;width:400px;color:#3f3f3f;opacity:0;font-family:'Lato', sans-serif;font-size:17px;line-height:27px;-webkit-transition:opacity 0.1s ease-in-out;-moz-transition:opacity 0.1s ease-in-out;transition:opacity 0.1s ease-in-out}.r6o-editor .arrow{position:absolute;overflow:hidden;top:-12px;left:12px;width:28px;height:12px}.r6o-editor .arrow:after{content:'';position:absolute;top:5px;left:5px;width:18px;height:18px;background-color:#fff;-webkit-backface-visibility:hidden;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.r6o-editor .inner{background-color:#fff;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:2px 2px 42px rgba(0,0,0,0.4);-moz-box-shadow:2px 2px 42px rgba(0,0,0,0.4);box-shadow:2px 2px 42px rgba(0,0,0,0.4)}.r6o-editor .inner .r6o-widget:first-child{-webkit-border-top-left-radius:2px;-webkit-border-top-right-radius:2px;-khtml-border-radius-topleft:2px;-khtml-border-radius-topright:2px;-moz-border-radius-topleft:2px;-moz-border-radius-topright:2px;border-top-left-radius:2px;border-top-right-radius:2px}.r6o-editor .inner .r6o-widget{border-bottom:1px solid #e5e5e5}.r6o-editor .footer{text-align:right;padding:8px 0}.r6o-editor .footer .r6o-btn{margin-right:8px}.r6o-editor.align-right{margin-left:8px}.r6o-editor.align-right .arrow{left:auto;right:12px}.r6o-editor.align-bottom{margin-bottom:14px}.r6o-editor.align-bottom .arrow{top:auto;bottom:-12px}.r6o-editor.align-bottom .arrow::after{top:-11px;box-shadow:none}.r6o-relation-editor{position:absolute;font-family:'Lato', sans-serif;font-size:17px;line-height:27px;-webkit-box-shadow:0 1px 14px rgba(0,0,0,0.4);-moz-box-shadow:0 1px 14px rgba(0,0,0,0.4);box-shadow:0 1px 14px rgba(0,0,0,0.4);-webkit-border-radius:3px;-khtml-border-radius:3px;-moz-border-radius:3px;border-radius:3px;transform:translate(-50%, -50%);background-color:#fff}.r6o-relation-editor svg{vertical-align:middle;shape-rendering:geometricPrecision}.r6o-relation-editor *{line-height:31px;box-sizing:border-box}.r6o-relation-editor .input-wrapper{height:34px;padding:10px 6px;margin-right:68px;font-size:14px;min-width:80px;background-color:#ecf0f1;cursor:text;-webkit-border-top-left-radius:3px;-webkit-border-bottom-left-radius:3px;-khtml-border-radius-topleft:3px;-khtml-border-radius-bottomleft:3px;-moz-border-radius-topleft:3px;-moz-border-radius-bottomleft:3px;border-top-left-radius:3px;border-bottom-left-radius:3px}.r6o-relation-editor .input{outline:none;line-height:14px;white-space:pre}.r6o-relation-editor .input:empty:before{content:attr(data-placeholder);color:#aeb0b4}.r6o-relation-editor .buttons{position:absolute;display:inline-flex;top:0;right:0}.r6o-relation-editor .buttons span{height:34px;display:inline-block;width:34px;text-align:center;font-size:14px;cursor:pointer;padding:1px 0}.r6o-relation-editor .buttons .delete{background-color:#fff;color:#9ca4b1;border-left:1px solid #e5e5e5}.r6o-relation-editor .buttons .delete:hover{background-color:#f6f6f6}.r6o-relation-editor .buttons .ok{background-color:#4483c4;color:#fff;-webkit-border-top-right-radius:3px;-webkit-border-bottom-right-radius:3px;-khtml-border-radius-topright:3px;-khtml-border-radius-bottomright:3px;-moz-border-radius-topright:3px;-moz-border-radius-bottomright:3px;border-top-right-radius:3px;border-bottom-right-radius:3px}.r6o-relation-editor .buttons .ok:hover{background-color:#4f92d7}.noselect{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}\n",""]),e.exports=t},function(e,t,n){"use strict";n.r(t),n.d(t,"Annotorious",function(){return Ct}),n.d(t,"init",function(){return At}),n.d(t,"parseRectFragment",function(){return Be}),n.d(t,"toRectFragment",function(){return He}),n.d(t,"drawRect",function(){return Ue}),n.d(t,"getRectSize",function(){return Ve}),n.d(t,"getCorners",function(){return We}),n.d(t,"setRectSize",function(){return Ke}),n.d(t,"rectArea",function(){return $e}),n.d(t,"RubberbandRectSelector",function(){return dt});var v=n(0),r=n(3),p=n.n(r),o=n(25),s=n.n(o),i=0,b={setServerTime:function(e){var t=Date.now();i=e-t},getCurrentTimeAdjusted:function(){return new Date(Date.now()+i).toISOString()},toClientTime:function(e){return Date.parse(e)-i}},a=new(n(26))({allowMissing:!0});a.init=function(e){a.locale(e),a.extend(n(60)("./messages_".concat(e,".json")))};function w(e,t,n){var r=e.getBoundingClientRect(),o=window,i=o.scrollX,a=o.scrollY;t.className="r6o-editor",t.style.opacity=1;var s=n.getBoundingClientRect(),l=s.left,c=s.top,u=s.right,p=s.height;t.style.top="".concat(c+p-r.top,"px"),t.style.left="".concat(l+i-r.left,"px");var h=t.getBoundingClientRect();if(h.right>window.innerWidth&&(t.classList.add("align-right"),t.style.left="".concat(u-h.width+i-r.left,"px")),h.bottom>window.innerHeight){var d=c+a,f=r.bottom+a;t.classList.add("align-bottom"),t.style.top="auto",t.style.bottom="".concat(f-d,"px")}}var x=a,_=n(2);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function S(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach(function(e){var t,n,r;t=o,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})}return o}function E(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(r){var e,t,n,o,i,a,s,l=(a=Object(_.k)(),s=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(a,s)||T(a,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],u=l[1],p=Object(_.j)();function h(e){var t={},n=b.user;return!e.draft&&n&&(t.creator={},n.id&&(t.creator.id=n.id),n.displayName&&(t.creator.name=n.displayName),e.created?e.modified=b.getCurrentTimeAdjusted():e.created=b.getCurrentTimeAdjusted()),t}function d(e){return u(c.clone({body:[].concat(E(c.bodies),[S({},e,{},h(e))])}))}function f(t,n){return u(c.clone({body:c.bodies.map(function(e){return e===t?S({},n,{},h(n)):e})}))}function m(t){return u(c.clone({body:c.bodies.filter(function(e){return e!==t})}))}function g(){function e(e){return e.clone({body:e.bodies.map(function(e){var t=e.draft,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["draft"]);return t?S({},n,{},h(n)):n})})}0===c.bodies.length?c.isSelection?r.onCancel():r.onAnnotationDeleted(r.annotation):c.isSelection?r.onAnnotationCreated(e(c).toAnnotation()):r.onAnnotationUpdated(e(c),r.annotation)}Object(_.d)(function(){var e,t=r.applyTemplate&&(null===(e=r.annotation)||void 0===e?void 0:e.isSelection),n=t?r.annotation.clone({body:E(r.applyTemplate)}):r.annotation;if(null!=c&&c.isEqual(n)||null!=c&&c.isSelection&&null!=n&&n.isSelection||u(n),t&&r.applyImmediately&&r.onAnnotationCreated(n.toAnnotation()),p.current)return y()},[r.selectedElement,(t=(e=r.selectedElement.getBoundingClientRect()).top,n=e.left,o=e.width,i=e.height,"".concat(t,", ").concat(n,", ").concat(o,", ").concat(i))]);var y=function(){if(window.ResizeObserver){var e=new ResizeObserver(function(){w(r.wrapperEl,p.current,r.selectedElement)});return e.observe(r.wrapperEl),function(){return e.disconnect()}}w(r.wrapperEl,p.current,r.selectedElement)};return v.default.createElement("div",{ref:p,className:"r6o-editor"},v.default.createElement("div",{className:"arrow"}),v.default.createElement("div",{className:"inner"},v.default.Children.map(r.children,function(e){return v.default.cloneElement(e,S({},e.props,{annotation:c,readOnly:r.readOnly,onAppendBody:d,onUpdateBody:f,onRemoveBody:m,onSaveAndClose:g}))}),r.readOnly?v.default.createElement("div",{className:"footer"},v.default.createElement("button",{className:"r6o-btn",onClick:r.onCancel},x.t("Close"))):v.default.createElement("div",{className:"footer"},v.default.createElement("button",{className:"r6o-btn outline",onClick:r.onCancel},x.t("Cancel")),v.default.createElement("button",{className:"r6o-btn ",onClick:g},x.t("Ok")))))}var h=n(6),d=n.n(h);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach(function(e){y(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=(g(O.prototype,[{key:"isEqual",value:function(e){return!(!e||"Annotation"!==(null==e?void 0:e.type)||this.underlying!==e.underlying&&(!this.underlying.id||!e.underlying.id||this.underlying.id!==e.underlying.id))}},{key:"readOnly",get:function(){var e;return null===(e=this.opts)||void 0===e?void 0:e.readOnly}},{key:"id",get:function(){return this.underlying.id}},{key:"type",get:function(){return this.underlying.type}},{key:"motivation",get:function(){return this.underlying.motivation}},{key:"body",get:function(){return this.underlying.body}},{key:"target",get:function(){return this.underlying.target}},{key:"bodies",get:function(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]},set:function(e){this.underlying.body=e}},{key:"targets",get:function(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}},{key:"quote",get:function(){return this.selector("TextQuoteSelector").exact}},{key:"start",get:function(){return this.selector("TextPositionSelector").start}},{key:"end",get:function(){return this.selector("TextPositionSelector").end}}]),O);function O(e,t){var n=this;!function(e){if(!(e instanceof O))throw new TypeError("Cannot call a class as a function")}(this),y(this,"clone",function(e){return new O(m({},n.underlying,{},e),n.opts)}),y(this,"selector",function(t){var e=n.underlying.target;if(e.selector)return(Array.isArray(e.selector)?e.selector:[e.selector]).find(function(e){return e.type===t})}),this.underlying=e,this.opts=t}function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}y(P,"create",function(e){var t={"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"#".concat(d()()),body:[]};return new P(m({},t,{},e))});var k=(A(z.prototype,[{key:"isEqual",value:function(e){return!!e&&this._stub===e._stub}},{key:"type",get:function(){return this._stub.type}},{key:"body",get:function(){return this._stub.body}},{key:"target",get:function(){return this._stub.target}},{key:"bodies",get:function(){return this._stub.body}},{key:"quote",get:function(){return this.selector("TextQuoteSelector").exact}},{key:"isSelection",get:function(){return!0}}]),z);function z(e){var n=this;!function(e){if(!(e instanceof z))throw new TypeError("Cannot call a class as a function")}(this),R(this,"clone",function(e){var t=new z(JSON.parse(JSON.stringify(n._stub.target)));return e&&(t._stub=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach(function(e){R(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t._stub,{},e)),t}),R(this,"selector",function(t){var e=n._stub.target;if(e.selector)return(Array.isArray(e.selector)?e.selector:[e.selector]).find(function(e){return e.type===t})}),R(this,"toAnnotation",function(){var e=Object.assign({},n._stub,{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"#".concat(d()())});return new P(e)}),this._stub={type:"Selection",body:[],target:e}}function D(e){return v.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 940",width:e.width},v.default.createElement("metadata",null,"IcoFont Icons"),v.default.createElement("title",null,"simple-down"),v.default.createElement("glyph",{glyphName:"simple-down",unicode:"",horizAdvX:"1000"}),v.default.createElement("path",{fill:"currentColor",d:"M200 392.6l300 300 300-300-85.10000000000002-85.10000000000002-214.89999999999998 214.79999999999995-214.89999999999998-214.89999999999998-85.10000000000002 85.20000000000005z"}))}function j(e){return v.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"180 150 700 800",width:e.width},v.default.createElement("metadata",null,"IcoFont Icons"),v.default.createElement("title",null,"close"),v.default.createElement("glyph",{glyphName:"close",unicode:"",horizAdvX:"1000"}),v.default.createElement("path",{fill:"currentColor",d:"M709.8 206.6c-64.39999999999998 65.50000000000003-128.89999999999998 131.20000000000002-194.19999999999993 197.6-8.600000000000023 8.699999999999989-22.400000000000034 8.800000000000011-31 0-65-66-129.70000000000005-131.8-194.5-197.6-8.600000000000023-8.699999999999989-22.400000000000034-8.599999999999994-30.900000000000034 0.09999999999999432-15.699999999999989 16.200000000000017-31.099999999999994 32.30000000000001-47.099999999999994 48.80000000000001-8.5 8.800000000000011-8.299999999999983 23 0.20000000000001705 31.69999999999999 63.099999999999966 64.19999999999999 127.89999999999998 130.10000000000002 193.59999999999997 197 8.600000000000023 8.699999999999989 8.5 22.80000000000001 0 31.599999999999966-65.19999999999999 66.40000000000009-130.2 132.5-194.7 198.10000000000002-8.5 8.700000000000045-8.5 22.800000000000068 0.20000000000001705 31.399999999999977l47.79999999999998 47.90000000000009c8.600000000000023 8.599999999999909 22.600000000000023 8.599999999999909 31.100000000000023-0.10000000000002274l194.2-197.30000000000007c8.600000000000023-8.699999999999932 22.399999999999977-8.699999999999932 31 0 64.70000000000005 65.80000000000007 129.20000000000005 131.4000000000001 194.20000000000005 197.5 8.599999999999909 8.700000000000045 22.5 8.800000000000068 31 0.10000000000002274 16-16.199999999999932 31.699999999999932-32.19999999999993 47.59999999999991-48.299999999999955 8.600000000000023-8.700000000000045 8.600000000000023-22.899999999999977 0.10000000000002274-31.600000000000023-63.799999999999955-65-128.5-130.89999999999998-194.19999999999993-197.79999999999995-8.600000000000023-8.700000000000045-8.600000000000023-22.900000000000034 0-31.600000000000023 65.19999999999993-66.40000000000003 130.0999999999999-132.5 194.5-198.20000000000005 8.599999999999909-8.699999999999989 8.5-22.799999999999955-0.10000000000002274-31.49999999999997l-47.80000000000007-48.099999999999994c-8.5-8.5-22.399999999999977-8.400000000000006-31 0.29999999999998295z"}))}"ontouchstart"in window||navigator.maxTouchPoints,n(71);var I=n(7),N=n.n(I);function L(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})}function M(e,t){U[e]=t}function F(e){return U[e]||U.en_US}L();var B=["second","minute","hour","day","week","month","year"],H=["","","","","","",""],U={},V=[60,60,24,7,365/7/12,12];function W(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}function K(e,t){for(var n=e<0?1:0,r=e=Math.abs(e),o=0;e>=V[o]&&o<V.length;o++)e/=V[o];return(0==(o*=2)?9:1)<(e=Math.floor(e))&&(o+=1),t(e,o,r)[n].replace("%s",e.toString())}function $(e,t){return((t?W(t):new Date)-W(e))/1e3}var q="timeago-id";function G(e){return parseInt(e.getAttribute(q))}var Z={},X=function(e){clearTimeout(e),delete Z[e]};function Y(e){e?X(G(e)):Object.keys(Z).forEach(X)}M("en_US",function(e,t){if(0===t)return["just now","right now"];var n=B[Math.floor(t/2)];return 1<e&&(n+="s"),[e+" "+n+" ago","in "+e+" "+n]}),M("zh_CN",function(e,t){if(0===t)return["",""];var n=H[~~(t/2)];return[e+" "+n+"",e+" "+n+""]});var J,Q,ee=(J=function(e,t){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}J(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),te=function(){return(te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function ne(){var e=null!==Q&&Q.apply(this,arguments)||this;return e.dom=null,e}var re=(ee(ne,Q=v.default.Component),ne.prototype.componentDidMount=function(){this.renderTimeAgo()},ne.prototype.componentDidUpdate=function(){this.renderTimeAgo()},ne.prototype.renderTimeAgo=function(){var e,t,n,r,o=this.props,i=o.live,a=o.datetime,s=o.locale,l=o.opts;Y(this.dom),!1!==i&&(this.dom.setAttribute("datetime",""+((r=a)instanceof Date?r.getTime():r)),e=this.dom,t=s,n=l,(e.length?e:[e]).forEach(function(e){!function e(t,n,r,o){X(G(t));var i=o.relativeDate,a=o.minInterval,s=$(n,i);t.innerText=K(s,r);var l=setTimeout(function(){e(t,n,r,o)},Math.min(1e3*Math.max(function(e){for(var t=1,n=0,r=Math.abs(e);e>=V[n]&&n<V.length;n++)e/=V[n],t*=V[n];return r=(r%=t)?t-r:t,Math.ceil(r)}(s),a||1),2147483647));Z[l]=0,t.setAttribute(q,l)}(e,e.getAttribute("datetime"),F(t),n||{})}))},ne.prototype.componentWillUnmount=function(){Y(this.dom)},ne.prototype.render=function(){var e,t=this,n=this.props,r=n.datetime,o=(n.live,n.locale),i=n.opts,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(n,["datetime","live","locale","opts"]);return v.default.createElement("time",te({ref:function(e){t.dom=e}},a),(e=o,K($(r,i&&i.relativeDate),F(e))))},ne.defaultProps={live:!0,className:""},ne);function oe(e){var t,n,r=Object(_.j)();function o(){t.current&&!t.current.contains(event.target)&&n()}return t=r,n=function(){return e.onClickOutside()},Object(_.d)(function(){return document.addEventListener("mousedown",o),function(){return document.removeEventListener("mousedown",o)}}),v.default.createElement("ul",{ref:r,className:"comment-dropdown-menu"},v.default.createElement("li",{onClick:e.onEdit},x.t("Edit")),v.default.createElement("li",{onClick:e.onDelete},x.t("Delete")))}function ie(e){return(ie="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(a,v.Component);var o,i=function(){var e,t,n=le(o);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()){var r=le(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return!(t=e)||"object"!==ie(t)&&"function"!=typeof t?se(this):t};function a(){var t;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ue(se(t=i.call.apply(i,[this].concat(n))),"onKeyDown",function(e){13===e.which&&e.ctrlKey&&t.props.onSaveAndClose()}),ue(se(t),"onRender",function(e){e&&t.props.editable&&e.focus()}),t}return ae((o=a).prototype,[{key:"render",value:function(){return v.default.createElement(N.a,{innerRef:this.onRender,className:"r6o-editable-text",html:this.props.content,"data-placeholder":this.props.placeholder||x.t("Add a comment..."),disabled:!this.props.editable,onChange:this.props.onChange,onKeyDown:this.onKeyDown})}}]),a}();function he(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function me(t){var e=de(Object(_.k)(!1),2),n=e[0],r=e[1],o=de(Object(_.k)(!1),2),i=o[0],a=o[1],s=t.body.creator&&v.default.createElement("div",{className:"lastmodified"},v.default.createElement("span",{className:"lastmodified-by"},t.body.creator.name),t.body.created&&v.default.createElement("span",{className:"lastmodified-at"},v.default.createElement(re,{datetime:b.toClientTime(t.body.created)})));return t.readOnly?v.default.createElement("div",{className:"r6o-widget comment"},v.default.createElement("div",{className:"value"},t.body.value),s):v.default.createElement("div",{className:n?"r6o-widget comment editable":"r6o-widget comment"},v.default.createElement(pe,{editable:n,content:t.body.value,onChange:function(e){t.onUpdate(t.body,function(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?he(Object(i),!0).forEach(function(e){var t,n,r;t=o,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):he(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})}return o}({},t.body,{value:e.target.value}))},onSaveAndClose:t.onSaveAndClose}),s,v.default.createElement("div",{className:i?"icon arrow-down menu-open":"icon arrow-down",onClick:function(){return a(!i)}},v.default.createElement(D,{width:12})),i&&v.default.createElement(oe,{onEdit:function(){t.body.draft=!0,r(!0),a(!1)},onDelete:function(){t.onDelete(t.body),a(!1)},onClickOutside:function(){return a(!1)}}))}function ge(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ye(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ge(Object(i),!0).forEach(function(e){var t,n,r;t=o,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):ge(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})}return o}function ve(e){return"TextualBody"===e.type&&(!e.hasOwnProperty("purpose")||"commenting"===e.purpose||"replying"===e.purpose)}function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function we(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}function xe(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function _e(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}n(11);var Se=v.default.createContext(null),Ee="unmounted",Te="exited",Pe="entering",Oe="entered",Ce="exiting",Ae=function(i){function e(e,t){var n;n=i.call(this,e,t)||this;var r,o=t&&!t.isMounting?e.enter:e.appear;return n.appearStatus=null,e.in?o?(r=Te,n.appearStatus=Pe):r=Oe:r=e.unmountOnExit||e.mountOnEnter?Ee:Te,n.state={status:r},n.nextCallback=null,n}xe(e,i),e.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Ee?{status:Te}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Pe&&n!==Oe&&(t=Pe):n!==Pe&&n!==Oe||(t=Ce)}this.updateStatus(!1,t)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},t.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===Pe?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===Te&&this.setState({status:Ee})},t.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[v.default.findDOMNode(this),r],i=o[0],a=o[1],s=this.getTimeouts(),l=r?s.appear:s.enter;e||n?(this.props.onEnter(i,a),this.safeSetState({status:Pe},function(){t.props.onEntering(i,a),t.onTransitionEnd(l,function(){t.safeSetState({status:Oe},function(){t.props.onEntered(i,a)})})})):this.safeSetState({status:Oe},function(){t.props.onEntered(i)})},t.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:v.default.findDOMNode(this);t?(this.props.onExit(r),this.safeSetState({status:Ce},function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:Te},function(){e.props.onExited(r)})})})):this.safeSetState({status:Te},function(){e.props.onExited(r)})},t.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},t.setNextCallback=function(t){var n=this,r=!0;return this.nextCallback=function(e){r&&(r=!1,n.nextCallback=null,t(e))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},t.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:v.default.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=o[0],a=o[1];this.props.addEndListener(i,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},t.render=function(){var e=this.state.status;if(e===Ee)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,we(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return v.default.createElement(Se.Provider,{value:null},"function"==typeof n?n(e,r):v.default.cloneElement(v.default.Children.only(n),r))},e}(v.default.Component);function Re(){}function ke(r,e){return r&&e&&e.split(" ").forEach(function(e){return n=e,void((t=r).classList?t.classList.remove(n):"string"==typeof t.className?t.className=_e(t.className,n):t.setAttribute("class",_e(t.className&&t.className.baseVal||"",n)));var t,n})}Ae.contextType=Se,Ae.propTypes={},Ae.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Re,onEntering:Re,onEntered:Re,onExit:Re,onExiting:Re,onExited:Re},Ae.UNMOUNTED=Ee,Ae.EXITED=Te,Ae.ENTERING=Pe,Ae.ENTERED=Oe,Ae.EXITING=Ce;var ze=Ae,De=function(r){function e(){for(var i,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(i=r.call.apply(r,[this].concat(t))||this).appliedClasses={appear:{},enter:{},exit:{}},i.onEnter=function(e,t){var n=i.resolveArguments(e,t),r=n[0],o=n[1];i.removeClasses(r,"exit"),i.addClass(r,o?"appear":"enter","base"),i.props.onEnter&&i.props.onEnter(e,t)},i.onEntering=function(e,t){var n=i.resolveArguments(e,t),r=n[0],o=n[1]?"appear":"enter";i.addClass(r,o,"active"),i.props.onEntering&&i.props.onEntering(e,t)},i.onEntered=function(e,t){var n=i.resolveArguments(e,t),r=n[0],o=n[1]?"appear":"enter";i.removeClasses(r,o),i.addClass(r,o,"done"),i.props.onEntered&&i.props.onEntered(e,t)},i.onExit=function(e){var t=i.resolveArguments(e)[0];i.removeClasses(t,"appear"),i.removeClasses(t,"enter"),i.addClass(t,"exit","base"),i.props.onExit&&i.props.onExit(e)},i.onExiting=function(e){var t=i.resolveArguments(e)[0];i.addClass(t,"exit","active"),i.props.onExiting&&i.props.onExiting(e)},i.onExited=function(e){var t=i.resolveArguments(e)[0];i.removeClasses(t,"exit"),i.addClass(t,"exit","done"),i.props.onExited&&i.props.onExited(e)},i.resolveArguments=function(e,t){return i.props.nodeRef?[i.props.nodeRef.current,e]:[e,t]},i.getClassNames=function(e){var t=i.props.classNames,n="string"==typeof t,r=n?(n&&t?t+"-":"")+e:t[e];return{baseClassName:r,activeClassName:n?r+"-active":t[e+"Active"],doneClassName:n?r+"-done":t[e+"Done"]}},i}xe(e,r);var t=e.prototype;return t.addClass=function(e,t,n){var i,r,o=this.getClassNames(t)[n+"ClassName"],a=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&a&&(o+=" "+a),"active"===n&&e&&e.scrollTop,o&&(this.appliedClasses[t][n]=o,r=o,(i=e)&&r&&r.split(" ").forEach(function(e){return n=e,void((t=i).classList?t.classList.add(n):(o=n,((r=t).classList?o&&r.classList.contains(o):-1!==(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+o+" "))||("string"==typeof t.className?t.className=t.className+" "+n:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+n))));var t,n,r,o}))},t.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,o=n.active,i=n.done;this.appliedClasses[t]={},r&&ke(e,r),o&&ke(e,o),i&&ke(e,i)},t.render=function(){var e=this.props,t=(e.classNames,we(e,["classNames"]));return v.default.createElement(ze,be({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(v.default.Component);De.defaultProps={classNames:""},De.propTypes={};var je=De;function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}u.CommentWidget=function(r){var e,t,n=r.annotation?r.annotation.bodies.filter(ve):[],o=(e=n.slice().reverse().find(function(e){return e.draft&&!e.creator}),t=1<n.length,e||{type:"TextualBody",value:"",purpose:t?"replying":"commenting",draft:!0}),i=n.filter(function(e){return e!=o});return v.default.createElement(v.default.Fragment,null,i.map(function(e,t){return v.default.createElement(me,{key:t,readOnly:r.readOnly,body:e,onUpdate:r.onUpdateBody,onDelete:r.onRemoveBody,onSaveAndClose:r.onSaveAndClose})}),!r.readOnly&&r.annotation&&v.default.createElement("div",{className:"r6o-widget comment editable"},v.default.createElement(pe,{content:o.value,editable:!0,placeholder:0<i.length?x.t("Add a reply..."):x.t("Add a comment..."),onChange:function(e){var t=o.value.trim(),n=e.target.value.trim();0===t.length&&0<n.length?r.onAppendBody(ye({},o,{value:n})):0<t.length&&0===n.length?r.onRemoveBody(o):r.onUpdateBody(o,ye({},o,{value:n}))},onSaveAndClose:function(){return r.onSaveAndClose()}})))},u.TagWidget=function(r){var e=Ie(Object(_.k)(!1),2),o=e[0],i=e[1],t=Ie(Object(_.k)(""),2),n=t[0],a=t[1],s=r.annotation?r.annotation.bodies.filter(function(e){return"tagging"===e.purpose}):[];return v.default.createElement("div",{className:"tags"},0<s.length&&v.default.createElement("ul",null,s.map(function(e){return v.default.createElement("li",{key:e.value,onClick:(n=e.value,function(e){i(o!==n&&n)})},v.default.createElement("span",{className:"label"},e.value),!r.readOnly&&v.default.createElement(je,{in:o===e.value,timeout:200,classNames:"delete"},v.default.createElement("span",{className:"delete-wrapper",onClick:(t=e,function(e){e.stopPropagation(),r.onRemoveBody(t)})},v.default.createElement("span",{className:"delete"},v.default.createElement(j,{width:12})))));var t,n})),!r.readOnly&&v.default.createElement("input",{type:"text",value:n,onChange:function(e){return a(e.target.value)},onKeyDown:function(e){13===e.which&&(r.onAppendBody({type:"TextualBody",purpose:"tagging",value:n.trim()}),a(""))},placeholder:x.t("Add tag...")}))};var Le="http://www.w3.org/2000/svg";function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fe(e,t,n,r,o){e.setAttribute("x",t),e.setAttribute("y",n),e.setAttribute("width",r),e.setAttribute("height",o)}var Be=function(e){var t,n,r=e.selector("FragmentSelector");if(null!=r&&r.conformsTo.startsWith("http://www.w3.org/TR/media-frags")){var o=r.value,i=o.includes(":")?o.substring(o.indexOf("=")+1,o.indexOf(":")):"pixel",a=(t=(o.includes(":")?o.substring(o.indexOf(":")+1):o.substring(o.indexOf("=")+1)).split(",").map(parseFloat),n=4,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{x:a[0],y:a[1],w:a[2],h:a[3],format:i}}},He=function(e,t,n,r){var o;return{source:null===(o=b.image)||void 0===o?void 0:o.src,selector:{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:"xywh=pixel:".concat(e,",").concat(t,",").concat(n,",").concat(r)}}},Ue=function(e,t,n,r){var o="Annotation"===e.type||"Selection"===e.type?Be(e):{x:e,y:t,w:n,h:r},i=o.x,a=o.y,s=o.w,l=o.h,c=document.createElementNS(Le,"g"),u=document.createElementNS(Le,"rect"),p=document.createElementNS(Le,"rect");return p.setAttribute("class","inner"),Fe(p,i,a,s,l),u.setAttribute("class","outer"),Fe(u,i,a,s,l),c.appendChild(u),c.appendChild(p),c},Ve=function(e){var t=e.querySelector(".outer");return{x:parseFloat(t.getAttribute("x")),y:parseFloat(t.getAttribute("y")),w:parseFloat(t.getAttribute("width")),h:parseFloat(t.getAttribute("height"))}},We=function(e){var t=Ve(e),n=t.x,r=t.y,o=t.w,i=t.h;return[{x:n,y:r},{x:n+o,y:r},{x:n+o,y:r+i},{x:n,y:r+i}]},Ke=function(e,t,n,r,o){var i=e.querySelector(".inner"),a=e.querySelector(".outer");Fe(i,t,n,r,o),Fe(a,t,n,r,o)},$e=function(e){var t=Be(e);return t.w*t.h};function qe(e){return(qe="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tt(e,t,n){e.setAttribute("transform-origin","".concat(t,"px ").concat(n,"px"));var r=e.querySelector(".handle-inner");r.setAttribute("x",t-5.5),r.setAttribute("y",n-5.5);var o=e.querySelector(".handle-outer");o.setAttribute("x",t-6.5),o.setAttribute("y",n-6.5)}var nt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(l,p.a);var o,s=function(){var e,t,n=Je(o);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()){var r=Je(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return!(t=e)||"object"!==qe(t)&&"function"!=typeof t?Ye(this):t};function l(e,t){var b;!function(e){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this),et(Ye(b=s.call(this)),"enableResponsive",function(){window.ResizeObserver&&(b.resizeObserver=new ResizeObserver(function(){var e=b.svg.getBoundingClientRect(),t=b.svg.viewBox.baseVal,n=t.width,r=t.height,o=n/e.width,i=r/e.height;b.handles.forEach(function(e){return e.setAttribute("transform","scale(".concat(o,", ").concat(i,")"))})}),b.resizeObserver.observe(b.svg.parentNode))}),et(Ye(b),"setSize",function(e,t,n,r){Ke(b.rectangle,e,t,n,r);var o=Ge(b.handles,4),i=o[0],a=o[1],s=o[2],l=o[3];tt(i,e,t),tt(a,e+n,t),tt(s,e+n,t+r),tt(l,e,t+r)}),et(Ye(b),"getMousePosition",function(e){var t=b.svg.createSVGPoint();return t.x=e.clientX,t.y=e.clientY,t.matrixTransform(b.svg.getScreenCTM().inverse())}),et(Ye(b),"onGrab",function(i){return function(e){b.grabbedElem=i;var t=b.getMousePosition(e),n=Ve(b.rectangle),r=n.x,o=n.y;b.mouseOffset={x:t.x-r,y:t.y-o}}}),et(Ye(b),"onMouseMove",function(e){if(b.grabbedElem){var t=b.getMousePosition(e);if(b.grabbedElem===b.rectangle){var n=Ve(b.rectangle),r=n.w,o=n.h,i=t.x-b.mouseOffset.x,a=t.y-b.mouseOffset.y;b.setSize(i,a,r,o),b.emit("update",{x:i,y:a,w:r,h:o})}else{var s=We(b.rectangle),l=b.handles.indexOf(b.grabbedElem),c=l<2?s[l+2]:s[l-2],u=(m=t.x,g=t.y,y=c.x,v=c.y,{x:Math.min(m,y),y:Math.min(g,v),w:Math.abs(y-m),h:Math.abs(v-g)}),p=u.x,h=u.y,d=u.w,f=u.h;b.setSize(p,h,d,f),b.emit("update",{x:p,y:h,w:d,h:f})}}var m,g,y,v}),et(Ye(b),"onMouseUp",function(e){b.grabbedElem=null,b.mouseOffset=null}),et(Ye(b),"destroy",function(){b.group.parentNode.removeChild(b.group),b.resizeObserver&&b.resizeObserver.disconnect(),b.resizeObserver=null}),b.annotation=e,b.svg=t.closest("svg");var n=Be(e),r=n.x,o=n.y,i=n.w,a=n.h;return b.group=document.createElementNS(Le,"g"),b.rectangle=Ue(r,o,i,a),b.rectangle.setAttribute("class","a9s-annotation editable"),b.group.appendChild(b.rectangle),b.rectangle.querySelector(".inner").addEventListener("mousedown",b.onGrab(b.rectangle)),b.svg.addEventListener("mousemove",b.onMouseMove),b.svg.addEventListener("mouseup",b.onMouseUp),b.handles=[[r,o,"topleft"],[r+i,o,"topright"],[r+i,o+a,"bottomright"],[r,o+a,"bottomleft"]].map(function(e){var t=Ge(e,3),n=function(e,t,n){var r=document.createElementNS(Le,"g");r.setAttribute("class","resize-handle ".concat(n)),r.setAttribute("transform-origin","".concat(e,"px ").concat(t,"px"));var o=document.createElementNS(Le,"rect");o.setAttribute("x",e-5.5),o.setAttribute("y",t-5.5),o.setAttribute("width",11),o.setAttribute("height",11),o.setAttribute("class","handle-inner");var i=document.createElementNS(Le,"rect");return i.setAttribute("x",e-6.5),i.setAttribute("y",t-6.5),i.setAttribute("width",13),i.setAttribute("height",13),i.setAttribute("class","handle-outer"),r.appendChild(i),r.appendChild(o),r}(t[0],t[1],t[2]);return n.addEventListener("mousedown",b.onGrab(n)),b.group.appendChild(n),n}),t.appendChild(b.group),b.grabbedElem=null,b.mouseOffset=null,b.enableResponsive(),b}return Xe((o=l).prototype,[{key:"element",get:function(){return this.rectangle}}]),l}();function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var it=(rt(at.prototype,[{key:"bbox",get:function(){var e=this.opposite[0]-this.anchor[0],t=this.opposite[1]-this.anchor[1];return{x:0<e?this.anchor[0]:this.opposite[0],y:0<t?this.anchor[1]:this.opposite[1],w:Math.max(1,Math.abs(e)),h:Math.max(1,Math.abs(t))}}}]),at);function at(e,t,n){var s=this;!function(e){if(!(e instanceof at))throw new TypeError("Cannot call a class as a function")}(this),ot(this,"dragTo",function(e,t){s.opposite=[e,t];var n=s.bbox,r=n.x,o=n.y,i=n.w,a=n.h;Ke(s.shape,r,o,i,a)}),ot(this,"getBoundingClientRect",function(){return s.shape.getBoundingClientRect()}),ot(this,"toSelection",function(){var e=s.bbox,t=e.x,n=e.y,r=e.w,o=e.h;return new k(He(t,n,r,o))}),ot(this,"destroy",function(){s.shape.parentNode.removeChild(s.shape),s.shape=null}),this.anchor=[e,t],this.opposite=[e+2,t+2],this.shape=Ue(e,t,2,2),this.shape.setAttribute("class","a9s-selection"),this.shape.style.pointerEvents="none",n.appendChild(this.shape)}function st(e){return(st="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(n,p.a);var o,t=function(){var e,t,n=ut(o);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()){var r=ut(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return!(t=e)||"object"!==st(t)&&"function"!=typeof t?ct(this):t};function n(e){var a;return function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),ht(ct(a=t.call(this)),"_attachListeners",function(){a.svg.addEventListener("mousemove",a.onMouseMove),document.addEventListener("mouseup",a.onMouseUp)}),ht(ct(a),"_detachListeners",function(){a.svg.removeEventListener("mousemove",a.onMouseMove),document.removeEventListener("mouseup",a.onMouseUp)}),ht(ct(a),"_toSVG",function(e,t){var n=a.svg.createSVGPoint(),r=a.svg.getBoundingClientRect(),o=r.left,i=r.top;return n.x=e+o,n.y=t+i,n.matrixTransform(a.g.getScreenCTM().inverse())}),ht(ct(a),"startDrawing",function(e){var t=a._toSVG(e.layerX,e.layerY),n=t.x,r=t.y;a._attachListeners(),a.rubberband=new it(n,r,a.g)}),ht(ct(a),"stop",function(){a.rubberband&&(a.rubberband.destroy(),a.rubberband=null)}),ht(ct(a),"onMouseMove",function(e){var t=a._toSVG(e.layerX,e.layerY),n=t.x,r=t.y;a.rubberband.dragTo(n,r)}),ht(ct(a),"onMouseUp",function(e){if(a._detachListeners(),3<a.rubberband.bbox.w){var t=a.rubberband.shape;t.annotation=a.rubberband.toSelection(),a.emit("complete",t)}else a.emit("cancel",e),a.stop()}),a.svg=e.closest("svg"),a.g=e,a.rubberband=null,a}return lt((o=n).prototype,[{key:"isDrawing",get:function(){return null!=this.rubberband}}]),n}();function ft(e){return(ft="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(u,p.a);var o,c=function(){var e,t,n=gt(o);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()){var r=gt(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return!(t=e)||"object"!==ft(t)&&"function"!=typeof t?mt(this):t};function u(e){var i;!function(e){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this),vt(mt(i=c.call(this)),"enableDrawing",function(){i.readOnly||(i.disableSelectHover(),i.svg.addEventListener("mousedown",i.startDrawing))}),vt(mt(i),"disableDrawing",function(){i.svg.removeEventListener("mousedown",i.startDrawing),i.enableSelectHover()}),vt(mt(i),"enableSelectHover",function(){return i.svg.addEventListener("mousedown",i.selectCurrentHover)}),vt(mt(i),"disableSelectHover",function(){return i.svg.removeEventListener("mousedown",i.selectCurrentHover)}),vt(mt(i),"startDrawing",function(e){return i.currentTool.startDrawing(e)}),vt(mt(i),"selectCurrentHover",function(){i.currentHover&&i.selectShape(i.currentHover)}),vt(mt(i),"addAnnotation",function(t){var n=Ue(t);return n.setAttribute("class","a9s-annotation"),n.setAttribute("data-id",t.id),n.annotation=t,i.g.appendChild(n),n.addEventListener("mouseenter",function(e){i.currentHover!==n&&i.emit("mouseEnterAnnotation",t,e),i.currentHover=n}),n.addEventListener("mouseleave",function(e){i.currentHover===n&&i.emit("mouseLeaveAnnotation",t,e),i.currentHover=null}),n}),vt(mt(i),"redraw",function(){var e=Array.from(i.g.querySelectorAll(".a9s-annotation")),t=e.map(function(e){return e.annotation});t.sort(function(e,t){return $e(t)-$e(e)}),e.forEach(function(e){return i.g.removeChild(e)}),t.forEach(i.addAnnotation)}),vt(mt(i),"findShape",function(e){var t=null!=e&&e.id?e.id:e;return i.g.querySelector('.a9s-annotation[data-id="'.concat(t,'"]'))}),vt(mt(i),"selectAnnotation",function(e){i.selectedShape&&i.deselect();var t=i.findShape(e);return t?i.selectShape(t,!0):i.deselect(),null==t?void 0:t.annotation}),vt(mt(i),"selectShape",function(e,t){var n;if((null===(n=i.selectedShape)||void 0===n?void 0:n.annotation)!==(null==e?void 0:e.annotation)){i.selectedShape&&i.selectedShape.annotation!==e.annotation&&i.deselect(!0);var r=e.annotation;i.readOnly||r.readOnly||i.headless?i.emit("select",{annotation:r,element:e,skipEvent:t}):(i.disableDrawing(),e.annotation.isSelection&&i.disableSelectHover(),e.parentNode.removeChild(e),i.selectedShape=new nt(r,i.g),i.selectedShape.on("update",function(e){var t=e.x,n=e.y,r=e.w,o=e.h;i.emit("updateTarget",i.selectedShape.element,He(t,n,r,o))}),i.emit("select",{annotation:r,element:i.selectedShape.element,skipEvent:t}))}}),vt(mt(i),"deselect",function(e){if(i.selectedShape){var t=i.selectedShape.annotation;i.selectedShape.destroy(),i.selectedShape=null,t.isSelection||(i.addAnnotation(t),e||i.redraw())}i.enableDrawing()}),vt(mt(i),"init",function(e){e.sort(function(e,t){return $e(t)-$e(e)}),e.forEach(i.addAnnotation)}),vt(mt(i),"addOrUpdateAnnotation",function(e,t){var n,r;(null===(n=i.selectedShape)||void 0===n?void 0:n.annotation)!==e&&(null===(r=i.selectShape)||void 0===r?void 0:r.annotation)!=t||i.deselect(),t&&i.removeAnnotation(t),i.removeAnnotation(e),i.addAnnotation(e),i.redraw()}),vt(mt(i),"removeAnnotation",function(e){var t;(null===(t=i.selectedShape)||void 0===t?void 0:t.annotation)===e&&i.deselect();var n=i.findShape(e);n&&n.parentNode.removeChild(n)}),vt(mt(i),"getAnnotations",function(){return Array.from(i.g.querySelectorAll(".a9s-annotation")).map(function(e){return e.annotation})}),vt(mt(i),"setVisible",function(e){i.svg.style.display=e?null:"none"}),vt(mt(i),"destroy",function(){i.currentTool=null,i.currentHover=null,i.svg.parentNode.removeChild(i.svg)});var t=e.wrapperEl,n=e.imageEl,r=e.readOnly,o=e.headless;i.readOnly=r,i.headless=o;var a=n.naturalWidth,s=n.naturalHeight;if(i.svg=document.createElementNS(Le,"svg"),i.svg.classList.add("a9s-annotationlayer"),0==a&&0==s?n.onload=function(){return i.svg.setAttribute("viewBox","0 0 ".concat(n.naturalWidth," ").concat(n.naturalHeight))}:i.svg.setAttribute("viewBox","0 0 ".concat(a," ").concat(s)),i.g=document.createElementNS(Le,"g"),i.svg.appendChild(i.g),t.appendChild(i.svg),i.selectedShape=null,r)i.enableSelectHover();else{var l=new dt(i.g);l.on("complete",i.selectShape),l.on("cancel",i.selectCurrentHover),i.currentTool=l,i.enableDrawing()}return i.currentHover=null,i}return o=u}();function wt(e){return(wt="function"==typeof Symbol&&"symbol"==Rt(Symbol.iterator)?function(e){return Rt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rt(e)})(e)}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(76);var Pt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(i,v.Component);var o,r=function(){var e,t,n=St(o);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()){var r=St(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return!(t=e)||"object"!==wt(t)&&"function"!=typeof t?_t(this):t};function i(){var o;!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Tt(_t(o=r.call.apply(r,[this].concat(t))),"state",{selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null,applyTemplate:null,applyImmediately:null}),Tt(_t(o),"clearState",function(){return o.setState({selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null})}),Tt(_t(o),"handleSelect",function(e){var t=e.annotation,n=e.element,r=e.skipEvent;t?(o.setState({selectedAnnotation:t,selectedDOMElement:n}),t.isSelection||r||o.props.onAnnotationSelected(t.clone())):o.clearState()}),Tt(_t(o),"handleUpdateTarget",function(e,t){return o.setState({selectedDOMElement:e,modifiedTarget:t})}),Tt(_t(o),"onCreateOrUpdateAnnotation",function(r){return function(e,t){var n=o.state.modifiedTarget?e.clone({target:o.state.modifiedTarget}):e.clone();o.clearState(),o.annotationLayer.deselect(),o.annotationLayer.addOrUpdateAnnotation(n,t),o.props[r](n,null==t?void 0:t.clone())}}),Tt(_t(o),"onDeleteAnnotation",function(e){o.clearState(),o.annotationLayer.removeAnnotation(e),o.props.onAnnotationDeleted(e)}),Tt(_t(o),"onCancelAnnotation",function(){o.clearState(),o.annotationLayer.deselect()}),Tt(_t(o),"addAnnotation",function(e){return o.annotationLayer.addOrUpdateAnnotation(e.clone())}),Tt(_t(o),"removeAnnotation",function(e){return o.annotationLayer.removeAnnotation(e.clone())}),Tt(_t(o),"setAnnotations",function(e){return o.annotationLayer.init(e.map(function(e){return e.clone()}))}),Tt(_t(o),"getAnnotations",function(){return o.annotationLayer.getAnnotations().map(function(e){return e.clone()})}),Tt(_t(o),"setVisible",function(e){return o.annotationLayer.setVisible(e)}),Tt(_t(o),"selectAnnotation",function(e){var t=o.annotationLayer.selectAnnotation(e);if(t)return t.clone();o.clearState()}),Tt(_t(o),"applyTemplate",function(e,t){return o.setState({applyTemplate:e,applyImmediately:!t})}),o}return xt((o=i).prototype,[{key:"componentDidMount",value:function(){this.annotationLayer=new bt(this.props),this.annotationLayer.on("mouseEnterAnnotation",this.props.onMouseEnterAnnotation),this.annotationLayer.on("mouseLeaveAnnotation",this.props.onMouseLeaveAnnotation),this.annotationLayer.on("select",this.handleSelect),this.annotationLayer.on("updateTarget",this.handleUpdateTarget)}},{key:"componentWillUnmount",value:function(){this.annotationLayer.destroy()}},{key:"render",value:function(){var e,t,n=this.state.selectedAnnotation&&!this.props.headless,r=this.props.headless&&this.state.applyTemplate&&(null===(e=this.state.selectedAnnotation)||void 0===e?void 0:e.isSelection),o=1==n||1==r,i=this.props.readOnly||(null===(t=this.state.selectedAnnotation)||void 0===t?void 0:t.readOnly);return o&&v.default.createElement(u,{wrapperEl:this.props.wrapperEl,annotation:this.state.selectedAnnotation,selectedElement:this.state.selectedDOMElement,readOnly:i,applyTemplate:this.state.applyTemplate,applyImmediately:this.state.applyImmediately,onAnnotationCreated:this.onCreateOrUpdateAnnotation("onAnnotationCreated"),onAnnotationUpdated:this.onCreateOrUpdateAnnotation("onAnnotationUpdated"),onAnnotationDeleted:this.onDeleteAnnotation,onCancel:this.onCancelAnnotation},this.props.children)}}]),i}();function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(78),L();var Ct=function t(e){var r=this;!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),Ot(this,"handleAnnotationSelected",function(e){return r._emitter.emit("selectAnnotation",e.underlying)}),Ot(this,"handleAnnotationCreated",function(e){return r._emitter.emit("createAnnotation",e.underlying)}),Ot(this,"handleAnnotationUpdated",function(e,t){return r._emitter.emit("updateAnnotation",e.underlying,t.underlying)}),Ot(this,"handleAnnotationDeleted",function(e){return r._emitter.emit("deleteAnnotation",e.underlying)}),Ot(this,"handleMouseEnterAnnotation",function(e,t){return r._emitter.emit("mouseEnterAnnotation",e.underlying,t)}),Ot(this,"handleMouseLeaveAnnotation",function(e,t){return r._emitter.emit("mouseLeaveAnnotation",e.underlying,t)}),Ot(this,"addAnnotation",function(e,t){return r._app.current.addAnnotation(new P(e,{readOnly:t}))}),Ot(this,"removeAnnotation",function(e){return r._app.current.removeAnnotation(new P(e))}),Ot(this,"loadAnnotations",function(e){return s.a.get(e).then(function(e){var t=e.data.map(function(e){return new P(e)});return r._app.current.setAnnotations(t),t})}),Ot(this,"setAnnotations",function(e){var t=e.map(function(e){return new P(e)});r._app.current.setAnnotations(t)}),Ot(this,"getAnnotations",function(){return r._app.current.getAnnotations().map(function(e){return e._annotation})}),Ot(this,"setVisible",function(e){return r._app.current.setVisible(e)}),Ot(this,"selectAnnotation",function(e){var t="Annotation"===(null==e?void 0:e.type)?new P(e):e,n=r._app.current.selectAnnotation(t);return null==n?void 0:n.underlying}),Ot(this,"applyTemplate",function(e,t){var n=Array.isArray(e)?e:[e];r._app.current.applyTemplate(n,t)}),Ot(this,"destroy",function(){return v.default.unmountComponentAtNode(r._appContainerEl)}),Ot(this,"setAuthInfo",function(e){return b.user=e}),Ot(this,"clearAuthInfo",function(){return b.user=null}),Ot(this,"setServerTime",function(e){return b.setServerTime(e)}),Ot(this,"on",function(e,t){return r._emitter.on(e,t)}),Ot(this,"off",function(e,t){return r._emitter.off(e,t)}),this._app=v.default.createRef(),this._emitter=new p.a;var n=e.image.nodeType?e.image:document.getElementById(e.image);n.style.display="block",b.image=n,function(e){if(e){var t="auto"===e?window.navigator.userLanguage||window.navigator.language:e;try{x.init(t.split("-")[0].toLowerCase())}catch(e){console.warn("Unsupported locale '".concat(t,"'. Falling back to default en."))}}}(e.locale);var o=document.createElement("DIV");o.style.position="relative",o.style.display="inline-block",n.parentNode.insertBefore(o,n),o.appendChild(n),this._appContainerEl=document.createElement("DIV"),o.appendChild(this._appContainerEl);var i=u.CommentWidget,a=u.TagWidget;v.default.render(v.default.createElement(Pt,{ref:this._app,imageEl:n,wrapperEl:o,readOnly:e.readOnly,headless:e.headless,onAnnotationSelected:this.handleAnnotationSelected,onAnnotationCreated:this.handleAnnotationCreated,onAnnotationUpdated:this.handleAnnotationUpdated,onAnnotationDeleted:this.handleAnnotationDeleted,onMouseEnterAnnotation:this.handleMouseEnterAnnotation,onMouseLeaveAnnotation:this.handleMouseLeaveAnnotation},v.default.createElement(i,null),v.default.createElement(a,null)),this._appContainerEl)},At=function(e){return new Ct(e)}}],o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==Rt(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=80);function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,r},"object"==Rt(i)&&"object"==Rt(e)?e.exports=o():(n=[],void 0===(r="function"==typeof(t=o)?t.apply(i,n):t)||(e.exports=r))}).call(this,t(/*! ./../../annotorious-openseadragon/node_modules/webpack/buildin/module.js */79)(e))},
/*!*******************************************************************!*\
  !*** ../recogito-client-core/node_modules/function-bind/index.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! ./implementation */52);e.exports=Function.prototype.bind||r},
/*!****************************************************************!*\
  !*** ../recogito-client-core/node_modules/prop-types/index.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){e.exports=n(/*! ./factoryWithThrowingShims */77)()},
/*!************************************************!*\
  !*** ./node_modules/axios/lib/helpers/bind.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";e.exports=function(n,r){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return n.apply(r,e)}}},
/*!****************************************************!*\
  !*** ./node_modules/axios/lib/helpers/buildURL.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var a=n(/*! ./../utils */3);function s(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(a.isURLSearchParams(t))r=t.toString();else{var o=[];a.forEach(t,function(e,t){null!=e&&(a.isArray(e)?t+="[]":e=[e],a.forEach(e,function(e){a.isDate(e)?e=e.toISOString():a.isObject(e)&&(e=JSON.stringify(e)),o.push(s(t)+"="+s(e))}))}),r=o.join("&")}if(r){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}},
/*!***************************************************!*\
  !*** ./node_modules/axios/lib/cancel/isCancel.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},
/*!********************************************!*\
  !*** ./node_modules/axios/lib/defaults.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(s,e,l){"use strict";(function(e){var n=l(/*! ./utils */3),r=l(/*! ./helpers/normalizeHeaderName */37),t={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i,a={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(i=l(/*! ./adapters/xhr */17)),i),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){a.headers[e]={}}),n.forEach(["post","put","patch"],function(e){a.headers[e]=n.merge(t)}),s.exports=a}).call(this,l(/*! ./../../process/browser.js */36))},
/*!************************************************!*\
  !*** ./node_modules/axios/lib/adapters/xhr.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,p){"use strict";var h=p(/*! ./../utils */3),d=p(/*! ./../core/settle */38),f=p(/*! ./../helpers/buildURL */14),m=p(/*! ../core/buildFullPath */40),g=p(/*! ./../helpers/parseHeaders */43),y=p(/*! ./../helpers/isURLSameOrigin */44),v=p(/*! ../core/createError */18);e.exports=function(u){return new Promise(function(n,r){var o=u.data,i=u.headers;h.isFormData(o)&&delete i["Content-Type"];var a=new XMLHttpRequest;if(u.auth){var e=u.auth.username||"",t=u.auth.password||"";i.Authorization="Basic "+btoa(e+":"+t)}var s=m(u.baseURL,u.url);if(a.open(u.method.toUpperCase(),f(s,u.params,u.paramsSerializer),!0),a.timeout=u.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in a?g(a.getAllResponseHeaders()):null,t={data:u.responseType&&"text"!==u.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:e,config:u,request:a};d(n,r,t),a=null}},a.onabort=function(){a&&(r(v("Request aborted",u,"ECONNABORTED",a)),a=null)},a.onerror=function(){r(v("Network Error",u,null,a)),a=null},a.ontimeout=function(){var e="timeout of "+u.timeout+"ms exceeded";u.timeoutErrorMessage&&(e=u.timeoutErrorMessage),r(v(e,u,"ECONNABORTED",a)),a=null},h.isStandardBrowserEnv()){var l=p(/*! ./../helpers/cookies */45),c=(u.withCredentials||y(s))&&u.xsrfCookieName?l.read(u.xsrfCookieName):void 0;c&&(i[u.xsrfHeaderName]=c)}if("setRequestHeader"in a&&h.forEach(i,function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete i[t]:a.setRequestHeader(t,e)}),h.isUndefined(u.withCredentials)||(a.withCredentials=!!u.withCredentials),u.responseType)try{a.responseType=u.responseType}catch(e){if("json"!==u.responseType)throw e}"function"==typeof u.onDownloadProgress&&a.addEventListener("progress",u.onDownloadProgress),"function"==typeof u.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",u.onUploadProgress),u.cancelToken&&u.cancelToken.promise.then(function(e){a&&(a.abort(),r(e),a=null)}),void 0===o&&(o=null),a.send(o)})}},
/*!****************************************************!*\
  !*** ./node_modules/axios/lib/core/createError.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var a=n(/*! ./enhanceError */39);e.exports=function(e,t,n,r,o){var i=new Error(e);return a(i,t,n,r,o)}},
/*!****************************************************!*\
  !*** ./node_modules/axios/lib/core/mergeConfig.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var l=n(/*! ../utils */3);e.exports=function(t,n){n=n||{};var r={},e=["url","method","params","data"],o=["headers","auth","proxy"],i=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];l.forEach(e,function(e){void 0!==n[e]&&(r[e]=n[e])}),l.forEach(o,function(e){l.isObject(n[e])?r[e]=l.deepMerge(t[e],n[e]):void 0!==n[e]?r[e]=n[e]:l.isObject(t[e])?r[e]=l.deepMerge(t[e]):void 0!==t[e]&&(r[e]=t[e])}),l.forEach(i,function(e){void 0!==n[e]?r[e]=n[e]:void 0!==t[e]&&(r[e]=t[e])});var a=e.concat(o).concat(i),s=Object.keys(n).filter(function(e){return-1===a.indexOf(e)});return l.forEach(s,function(e){void 0!==n[e]?r[e]=n[e]:void 0!==t[e]&&(r[e]=t[e])}),r}},
/*!*************************************************!*\
  !*** ./node_modules/axios/lib/cancel/Cancel.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},
/*!****************************************************************************!*\
  !*** ../recogito-client-core/node_modules/es-abstract/helpers/callBind.js ***!
  \****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! function-bind */11),o=n(/*! ../GetIntrinsic */6)("%Function%"),i=o.apply,a=o.call;e.exports=function(){return r.apply(a,arguments)},e.exports.apply=function(){return r.apply(i,arguments)}},
/*!***********************************************************************!*\
  !*** ../recogito-client-core/node_modules/define-properties/index.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n,r){var o;t in e&&("function"!=typeof(o=r)||"[object Function]"!==i.call(o)||!r())||(p?u(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)}function o(e,t,n){var r=2<arguments.length?n:{},o=s(t);l&&(o=c.call(o,Object.getOwnPropertySymbols(t)));for(var i=0;i<o.length;i+=1)a(e,o[i],t[o[i]],r[o[i]])}var s=n(/*! object-keys */57),l="function"==typeof Symbol&&"symbol"===r(Symbol("foo")),i=Object.prototype.toString,c=Array.prototype.concat,u=Object.defineProperty,p=u&&function(){var e={};try{for(var t in u(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}();o.supportsDescriptors=!!p,e.exports=o},
/*!***********************************************************************!*\
  !*** ../recogito-client-core/node_modules/object-keys/isArguments.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=Object.prototype.toString;e.exports=function(e){var t=o.call(e),n="[object Arguments]"===t;return n=n||"[object Array]"!==t&&null!==e&&"object"===r(e)&&"number"==typeof e.length&&0<=e.length&&"[object Function]"===o.call(e.callee)}},
/*!************************************************************************************!*\
  !*** ../recogito-client-core/node_modules/string.prototype.trim/implementation.js ***!
  \************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! es-abstract/5/CheckObjectCoercible */59),o=n(/*! es-abstract/2019/ToString */60),i=n(/*! es-abstract/helpers/callBound */61)("String.prototype.replace"),a=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,s=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;e.exports=function(){var e=o(r(this));return i(i(e,a,""),s,"")}},
/*!******************************************************************************!*\
  !*** ../recogito-client-core/node_modules/string.prototype.trim/polyfill.js ***!
  \******************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! ./implementation */24);e.exports=function(){return String.prototype.trim&&""==="".trim()?String.prototype.trim:r}},
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";var n,r,o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},a=(r={},function(e){if(void 0===r[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}r[e]=t}return r[e]}),p=[];function h(e){for(var t=-1,n=0;n<p.length;n++)if(p[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},r=[],o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],s=n[a]||0,l="".concat(a," ").concat(s);n[a]=s+1;var c=h(l),u={css:i[1],media:i[2],sourceMap:i[3]};-1!==c?(p[c].references++,p[c].updater(u)):p.push({identifier:l,updater:g(u,t),references:1}),r.push(l)}return r}function s(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=i.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])}),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}var f=null,m=0;function g(t,e){var n,r,o;if(e.singleton){var i=m++;n=f=f||s(e),r=d.bind(null,n,i,!1),o=d.bind(null,n,i,!0)}else n=s(e),r=function(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,n,e),o=function(){var e;null!==(e=n).parentNode&&e.parentNode.removeChild(e)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}e.exports=function(e,a){(a=a||{}).singleton||"boolean"==typeof a.singleton||(a.singleton=o());var s=l(e=e||[],a);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var t=0;t<s.length;t++){var n=h(s[t]);p[n].references--}for(var r=l(e,a),o=0;o<s.length;o++){var i=h(s[o]);0===p[i].references&&(p[i].updater(),p.splice(i,1))}s=r}}}},
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";e.exports=function(n){var l=[];return l.toString=function(){return this.map(function(e){var t=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=function(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t);return"/*# ".concat(n," */")}(r),i=r.sources.map(function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")});return[n].concat(i).concat([o]).join("\n")}return[n].join("\n")}(e,n);return e[2]?"@media ".concat(e[2]," {").concat(t,"}"):t}).join("")},l.i=function(e,t,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(var a=0;a<e.length;a++){var s=[].concat(e[a]);n&&r[s[0]]||(t&&(s[2]?s[2]="".concat(t," and ").concat(s[2]):s[2]=t),l.push(s))}},l}},
/*!*************************************!*\
  !*** ./node_modules/axios/index.js ***!
  \*************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){e.exports=n(/*! ./lib/axios */31)},
/*!*******************************************************************!*\
  !*** ../recogito-client-core/node_modules/node-polyglot/index.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){s(!1,e)}function i(e){var t=e%100,n=t%10;return 11!=t&&1==n?0:2<=n&&n<=4&&!(12<=t&&t<=14)?1:2}var a=n(/*! for-each */48),s=n(/*! warning */50),d=n(/*! has */51),f=n(/*! string.prototype.trim */53),m=String.prototype.replace,g=String.prototype.split,y="||||",v={pluralTypes:{arabic:function(e){if(e<3)return e;var t=e%100;return 3<=t&&t<=10?3:11<=t?4:5},bosnian_serbian:i,chinese:function(){return 0},croatian:i,french:function(e){return 1<e?1:0},german:function(e){return 1!==e?1:0},russian:i,lithuanian:function(e){return e%10==1&&e%100!=11?0:2<=e%10&&e%10<=9&&(e%100<11||19<e%100)?1:2},czech:function(e){return 1===e?0:2<=e&&e<=4?1:2},polish:function(e){if(1===e)return 0;var t=e%10;return 2<=t&&t<=4&&(e%100<10||20<=e%100)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0},slovenian:function(e){var t=e%100;return 1==t?0:2==t?1:3==t||4==t?2:3}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]}};function b(e,t){var n,r,o=(n=e.pluralTypeToLanguages,r={},a(n,function(e,t){a(e,function(e){r[e]=t})}),r);return o[t]||o[g.call(t,/-/,1)[0]]||o.en}function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var w=/%\{(.*?)\}/g;function c(e,t,n,r,o){if("string"!=typeof e)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return e;var i,a,s,l=e,c=r||w,u=o||v,p="number"==typeof t?{smart_count:t}:t;if(null!=p.smart_count&&l){var h=g.call(l,y);l=f(h[i=u,a=n||"en",s=p.smart_count,i.pluralTypes[b(i,a)](s)]||h[0])}return l=m.call(l,c,function(e,t){return d(p,t)&&null!=p[t]?p[t]:e})}function u(e){var t=e||{};this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en";var n=t.allowMissing?c:null;this.onMissingKey="function"==typeof t.onMissingKey?t.onMissingKey:n,this.warn=t.warn||r,this.tokenRegex=function(e){var t=e&&e.prefix||"%{",n=e&&e.suffix||"}";if(t===y||n===y)throw new RangeError('"'+y+'" token is reserved for pluralization');return new RegExp(l(t)+"(.*?)"+l(n),"g")}(t.interpolation),this.pluralRules=t.pluralRules||v}u.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},u.prototype.extend=function(e,r){a(e,function(e,t){var n=r?r+"."+t:t;"object"===o(e)?this.extend(e,n):this.phrases[n]=e},this)},u.prototype.unset=function(e,r){"string"==typeof e?delete this.phrases[e]:a(e,function(e,t){var n=r?r+"."+t:t;"object"===o(e)?this.unset(e,n):delete this.phrases[n]},this)},u.prototype.clear=function(){this.phrases={}},u.prototype.replace=function(e){this.clear(),this.extend(e)},u.prototype.t=function(e,t){var n,r,o=null==t?{}:t;if("string"==typeof this.phrases[e])n=this.phrases[e];else if("string"==typeof o._)n=o._;else if(this.onMissingKey){r=(0,this.onMissingKey)(e,o,this.currentLocale,this.tokenRegex,this.pluralRules)}else this.warn('Missing translation for key: "'+e+'"'),r=e;return"string"==typeof n&&(r=c(n,o,this.currentLocale,this.tokenRegex,this.pluralRules)),r},u.prototype.has=function(e){return d(this.phrases,e)},u.transformPhrase=function(e,t,n){return c(e,t,n)},e.exports=u},,
/*!*****************************************!*\
  !*** ./node_modules/axios/lib/axios.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! ./utils */3),o=n(/*! ./helpers/bind */13),i=n(/*! ./core/Axios */32),a=n(/*! ./core/mergeConfig */19);function s(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var l=s(n(/*! ./defaults */16));l.Axios=i,l.create=function(e){return s(a(l.defaults,e))},l.Cancel=n(/*! ./cancel/Cancel */20),l.CancelToken=n(/*! ./cancel/CancelToken */46),l.isCancel=n(/*! ./cancel/isCancel */15),l.all=function(e){return Promise.all(e)},l.spread=n(/*! ./helpers/spread */47),e.exports=l,e.exports.default=l},
/*!**********************************************!*\
  !*** ./node_modules/axios/lib/core/Axios.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var o=n(/*! ./../utils */3),r=n(/*! ../helpers/buildURL */14),i=n(/*! ./InterceptorManager */33),a=n(/*! ./dispatchRequest */34),s=n(/*! ./mergeConfig */19);function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e,t){"string"==typeof e?(e=t||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=[a,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){n.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){n.push(e.fulfilled,e.rejected)});n.length;)r=r.then(n.shift(),n.shift());return r},l.prototype.getUri=function(e){return e=s(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],function(n){l.prototype[n]=function(e,t){return this.request(o.merge(t||{},{method:n,url:e}))}}),o.forEach(["post","put","patch"],function(r){l.prototype[r]=function(e,t,n){return this.request(o.merge(n||{},{method:r,url:e,data:t}))}}),e.exports=l},
/*!***********************************************************!*\
  !*** ./node_modules/axios/lib/core/InterceptorManager.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! ./../utils */3);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},e.exports=o},
/*!********************************************************!*\
  !*** ./node_modules/axios/lib/core/dispatchRequest.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! ./../utils */3),o=n(/*! ./transformData */35),i=n(/*! ../cancel/isCancel */15),a=n(/*! ../defaults */16);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(t){return s(t),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return s(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return i(e)||(s(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},
/*!******************************************************!*\
  !*** ./node_modules/axios/lib/core/transformData.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! ./../utils */3);e.exports=function(t,n,e){return r.forEach(e,function(e){t=e(t,n)}),t}},
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,c=[],u=!1,p=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):p=-1,c.length&&d())}function d(){if(!u){var e=s(h);u=!0;for(var t=c.length;t;){for(l=c,c=[];++p<t;)l&&l[p].run();p=-1,t=c.length}l=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},
/*!***************************************************************!*\
  !*** ./node_modules/axios/lib/helpers/normalizeHeaderName.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var o=n(/*! ../utils */3);e.exports=function(n,r){o.forEach(n,function(e,t){t!==r&&t.toUpperCase()===r.toUpperCase()&&(n[r]=e,delete n[t])})}},
/*!***********************************************!*\
  !*** ./node_modules/axios/lib/core/settle.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var o=n(/*! ./createError */18);e.exports=function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(o("Request failed with status code "+n.status,n.config,null,n.request,n))}},
/*!*****************************************************!*\
  !*** ./node_modules/axios/lib/core/enhanceError.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},
/*!******************************************************!*\
  !*** ./node_modules/axios/lib/core/buildFullPath.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! ../helpers/isAbsoluteURL */41),o=n(/*! ../helpers/combineURLs */42);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},
/*!*********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/isAbsoluteURL.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},
/*!*******************************************************!*\
  !*** ./node_modules/axios/lib/helpers/combineURLs.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},
/*!********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/parseHeaders.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var i=n(/*! ./../utils */3),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,r,o={};return e&&i.forEach(e.split("\n"),function(e){if(r=e.indexOf(":"),t=i.trim(e.substr(0,r)).toLowerCase(),n=i.trim(e.substr(r+1)),t){if(o[t]&&0<=a.indexOf(t))return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}}),o}},
/*!***********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/isURLSameOrigin.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r,o,i,a=n(/*! ./../utils */3);function s(e){var t=e;return o&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}e.exports=a.isStandardBrowserEnv()?(o=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),r=s(window.location.href),function(e){var t=a.isString(e)?s(e):e;return t.protocol===r.protocol&&t.host===r.host}):function(){return!0}},
/*!***************************************************!*\
  !*** ./node_modules/axios/lib/helpers/cookies.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var s=n(/*! ./../utils */3);e.exports=s.isStandardBrowserEnv()?{write:function(e,t,n,r,o,i){var a=[];a.push(e+"="+encodeURIComponent(t)),s.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),s.isString(r)&&a.push("path="+r),s.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},
/*!******************************************************!*\
  !*** ./node_modules/axios/lib/cancel/CancelToken.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! ./Cancel */20);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},e.exports=o},
/*!**************************************************!*\
  !*** ./node_modules/axios/lib/helpers/spread.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";e.exports=function(t){return function(e){return t.apply(null,e)}}},
/*!**************************************************************!*\
  !*** ../recogito-client-core/node_modules/for-each/index.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var o=n(/*! is-callable */49),i=Object.prototype.toString,a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!o(t))throw new TypeError("iterator must be a function");var r;3<=arguments.length&&(r=n),("[object Array]"===i.call(e)?function(e,t,n){for(var r=0,o=e.length;r<o;r++)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}:"string"==typeof e?function(e,t,n){for(var r=0,o=e.length;r<o;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)}:function(e,t,n){for(var r in e)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))})(e,t,r)}},
/*!*****************************************************************!*\
  !*** ../recogito-client-core/node_modules/is-callable/index.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){try{var t=i.call(e);return a.test(t)}catch(e){return}}var i=Function.prototype.toString,a=/^\s*class\b/,s=Object.prototype.toString,l="function"==typeof Symbol&&"symbol"===r(Symbol.toStringTag);e.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!==r(e))return!1;if("function"==typeof e&&!e.prototype)return!0;if(l)return function(e){try{return o(e)?!1:(i.call(e),!0)}catch(e){return!1}}(e);if(o(e))return!1;var t=s.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},
/*!***************************************************************!*\
  !*** ../recogito-client-core/node_modules/warning/warning.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=function(){};e.exports=r},
/*!*************************************************************!*\
  !*** ../recogito-client-core/node_modules/has/src/index.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! function-bind */11);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},
/*!****************************************************************************!*\
  !*** ../recogito-client-core/node_modules/function-bind/implementation.js ***!
  \****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var l=Array.prototype.slice,c=Object.prototype.toString;e.exports=function(t){var n=this;if("function"!=typeof n||"[object Function]"!==c.call(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var r,o=l.call(arguments,1),e=Math.max(0,n.length-o.length),i=[],a=0;a<e;a++)i.push("$"+a);if(r=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof r){var e=n.apply(this,o.concat(l.call(arguments)));return Object(e)===e?e:this}return n.apply(t,o.concat(l.call(arguments)))}),n.prototype){var s=function(){};s.prototype=n.prototype,r.prototype=new s,s.prototype=null}return r}},
/*!***************************************************************************!*\
  !*** ../recogito-client-core/node_modules/string.prototype.trim/index.js ***!
  \***************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! es-abstract/helpers/callBind */21),o=n(/*! define-properties */22),i=n(/*! ./implementation */24),a=n(/*! ./polyfill */25),s=n(/*! ./shim */62),l=r(a());o(l,{getPolyfill:a,implementation:i,shim:s}),e.exports=l},
/*!*****************************************************************!*\
  !*** ../recogito-client-core/node_modules/has-symbols/index.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(o,e,i){"use strict";(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=e.Symbol,r=i(/*! ./shams */56);o.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"===t(n("foo"))&&("symbol"===t(Symbol("bar"))&&r())))}}).call(this,i(/*! ./../../../annotorious-openseadragon/node_modules/webpack/buildin/global.js */55))},
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r},
/*!*****************************************************************!*\
  !*** ../recogito-client-core/node_modules/has-symbols/shams.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"===i(Symbol.iterator))return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},
/*!*****************************************************************!*\
  !*** ../recogito-client-core/node_modules/object-keys/index.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=Array.prototype.slice,o=n(/*! ./isArguments */23),i=Object.keys,a=i?function(e){return i(e)}:n(/*! ./implementation */58),s=Object.keys;a.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return o(e)?s(r.call(e)):s(e)}):Object.keys=a;return Object.keys||a},e.exports=a},
/*!**************************************************************************!*\
  !*** ../recogito-client-core/node_modules/object-keys/implementation.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;if(!Object.keys){var d=Object.prototype.hasOwnProperty,f=Object.prototype.toString,m=n(/*! ./isArguments */23),o=Object.prototype.propertyIsEnumerable,g=!o.call({toString:null},"toString"),y=o.call(function(){},"prototype"),v=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],b=function(e){var t=e.constructor;return t&&t.prototype===e},i={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},w=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!i["$"+e]&&d.call(window,e)&&null!==window[e]&&"object"===h(window[e]))try{b(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(e){var t=null!==e&&"object"===h(e),n="[object Function]"===f.call(e),r=m(e),o=t&&"[object String]"===f.call(e),i=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var a=y&&n;if(o&&0<e.length&&!d.call(e,0))for(var s=0;s<e.length;++s)i.push(String(s));if(r&&0<e.length)for(var l=0;l<e.length;++l)i.push(String(l));else for(var c in e)a&&"prototype"===c||!d.call(e,c)||i.push(String(c));if(g)for(var u=function(e){if("undefined"==typeof window||!w)return b(e);try{return b(e)}catch(e){return!1}}(e),p=0;p<v.length;++p)u&&"constructor"===v[p]||!d.call(e,v[p])||i.push(v[p]);return i}}e.exports=r},
/*!**********************************************************************************!*\
  !*** ../recogito-client-core/node_modules/es-abstract/5/CheckObjectCoercible.js ***!
  \**********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! ../GetIntrinsic */6)("%TypeError%");e.exports=function(e,t){if(null==e)throw new r(t||"Cannot call method on "+e);return e}},
/*!*************************************************************************!*\
  !*** ../recogito-client-core/node_modules/es-abstract/2019/ToString.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(/*! ../GetIntrinsic */6),i=o("%String%"),a=o("%TypeError%");e.exports=function(e){if("symbol"===r(e))throw new a("Cannot convert a Symbol value to a string");return i(e)}},
/*!*****************************************************************************!*\
  !*** ../recogito-client-core/node_modules/es-abstract/helpers/callBound.js ***!
  \*****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! ../GetIntrinsic */6),o=n(/*! ./callBind */21),i=o(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&i(e,".prototype.")?o(n):n}},
/*!**************************************************************************!*\
  !*** ../recogito-client-core/node_modules/string.prototype.trim/shim.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! define-properties */22),o=n(/*! ./polyfill */25);e.exports=function(){var e=o();return r(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}},
/*!*********************************************************************!*\
  !*** ../recogito-client-core/src/i18n sync ^\.\/messages_.*\.json$ ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){var r={"./messages_ar.json":64,"./messages_de.json":65,"./messages_es.json":66,"./messages_gl.json":67,"./messages_hi.json":68,"./messages_it.json":69,"./messages_sv.json":70,"./messages_ur.json":71};function o(e){var t=i(e);return n(t)}function i(e){if(n.o(r,e))return r[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}o.keys=function(){return Object.keys(r)},o.resolve=i,(e.exports=o).id=63},
/*!*********************************************************!*\
  !*** ../recogito-client-core/src/i18n/messages_ar.json ***!
  \*********************************************************/
/*! exports provided: Add a comment..., Add a reply..., Add tag..., Cancel, Close, Edit, Delete, Ok, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"Add a comment...":" ","Add a reply...":" ","Add tag...":" ","Cancel":"","Close":"","Edit":"Edit","Delete":"Delete","Ok":""}')},
/*!*********************************************************!*\
  !*** ../recogito-client-core/src/i18n/messages_de.json ***!
  \*********************************************************/
/*! exports provided: Add a comment..., Add a reply..., Add tag..., Cancel, Close, Edit, Delete, Ok, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"Add a comment...":"Kommentar schreiben...","Add a reply...":"Antwort schreiben...","Add tag...":"Tag...","Cancel":"Abbrechen","Close":"Schliessen","Edit":"Bearbeiten","Delete":"Lschen","Ok":"Ok"}')},
/*!*********************************************************!*\
  !*** ../recogito-client-core/src/i18n/messages_es.json ***!
  \*********************************************************/
/*! exports provided: Add a comment..., Add a reply..., Add tag..., Cancel, Close, Edit, Delete, Ok, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"Add a comment...":"Agregar un comentario...","Add a reply...":"Agregar una respuesta...","Add tag...":"Etiquetar...","Cancel":"Cancelar","Close":"Cerrar","Edit":"Edit","Delete":"Delete","Ok":"Ok"}')},
/*!*********************************************************!*\
  !*** ../recogito-client-core/src/i18n/messages_gl.json ***!
  \*********************************************************/
/*! exports provided: Add a comment..., Add a reply..., Add tag..., Cancel, Close, Edit, Delete, Ok, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"Add a comment...":"Engadir un comentario...","Add a reply...":"Engadir unha resposta...","Add tag...":"Etiquetar...","Cancel":"Cancelar","Close":"Pechar","Edit":"Edit","Delete":"Delete","Ok":"Ok"}')},
/*!*********************************************************!*\
  !*** ../recogito-client-core/src/i18n/messages_hi.json ***!
  \*********************************************************/
/*! exports provided: Add a comment..., Add a reply..., Add tag..., Cancel, Close, Edit, Delete, Ok, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"Add a comment...":" ","Add a reply...":" ","Add tag...":" ","Cancel":" ","Close":" ","Edit":" ","Delete":"","Ok":" "}')},
/*!*********************************************************!*\
  !*** ../recogito-client-core/src/i18n/messages_it.json ***!
  \*********************************************************/
/*! exports provided: Add a comment..., Add a reply..., Add tag..., Cancel, Close, Edit, Delete, Ok, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"Add a comment...":"Commenta...","Add a reply...":"Rispondi...","Add tag...":"Aggiungi tag...","Cancel":"Annulla","Close":"Chiudi","Edit":"Edit","Delete":"Delete","Ok":"Ok"}')},
/*!*********************************************************!*\
  !*** ../recogito-client-core/src/i18n/messages_sv.json ***!
  \*********************************************************/
/*! exports provided: Add a comment..., Add a reply..., Add tag..., Cancel, Close, Edit, Delete, Ok, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"Add a comment...":"Skriv en kommentar...","Add a reply...":"Skriv ett svar...","Add tag...":"Tagg...","Cancel":"Cancel","Close":"Stng","Edit":"Edit","Delete":"Delete","Ok":"Ok"}')},
/*!*********************************************************!*\
  !*** ../recogito-client-core/src/i18n/messages_ur.json ***!
  \*********************************************************/
/*! exports provided: Add a comment..., Add a reply..., Add tag..., Cancel, Close, Edit, Delete, Ok, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"Add a comment...":" ","Add a reply...":" ","Add tag...":" ","Cancel":" ","Close":" ","Edit":" ","Delete":"","Ok":" "}')},
/*!********************************************************************!*\
  !*** ../recogito-client-core/node_modules/uuid/lib/rng-browser.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},
/*!********************************************************************!*\
  !*** ../recogito-client-core/node_modules/uuid/lib/bytesToUuid.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},
/*!*****************************************************************!*\
  !*** ../recogito-client-core/src/relations/RelationsLayer.scss ***!
  \*****************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){var r=n(/*! ../../../annotorious-openseadragon/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */26),o=n(/*! !../../../annotorious-openseadragon/node_modules/css-loader/dist/cjs.js!../../../annotorious-openseadragon/node_modules/sass-loader/dist/cjs.js!./RelationsLayer.scss */75);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1};r(o,i);e.exports=o.locals||{}},
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!../recogito-client-core/src/relations/RelationsLayer.scss ***!
  \**********************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){(t=n(/*! ../../../annotorious-openseadragon/node_modules/css-loader/dist/runtime/api.js */27)(!1)).push([e.i,".r6o-drawing{cursor:none}.r6o-relations-layer.readonly .handle rect{pointer-events:none}.r6o-relations-layer{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.r6o-relations-layer circle{stroke:#515151;stroke-width:0.4;fill:#3f3f3f}.r6o-relations-layer path{stroke:#595959;stroke-linecap:round;stroke-linejoin:round;fill:transparent}.r6o-relations-layer path.connection{stroke-width:1.6;stroke-dasharray:2,3}.r6o-relations-layer path.arrow{stroke-width:1.8;fill:#7f7f7f}.r6o-relations-layer .handle rect{stroke-width:1;stroke:#595959;fill:#fff;pointer-events:auto;cursor:pointer}.r6o-relations-layer .handle text{font-size:10px}.r6o-relations-layer .hover{stroke:rgba(63,63,63,0.9);stroke-width:1.4;fill:transparent}\n",""]),e.exports=t},
/*!*********************************************************************!*\
  !*** ../recogito-client-core/node_modules/fast-deep-equal/index.js ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=Array.isArray,m=Object.keys,g=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==d(t)&&"object"==d(n)){var r,o,i,a=f(t),s=f(n);if(a&&s){if((o=t.length)!=n.length)return!1;for(r=o;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(a!=s)return!1;var l=t instanceof Date,c=n instanceof Date;if(l!=c)return!1;if(l&&c)return t.getTime()==n.getTime();var u=t instanceof RegExp,p=n instanceof RegExp;if(u!=p)return!1;if(u&&p)return t.toString()==n.toString();var h=m(t);if((o=h.length)!==m(n).length)return!1;for(r=o;0!=r--;)if(!g.call(n,h[r]))return!1;for(r=o;0!=r--;)if(!e(t[i=h[r]],n[i]))return!1;return!0}return t!=t&&n!=n}},
/*!***********************************************************************************!*\
  !*** ../recogito-client-core/node_modules/prop-types/factoryWithThrowingShims.js ***!
  \***********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var s=n(/*! ./lib/ReactPropTypesSecret */78);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,i){if(i!==s){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n}},
/*!***********************************************************************************!*\
  !*** ../recogito-client-core/node_modules/prop-types/lib/ReactPropTypesSecret.js ***!
  \***********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},
/*!*********************************************************!*\
  !*** ../recogito-client-core/themes/default/theme.scss ***!
  \*********************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){var r=n(/*! ../../../annotorious-openseadragon/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */26),o=n(/*! !../../../annotorious-openseadragon/node_modules/css-loader/dist/cjs.js!../../../annotorious-openseadragon/node_modules/sass-loader/dist/cjs.js!./theme.scss */81);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1};r(o,i);e.exports=o.locals||{}},
/*!**************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!../recogito-client-core/themes/default/theme.scss ***!
  \**************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){(t=n(/*! ../../../annotorious-openseadragon/node_modules/css-loader/dist/runtime/api.js */27)(!1)).push([e.i,".r6o-btn{background-color:#4483c4;border:1px solid #4483c4;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-size:14px;margin:0;outline:none;text-decoration:none;white-space:nowrap;padding:6px 18px;min-width:70px;vertical-align:middle;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.r6o-btn *{vertical-align:middle}.r6o-btn .icon{margin-right:4px}.r6o-btn:disabled{border-color:#a3c2e2 !important;background-color:#a3c2e2 !important}.r6o-btn:hover{background-color:#4f92d7;border-color:#4f92d7}.r6o-btn.outline{border:1px solid #4483c4;color:#4483c4;background-color:transparent;text-shadow:none}.r6o-annotation{background-color:rgba(255,165,0,0.2);border-bottom:2px solid orange;cursor:pointer}.r6o-selection{background-color:rgba(207,207,255,0.63);cursor:pointer}.hide-selection::selection,.hide-selection ::selection{background:transparent}.hide-selection::-moz-selection .hide-selection ::-moz-selection{background:transparent}.r6o-editable-text{max-height:120px;overflow:auto;outline:none;min-height:2em;font-size:14px;font-family:'Lato', sans-serif}.r6o-editable-text:empty:not(:focus):before{content:attr(data-placeholder);color:#c2c2c2}.r6o-widget.comment{font-size:14px;min-height:3em;background-color:#fff;position:relative;padding:8px 10px}.r6o-widget.comment .lastmodified{border:1px solid #e5e5e5;display:inline-block;border-radius:2px;padding:4px 5px;line-height:100%;font-size:12px}.r6o-widget.comment .lastmodified .lastmodified-at{color:#757575;padding-left:3px}.r6o-widget.comment .arrow-down{position:absolute;height:20px;width:20px;top:9px;right:9px;line-height:22px;background-color:#fff;text-align:center;-webkit-font-smoothing:antialiased;border:1px solid #e5e5e5;cursor:pointer;-webkit-border-radius:1px;-khtml-border-radius:1px;-moz-border-radius:1px;border-radius:1px}.r6o-widget.comment .arrow-down.menu-open{border-color:#4483c4}.r6o-widget.comment .comment-dropdown-menu{position:absolute;top:32px;right:8px;background-color:#fff;border:1px solid #e5e5e5;list-style-type:none;margin:0;padding:5px 0;z-index:9999;-webkit-box-shadow:0 2px 4px rgba(0,0,0,0.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,0.2);box-shadow:0 2px 4px rgba(0,0,0,0.2)}.r6o-widget.comment .comment-dropdown-menu li{padding:0 15px;cursor:pointer}.r6o-widget.comment .comment-dropdown-menu li:hover{background-color:#ecf0f1}.r6o-widget.comment.editable{background-color:#ecf0f1}.tags:empty{display:none}.tags{background-color:#ecf0f1;border-bottom:1px solid #e5e5e5;padding:1px 3px}.tags ul,.tags li{padding:0;margin:0;display:inline}.tags li{display:inline-block;margin:1px 1px 1px 0;padding:0;vertical-align:middle;overflow:hidden;font-size:12px;background-color:#fff;border:1px solid #d6d7d9;cursor:pointer;position:relative;line-height:180%;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 0 4px rgba(0,0,0,0.1);-moz-box-shadow:0 0 4px rgba(0,0,0,0.1);box-shadow:0 0 4px rgba(0,0,0,0.1)}.tags li .label{padding:2px 8px;display:inline-block}.tags li .delete-wrapper{display:inline-block;padding:2px 0;color:#fff;width:0;height:100%;background-color:#4483c4;-webkit-border-top-right-radius:2px;-webkit-border-bottom-right-radius:2px;-khtml-border-radius-topright:2px;-khtml-border-radius-bottomright:2px;-moz-border-radius-topright:2px;-moz-border-radius-bottomright:2px;border-top-right-radius:2px;border-bottom-right-radius:2px}.tags li .delete-wrapper .delete{padding:2px 6px}.tags li .delete-wrapper .delete .icon{height:11px;padding-bottom:1px}.tags li .delete-wrapper svg{vertical-align:text-top}.tags li .delete-enter-active{width:24px;transition:width 200ms}.tags li .delete-enter-done{width:24px}.tags li .delete-exit{width:24px}.tags li .delete-exit-active{width:0;transition:width 200ms}.tags input{padding:0 3px;min-width:80px;outline:none;border:none;line-height:170%;background-color:transparent;color:#3f3f3f}.tags input::-webkit-input-placeholder{color:#c2c2c2}.tags input::-moz-placeholder{color:#c2c2c2}.tags input:-moz-placeholder{color:#c2c2c2}.tags input:-ms-input-placeholder{color:#c2c2c2}.type-selector{display:flex;border-bottom:1px solid #e5e5e5}.type-selector .type{flex:1;text-align:center;padding:7px;font-size:14px}.type-selector .type{cursor:pointer;border-right:1px solid #e5e5e5}.type-selector .type:last-child{border-right:none}.type-selector .type:hover{background-color:#f5f7f7}.type-selector .icon{margin:0 3px 1px 0;height:13px}.r6o-editor{position:absolute;z-index:99999;margin-top:18px;margin-left:-14px;width:400px;color:#3f3f3f;opacity:0;font-family:'Lato', sans-serif;font-size:17px;line-height:27px;-webkit-transition:opacity 0.1s ease-in-out;-moz-transition:opacity 0.1s ease-in-out;transition:opacity 0.1s ease-in-out}.r6o-editor .arrow{position:absolute;overflow:hidden;top:-12px;left:12px;width:28px;height:12px}.r6o-editor .arrow:after{content:'';position:absolute;top:5px;left:5px;width:18px;height:18px;background-color:#fff;-webkit-backface-visibility:hidden;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.r6o-editor .inner{background-color:#fff;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:2px 2px 42px rgba(0,0,0,0.4);-moz-box-shadow:2px 2px 42px rgba(0,0,0,0.4);box-shadow:2px 2px 42px rgba(0,0,0,0.4)}.r6o-editor .inner .r6o-widget:first-child{-webkit-border-top-left-radius:2px;-webkit-border-top-right-radius:2px;-khtml-border-radius-topleft:2px;-khtml-border-radius-topright:2px;-moz-border-radius-topleft:2px;-moz-border-radius-topright:2px;border-top-left-radius:2px;border-top-right-radius:2px}.r6o-editor .inner .r6o-widget{border-bottom:1px solid #e5e5e5}.r6o-editor .footer{text-align:right;padding:8px 0}.r6o-editor .footer .r6o-btn{margin-right:8px}.r6o-editor.align-right{margin-left:8px}.r6o-editor.align-right .arrow{left:auto;right:12px}.r6o-editor.align-bottom{margin-bottom:14px}.r6o-editor.align-bottom .arrow{top:auto;bottom:-12px}.r6o-editor.align-bottom .arrow::after{top:-11px;box-shadow:none}.r6o-relation-editor{position:absolute;font-family:'Lato', sans-serif;font-size:17px;line-height:27px;-webkit-box-shadow:0 1px 14px rgba(0,0,0,0.4);-moz-box-shadow:0 1px 14px rgba(0,0,0,0.4);box-shadow:0 1px 14px rgba(0,0,0,0.4);-webkit-border-radius:3px;-khtml-border-radius:3px;-moz-border-radius:3px;border-radius:3px;transform:translate(-50%, -50%);background-color:#fff}.r6o-relation-editor svg{vertical-align:middle;shape-rendering:geometricPrecision}.r6o-relation-editor *{line-height:31px;box-sizing:border-box}.r6o-relation-editor .input-wrapper{height:34px;padding:10px 6px;margin-right:68px;font-size:14px;min-width:80px;background-color:#ecf0f1;cursor:text;-webkit-border-top-left-radius:3px;-webkit-border-bottom-left-radius:3px;-khtml-border-radius-topleft:3px;-khtml-border-radius-bottomleft:3px;-moz-border-radius-topleft:3px;-moz-border-radius-bottomleft:3px;border-top-left-radius:3px;border-bottom-left-radius:3px}.r6o-relation-editor .input{outline:none;line-height:14px;white-space:pre}.r6o-relation-editor .input:empty:before{content:attr(data-placeholder);color:#aeb0b4}.r6o-relation-editor .buttons{position:absolute;display:inline-flex;top:0;right:0}.r6o-relation-editor .buttons span{height:34px;display:inline-block;width:34px;text-align:center;font-size:14px;cursor:pointer;padding:1px 0}.r6o-relation-editor .buttons .delete{background-color:#fff;color:#9ca4b1;border-left:1px solid #e5e5e5}.r6o-relation-editor .buttons .delete:hover{background-color:#f6f6f6}.r6o-relation-editor .buttons .ok{background-color:#4483c4;color:#fff;-webkit-border-top-right-radius:3px;-webkit-border-bottom-right-radius:3px;-khtml-border-radius-topright:3px;-khtml-border-radius-bottomright:3px;-moz-border-radius-topright:3px;-moz-border-radius-bottomright:3px;border-top-right-radius:3px;border-bottom-right-radius:3px}.r6o-relation-editor .buttons .ok:hover{background-color:#4f92d7}.noselect{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}\n",""]),e.exports=t},
/*!***********************************!*\
  !*** ./src/index.js + 55 modules ***!
  \***********************************/
/*! exports provided: default */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/axios/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/openseadragon/build/openseadragon/openseadragon.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/preact/compat/dist/compat.module.js (<- Module is referenced from these modules with unsupported syntax: ../recogito-client-core/node_modules/react-contenteditable/lib/react-contenteditable.js (referenced with cjs require)) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/preact/hooks/dist/hooks.module.js because of ./node_modules/preact/compat/dist/compat.module.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/tiny-emitter/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../annotorious/dist/annotorious.min.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../recogito-client-core/node_modules/react-contenteditable/lib/react-contenteditable.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../recogito-client-core/node_modules/tiny-emitter/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../recogito-client-core/node_modules/uuid/v1.js (<- Module is not an ECMAScript module) */function(e,t,n){"use strict";n.r(t);var r=n(28),i=n.n(r),y=n(0),o=n(7),a=n.n(o),s=0,v={setServerTime:function(e){var t=Date.now();s=e-t},getCurrentTimeAdjusted:function(){return new Date(Date.now()+s).toISOString()},toClientTime:function(e){return Date.parse(e)-s}},l=new(n(29))({allowMissing:!0});l.init=function(e){l.locale(e),l.extend(n(63)("./messages_".concat(e,".json")))};var b=l,w=n(2),x=function(e,t,n){var r=e.getBoundingClientRect(),o=window,i=o.scrollX,a=o.scrollY;t.className="r6o-editor",t.style.opacity=1;var s=n.getBoundingClientRect(),l=s.left,c=s.top,u=s.right,p=s.height;t.style.top="".concat(c+p-r.top,"px"),t.style.left="".concat(l+i-r.left,"px");var h=t.getBoundingClientRect();if(h.right>window.innerWidth&&(t.classList.add("align-right"),t.style.left="".concat(u-h.width+i-r.left,"px")),h.bottom>window.innerHeight){var d=c+a,f=r.bottom+a;t.classList.add("align-bottom"),t.style.top="auto",t.style.bottom="".concat(f-d,"px")}};function _(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach(function(e){u(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(r){var e,t,n,o,i,a,s=T(Object(w.k)(),2),l=s[0],c=s[1],u=Object(w.j)();Object(w.d)(function(){var e,t=r.applyTemplate&&(null===(e=r.annotation)||void 0===e?void 0:e.isSelection),n=t?r.annotation.clone({body:E(r.applyTemplate)}):r.annotation;if((null==l?void 0:l.isEqual(n))||(null==l?void 0:l.isSelection)&&(null==n?void 0:n.isSelection)||c(n),t&&r.applyImmediately&&r.onAnnotationCreated(n.toAnnotation()),u.current)return g()},[r.selectedElement,(e=r.selectedElement,t=e.getBoundingClientRect(),n=t.top,o=t.left,i=t.width,a=t.height,"".concat(n,", ").concat(o,", ").concat(i,", ").concat(a))]);function p(e){var t={},n=v.user;return!e.draft&&n&&(t.creator={},n.id&&(t.creator.id=n.id),n.displayName&&(t.creator.name=n.displayName),e.created?e.modified=v.getCurrentTimeAdjusted():e.created=v.getCurrentTimeAdjusted()),t}function h(e){return c(l.clone({body:[].concat(E(l.bodies),[S({},e,{},p(e))])}))}function d(t,n){return c(l.clone({body:l.bodies.map(function(e){return e===t?S({},n,{},p(n)):e})}))}function f(t){return c(l.clone({body:l.bodies.filter(function(e){return e!==t})}))}function m(){function e(e){return e.clone({body:e.bodies.map(function(e){var t=e.draft,n=_(e,["draft"]);return t?S({},n,{},p(n)):n})})}0===l.bodies.length?l.isSelection?r.onCancel():r.onAnnotationDeleted(r.annotation):l.isSelection?r.onAnnotationCreated(e(l).toAnnotation()):r.onAnnotationUpdated(e(l),r.annotation)}var g=function(){if(window.ResizeObserver){var e=new ResizeObserver(function(){x(r.wrapperEl,u.current,r.selectedElement)});return e.observe(r.wrapperEl),function(){return e.disconnect()}}x(r.wrapperEl,u.current,r.selectedElement)};return y.default.createElement("div",{ref:u,className:"r6o-editor"},y.default.createElement("div",{className:"arrow"}),y.default.createElement("div",{className:"inner"},y.default.Children.map(r.children,function(e){return y.default.cloneElement(e,S({},e.props,{annotation:l,readOnly:r.readOnly,onAppendBody:h,onUpdateBody:d,onRemoveBody:f,onSaveAndClose:m}))}),r.readOnly?y.default.createElement("div",{className:"footer"},y.default.createElement("button",{className:"r6o-btn",onClick:r.onCancel},b.t("Close"))):y.default.createElement("div",{className:"footer"},y.default.createElement("button",{className:"r6o-btn outline",onClick:r.onCancel},b.t("Cancel")),y.default.createElement("button",{className:"r6o-btn ",onClick:m},b.t("Ok")))))};var f=n(8),m=n.n(f);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach(function(e){C(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(){function r(e,t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),C(this,"clone",function(e){return new r(P({},n.underlying,{},e),n.opts)}),C(this,"selector",function(t){var e=n.underlying.target;if(e.selector)return(Array.isArray(e.selector)?e.selector:[e.selector]).find(function(e){return e.type===t})}),this.underlying=e,this.opts=t}var e,t,n;return e=r,(t=[{key:"isEqual",value:function(e){return!(!e||"Annotation"!==(null==e?void 0:e.type))&&(this.underlying===e.underlying||!(!this.underlying.id||!e.underlying.id)&&this.underlying.id===e.underlying.id)}},{key:"readOnly",get:function(){var e;return null===(e=this.opts)||void 0===e?void 0:e.readOnly}},{key:"id",get:function(){return this.underlying.id}},{key:"type",get:function(){return this.underlying.type}},{key:"motivation",get:function(){return this.underlying.motivation}},{key:"body",get:function(){return this.underlying.body}},{key:"target",get:function(){return this.underlying.target}},{key:"bodies",get:function(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]},set:function(e){this.underlying.body=e}},{key:"targets",get:function(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}},{key:"quote",get:function(){return this.selector("TextQuoteSelector").exact}},{key:"start",get:function(){return this.selector("TextPositionSelector").start}},{key:"end",get:function(){return this.selector("TextPositionSelector").end}}])&&O(e.prototype,t),n&&O(e,n),r}();C(A,"create",function(e){var t={"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"#".concat(m()()),body:[]};return new A(P({},t,{},e))});n(4);"ontouchstart"in window||navigator.maxTouchPoints;n(74);function R(e){return y.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 940",width:e.width},y.default.createElement("metadata",null,"IcoFont Icons"),y.default.createElement("title",null,"simple-down"),y.default.createElement("glyph",{glyphName:"simple-down",unicode:"",horizAdvX:"1000"}),y.default.createElement("path",{fill:"currentColor",d:"M200 392.6l300 300 300-300-85.10000000000002-85.10000000000002-214.89999999999998 214.79999999999995-214.89999999999998-214.89999999999998-85.10000000000002 85.20000000000005z"}))}function k(e){return y.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"180 150 700 800",width:e.width},y.default.createElement("metadata",null,"IcoFont Icons"),y.default.createElement("title",null,"close"),y.default.createElement("glyph",{glyphName:"close",unicode:"",horizAdvX:"1000"}),y.default.createElement("path",{fill:"currentColor",d:"M709.8 206.6c-64.39999999999998 65.50000000000003-128.89999999999998 131.20000000000002-194.19999999999993 197.6-8.600000000000023 8.699999999999989-22.400000000000034 8.800000000000011-31 0-65-66-129.70000000000005-131.8-194.5-197.6-8.600000000000023-8.699999999999989-22.400000000000034-8.599999999999994-30.900000000000034 0.09999999999999432-15.699999999999989 16.200000000000017-31.099999999999994 32.30000000000001-47.099999999999994 48.80000000000001-8.5 8.800000000000011-8.299999999999983 23 0.20000000000001705 31.69999999999999 63.099999999999966 64.19999999999999 127.89999999999998 130.10000000000002 193.59999999999997 197 8.600000000000023 8.699999999999989 8.5 22.80000000000001 0 31.599999999999966-65.19999999999999 66.40000000000009-130.2 132.5-194.7 198.10000000000002-8.5 8.700000000000045-8.5 22.800000000000068 0.20000000000001705 31.399999999999977l47.79999999999998 47.90000000000009c8.600000000000023 8.599999999999909 22.600000000000023 8.599999999999909 31.100000000000023-0.10000000000002274l194.2-197.30000000000007c8.600000000000023-8.699999999999932 22.399999999999977-8.699999999999932 31 0 64.70000000000005 65.80000000000007 129.20000000000005 131.4000000000001 194.20000000000005 197.5 8.599999999999909 8.700000000000045 22.5 8.800000000000068 31 0.10000000000002274 16-16.199999999999932 31.699999999999932-32.19999999999993 47.59999999999991-48.299999999999955 8.600000000000023-8.700000000000045 8.600000000000023-22.899999999999977 0.10000000000002274-31.600000000000023-63.799999999999955-65-128.5-130.89999999999998-194.19999999999993-197.79999999999995-8.600000000000023-8.700000000000045-8.600000000000023-22.900000000000034 0-31.600000000000023 65.19999999999993-66.40000000000003 130.0999999999999-132.5 194.5-198.20000000000005 8.599999999999909-8.699999999999989 8.5-22.799999999999955-0.10000000000002274-31.49999999999997l-47.80000000000007-48.099999999999994c-8.5-8.5-22.399999999999977-8.400000000000006-31 0.29999999999998295z"}))}var z=n(9),D=n.n(z);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});function j(e,t){M[e]=t}function I(e){return M[e]||M.en_US}var N=["second","minute","hour","day","week","month","year"],L=["","","","","","",""],M={},F=[60,60,24,7,365/7/12,12];function B(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}function H(e,t){for(var n=e<0?1:0,r=e=Math.abs(e),o=0;e>=F[o]&&o<F.length;o++)e/=F[o];return(0===(o*=2)?9:1)<(e=Math.floor(e))&&(o+=1),t(e,o,r)[n].replace("%s",e.toString())}function U(e,t){return((t?B(t):new Date)-B(e))/1e3}var V="timeago-id";function W(e){return parseInt(e.getAttribute(V))}var K={},$=function(e){clearTimeout(e),delete K[e]};function q(e,t,n,r){$(W(e));var o=r.relativeDate,i=r.minInterval,a=U(t,o);e.innerText=H(a,n);var s,l=setTimeout(function(){q(e,t,n,r)},Math.min(1e3*Math.max(function(e){for(var t=1,n=0,r=Math.abs(e);e>=F[n]&&n<F.length;n++)e/=F[n],t*=F[n];return r=(r%=t)?t-r:t,Math.ceil(r)}(a),i||1),2147483647));K[l]=0,s=l,e.setAttribute(V,s)}function G(e){e?$(W(e)):Object.keys(K).forEach($)}j("en_US",function(e,t){if(0===t)return["just now","right now"];var n=N[Math.floor(t/2)];return 1<e&&(n+="s"),[e+" "+n+" ago","in "+e+" "+n]}),j("zh_CN",function(e,t){if(0===t)return["",""];var n=L[~~(t/2)];return[e+" "+n+"",e+" "+n+""]});var Z,X,Y=(Z=function(e,t){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Z(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),J=function(){return(J=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Q=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function ee(){var e=null!==X&&X.apply(this,arguments)||this;return e.dom=null,e}var te=(X=y.default.Component,Y(ee,X),ee.prototype.componentDidMount=function(){this.renderTimeAgo()},ee.prototype.componentDidUpdate=function(){this.renderTimeAgo()},ee.prototype.renderTimeAgo=function(){var e,t,n,r,o=this.props,i=o.live,a=o.datetime,s=o.locale,l=o.opts;G(this.dom),!1!==i&&(this.dom.setAttribute("datetime",""+((r=a)instanceof Date?r.getTime():r)),e=this.dom,t=s,n=l,(e.length?e:[e]).forEach(function(e){q(e,e.getAttribute("datetime"),I(t),n||{})}))},ee.prototype.componentWillUnmount=function(){G(this.dom)},ee.prototype.render=function(){var e,t,n=this,r=this.props,o=r.datetime,i=(r.live,r.locale),a=r.opts,s=Q(r,["datetime","live","locale","opts"]);return y.default.createElement("time",J({ref:function(e){n.dom=e}},s),(e=i,H(U(o,(t=a)&&t.relativeDate),I(e))))},ee.defaultProps={live:!0,className:""},ee);function ne(e){var t,n,r=Object(w.j)();function o(){t.current&&!t.current.contains(event.target)&&n()}return t=r,n=function(){return e.onClickOutside()},Object(w.d)(function(){return document.addEventListener("mousedown",o),function(){return document.removeEventListener("mousedown",o)}}),y.default.createElement("ul",{ref:r,className:"comment-dropdown-menu"},y.default.createElement("li",{onClick:e.onEdit},b.t("Edit")),y.default.createElement("li",{onClick:e.onDelete},b.t("Delete")))}function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(i){return function(){var e,t,n,r=le(i);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var o=le(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return t=this,!(n=e)||"object"!==re(n)&&"function"!=typeof n?se(t):n}}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ue=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(i,y["Component"]);var e,t,n,o=ae(i);function i(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ce(se(t=o.call.apply(o,[this].concat(n))),"onKeyDown",function(e){13===e.which&&e.ctrlKey&&t.props.onSaveAndClose()}),ce(se(t),"onRender",function(e){e&&t.props.editable&&e.focus()}),t}return e=i,(t=[{key:"render",value:function(){return y.default.createElement(D.a,{innerRef:this.onRender,className:"r6o-editable-text",html:this.props.content,"data-placeholder":this.props.placeholder||b.t("Add a comment..."),disabled:!this.props.editable,onChange:this.props.onChange,onKeyDown:this.onKeyDown})}}])&&oe(e.prototype,t),n&&oe(e,n),i}();function pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function me(t){var e=de(Object(w.k)(!1),2),n=e[0],r=e[1],o=de(Object(w.k)(!1),2),i=o[0],a=o[1],s=t.body.creator&&y.default.createElement("div",{className:"lastmodified"},y.default.createElement("span",{className:"lastmodified-by"},t.body.creator.name),t.body.created&&y.default.createElement("span",{className:"lastmodified-at"},y.default.createElement(te,{datetime:v.toClientTime(t.body.created)})));return t.readOnly?y.default.createElement("div",{className:"r6o-widget comment"},y.default.createElement("div",{className:"value"},t.body.value),s):y.default.createElement("div",{className:n?"r6o-widget comment editable":"r6o-widget comment"},y.default.createElement(ue,{editable:n,content:t.body.value,onChange:function(e){t.onUpdate(t.body,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(n),!0).forEach(function(e){he(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t.body,{value:e.target.value}))},onSaveAndClose:t.onSaveAndClose}),s,y.default.createElement("div",{className:i?"icon arrow-down menu-open":"icon arrow-down",onClick:function(){return a(!i)}},y.default.createElement(R,{width:12})),i&&y.default.createElement(ne,{onEdit:function(){t.body.draft=!0,r(!0),a(!1)},onDelete:function(){t.onDelete(t.body),a(!1)},onClickOutside:function(){return a(!1)}}))}function ge(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ye(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ge(Object(n),!0).forEach(function(e){ve(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e){return"TextualBody"===e.type&&(!e.hasOwnProperty("purpose")||"commenting"===e.purpose||"replying"===e.purpose)}function we(r){var e,t,n=r.annotation?r.annotation.bodies.filter(be):[],o=(e=n.slice().reverse().find(function(e){return e.draft&&!e.creator}),t=1<n.length,e||{type:"TextualBody",value:"",purpose:t?"replying":"commenting",draft:!0}),i=n.filter(function(e){return e!=o});return y.default.createElement(y.default.Fragment,null,i.map(function(e,t){return y.default.createElement(me,{key:t,readOnly:r.readOnly,body:e,onUpdate:r.onUpdateBody,onDelete:r.onRemoveBody,onSaveAndClose:r.onSaveAndClose})}),!r.readOnly&&r.annotation&&y.default.createElement("div",{className:"r6o-widget comment editable"},y.default.createElement(ue,{content:o.value,editable:!0,placeholder:0<i.length?b.t("Add a reply..."):b.t("Add a comment..."),onChange:function(e){var t=o.value.trim(),n=e.target.value.trim();0===t.length&&0<n.length?r.onAppendBody(ye({},o,{value:n})):0<t.length&&0===n.length?r.onRemoveBody(o):r.onUpdateBody(o,ye({},o,{value:n}))},onSaveAndClose:function(){return r.onSaveAndClose()}})))}function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _e(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}function Se(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}n(12);function Ee(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var Te=!1,Pe=y.default.createContext(null),Oe="unmounted",Ce="exited",Ae="entering",Re="entered",ke=function(i){function e(e,t){var n;n=i.call(this,e,t)||this;var r,o=t&&!t.isMounting?e.enter:e.appear;return n.appearStatus=null,e.in?o?(r=Ce,n.appearStatus=Ae):r=Re:r=e.unmountOnExit||e.mountOnEnter?Oe:Ce,n.state={status:r},n.nextCallback=null,n}Se(e,i),e.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Oe?{status:Ce}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Ae&&n!==Re&&(t=Ae):n!==Ae&&n!==Re||(t="exiting")}this.updateStatus(!1,t)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},t.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=y.default.findDOMNode(this);t===Ae?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===Ce&&this.setState({status:Oe})},t.performEnter=function(e,t){var n=this,r=this.props.enter,o=this.context?this.context.isMounting:t,i=this.getTimeouts(),a=o?i.appear:i.enter;!t&&!r||Te?this.safeSetState({status:Re},function(){n.props.onEntered(e)}):(this.props.onEnter(e,o),this.safeSetState({status:Ae},function(){n.props.onEntering(e,o),n.onTransitionEnd(e,a,function(){n.safeSetState({status:Re},function(){n.props.onEntered(e,o)})})}))},t.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n&&!Te?(this.props.onExit(e),this.safeSetState({status:"exiting"},function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,function(){t.safeSetState({status:Ce},function(){t.props.onExited(e)})})})):this.safeSetState({status:Ce},function(){t.props.onExited(e)})},t.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},t.setNextCallback=function(t){var n=this,r=!0;return this.nextCallback=function(e){r&&(r=!1,n.nextCallback=null,t(e))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},t.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},t.render=function(){var e=this.state.status;if(e===Oe)return null;var t=this.props,n=t.children,r=_e(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return y.default.createElement(Pe.Provider,{value:null},n(e,r));var o=y.default.Children.only(n);return y.default.createElement(Pe.Provider,{value:null},y.default.cloneElement(o,r))},e}(y.default.Component);function ze(){}ke.contextType=Pe,ke.propTypes={},ke.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ze,onEntering:ze,onEntered:ze,onExit:ze,onExiting:ze,onExited:ze},ke.UNMOUNTED=0,ke.EXITED=1,ke.ENTERING=2,ke.ENTERED=3,ke.EXITING=4;function De(i,e){return i&&e&&e.split(" ").forEach(function(e){return n=e,void((t=i).classList?t.classList.add(n):(o=n,((r=t).classList?o&&r.classList.contains(o):-1!==(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+o+" "))||("string"==typeof t.className?t.className=t.className+" "+n:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+n))));var t,n,r,o})}function je(r,e){return r&&e&&e.split(" ").forEach(function(e){return n=e,void((t=r).classList?t.classList.remove(n):"string"==typeof t.className?t.className=Ee(t.className,n):t.setAttribute("class",Ee(t.className&&t.className.baseVal||"",n)));var t,n})}var Ie=ke,Ne=function(r){function e(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(o=r.call.apply(r,[this].concat(t))||this).appliedClasses={appear:{},enter:{},exit:{}},o.onEnter=function(e,t){o.removeClasses(e,"exit"),o.addClass(e,t?"appear":"enter","base"),o.props.onEnter&&o.props.onEnter(e,t)},o.onEntering=function(e,t){var n=t?"appear":"enter";o.addClass(e,n,"active"),o.props.onEntering&&o.props.onEntering(e,t)},o.onEntered=function(e,t){var n=t?"appear":"enter";o.removeClasses(e,n),o.addClass(e,n,"done"),o.props.onEntered&&o.props.onEntered(e,t)},o.onExit=function(e){o.removeClasses(e,"appear"),o.removeClasses(e,"enter"),o.addClass(e,"exit","base"),o.props.onExit&&o.props.onExit(e)},o.onExiting=function(e){o.addClass(e,"exit","active"),o.props.onExiting&&o.props.onExiting(e)},o.onExited=function(e){o.removeClasses(e,"exit"),o.addClass(e,"exit","done"),o.props.onExited&&o.props.onExited(e)},o.getClassNames=function(e){var t=o.props.classNames,n="string"==typeof t,r=n?(n&&t?t+"-":"")+e:t[e];return{baseClassName:r,activeClassName:n?r+"-active":t[e+"Active"],doneClassName:n?r+"-done":t[e+"Done"]}},o}Se(e,r);var t=e.prototype;return t.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"];"appear"===t&&"done"===n&&(r+=" "+this.getClassNames("enter").doneClassName),"active"===n&&e&&e.scrollTop,this.appliedClasses[t][n]=r,De(e,r)},t.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,o=n.active,i=n.done;this.appliedClasses[t]={},r&&je(e,r),o&&je(e,o),i&&je(e,i)},t.render=function(){var e=this.props,t=(e.classNames,_e(e,["classNames"]));return y.default.createElement(Ie,xe({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(y.default.Component);Ne.defaultProps={classNames:""},Ne.propTypes={};var Le=Ne;function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Be(r){var e=Me(Object(w.k)(!1),2),o=e[0],i=e[1],t=Me(Object(w.k)(""),2),n=t[0],a=t[1],s=r.annotation?r.annotation.bodies.filter(function(e){return"tagging"===e.purpose}):[];return y.default.createElement("div",{className:"tags"},0<s.length&&y.default.createElement("ul",null,s.map(function(e){return y.default.createElement("li",{key:e.value,onClick:(n=e.value,function(e){i(o!==n&&n)})},y.default.createElement("span",{className:"label"},e.value),!r.readOnly&&y.default.createElement(Le,{in:o===e.value,timeout:200,classNames:"delete"},y.default.createElement("span",{className:"delete-wrapper",onClick:(t=e,function(e){e.stopPropagation(),r.onRemoveBody(t)})},y.default.createElement("span",{className:"delete"},y.default.createElement(k,{width:12})))));var t,n})),!r.readOnly&&y.default.createElement("input",{type:"text",value:n,onChange:function(e){return a(e.target.value)},onKeyDown:function(e){13===e.which&&(r.onAppendBody({type:"TextualBody",purpose:"tagging",value:n.trim()}),a(""))},placeholder:b.t("Add tag...")}))}d.CommentWidget=we,d.TagWidget=Be;var He=n(5),Ue="http://www.w3.org/2000/svg",Ve=n(10);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(i){return function(){var e,t,n,r=Ze(i);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var o=Ze(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return t=this,!(n=e)||"object"!==We(n)&&"function"!=typeof n?Ge(t):n}}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(o,a.a);var e,t,n,r=qe(o);function o(e){var p;if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Xe(Ge(p=r.call(this)),"_initDrawingMouseTracker",function(){var t=!1;p.mouseTracker=new He.MouseTracker({element:p.svg,pressHandler:function(e){t=!0,p.currentTool.startDrawing(e.originalEvent)},moveHandler:function(e){t&&p.currentTool.onMouseMove(e.originalEvent)},releaseHandler:function(e){t=!1,console.log(e.originalEvent),p.currentTool.onMouseUp(e.originalEvent),p.mouseTracker.setTracking(!1)}}).setTracking(!1),document.addEventListener("keydown",function(e){16===e.which&&p.mouseTracker.setTracking(!0)}),document.addEventListener("keyup",function(e){16!==e.which||t||p.mouseTracker.setTracking(!1)})}),Xe(Ge(p),"addAnnotation",function(t){var e=Object(Ve.drawRect)(t);e.setAttribute("class","a9s-annotation"),e.setAttribute("data-id",t.id),e.annotation=t,e.addEventListener("mouseenter",function(e){p.currentTool.isDrawing||p.emit("mouseEnterAnnotation",t,e)}),e.addEventListener("mouseleave",function(e){p.currentTool.isDrawing||p.emit("mouseLeaveAnnotation",t,e)}),new He.MouseTracker({element:e,clickHandler:function(){return p.selectShape(e)}}).setTracking(!0),p.g.appendChild(e)}),Xe(Ge(p),"findShape",function(e){var t=null!=e&&e.id?e.id:e;return p.g.querySelector('.a9s-annotation[data-id="'.concat(t,'"]'))}),Xe(Ge(p),"selectShape",function(e,t){p.selectedShape&&p.selectedShape.annotation!==e.annotation&&p.deselect();var n=e.annotation;p.selectedShape=e,p.emit("select",{annotation:n,element:e,skipEvent:t})}),Xe(Ge(p),"init",function(e){e.forEach(p.addAnnotation)}),Xe(Ge(p),"deselect",function(){var e;null!==(e=p.selectedShape)&&void 0!==e&&e.annotation.isSelection&&p.currentTool.stop(),p.selectedShape=null}),Xe(Ge(p),"addOrUpdateAnnotation",function(e,t){t&&p.removeAnnotation(e),p.addAnnotation(e)}),Xe(Ge(p),"removeAnnotation",function(e){var t;(null===(t=p.selectedShape)||void 0===t?void 0:t.annotation)===e&&p.deselect();var n=p.findShape(e);n&&n.parentNode.removeChild(n)}),Xe(Ge(p),"selectAnnotation",function(e){p.selectedShape&&p.deselect();var t=p.findShape(e);return t?p.selectShape(t,!0):p.deselect(),null==t?void 0:t.annotation}),Xe(Ge(p),"panTo",function(e,t){var n=p.findShape(e);if(n){var r=n.getBoundingClientRect(),o=r.top,i=r.left,a=r.width,s=r.height,l=i+a/2+window.scrollX,c=o+s/2+window.scrollY,u=p.viewer.viewport.windowToViewportCoordinates(new He.Point(l,c));p.viewer.viewport.panTo(u,t)}}),Xe(Ge(p),"fitBounds",function(e,t){var n=p.findShape(e);if(n){var r=Object(Ve.parseRectFragment)(n.annotation),o=r.x,i=r.y,a=r.w,s=r.h,l=p.viewer.viewport.imageToViewportRectangle(o,i,a,s);p.viewer.viewport.fitBounds(l,t)}}),Xe(Ge(p),"destroy",function(){p.currentTool=null,p.selectedShape=null,p.svg.parentNode.removeChild(p.svg)}),p.viewer=e.viewer,p.readOnly=e.readOnly,p.svg=document.createElementNS(Ue,"svg"),p.svg.classList.add("a9s-annotationlayer","a9s-osd-annotationlayer"),p.g=document.createElementNS(Ue,"g"),p.svg.appendChild(p.g),p.viewer.canvas.appendChild(p.svg),p.viewer.addHandler("animation",function(){return p.resize()}),p.viewer.addHandler("open",function(){return p.resize()}),p.viewer.addHandler("rotate",function(){return p.resize()}),p.viewer.addHandler("resize",function(){return p.resize()}),p.selectedShape=null,!p.readOnly){var t=new Ve.RubberbandRectSelector(p.g);t.on("complete",p.selectShape),p._initDrawingMouseTracker(),p.currentTool=t}return p.resize(),p}return e=o,(t=[{key:"resize",value:function(){var e=this.viewer.viewport.pixelFromPoint(new He.Point(0,0),!0),t=this.viewer.viewport.getContainerSize(),n=t.x,r=t.y,o=Math.max(n,r),i=this.viewer.viewport.getZoom(!0)*o/this.viewer.world.getContentFactor(),a=this.viewer.viewport.getRotation();this.g.setAttribute("transform","translate(".concat(e.x,", ").concat(e.y,") scale(").concat(i,") rotate(").concat(a,")")),this.selectedShape&&this.emit("moveSelection",this.selectedShape)}}])&&Ke(e.prototype,t),n&&Ke(e,n),o}();function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(i){return function(){var e,t,n,r=rt(i);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var o=rt(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return t=this,!(n=e)||"object"!==Je(n)&&"function"!=typeof n?nt(t):n}}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var it=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(i,y["Component"]);var e,t,n,r=tt(i);function i(){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ot(nt(o=r.call.apply(r,[this].concat(t))),"state",{selectedAnnotation:null,selectedDOMElement:null}),ot(nt(o),"clearState",function(){return o.setState({selectedAnnotation:null,selectedDOMElement:null})}),ot(nt(o),"handleSelect",function(e){var t=e.annotation,n=e.element,r=e.skipEvent;t?(o.setState({selectedAnnotation:t,selectedDOMElement:n}),t.isSelection||r||o.props.onAnnotationSelected(t.clone())):o.clearState()}),ot(nt(o),"handleMoveSelection",function(e){return o.setState({selectedDOMElement:e})}),ot(nt(o),"onCreateOrUpdateAnnotation",function(n){return function(e,t){o.clearState(),o.annotationLayer.deselect(),o.annotationLayer.addOrUpdateAnnotation(e,t),o.props[n](e,null==t?void 0:t.clone())}}),ot(nt(o),"onDeleteAnnotation",function(e){o.clearState(),o.annotationLayer.removeAnnotation(e),o.props.onAnnotationDeleted(e)}),ot(nt(o),"onCancelAnnotation",function(){o.clearState(),o.annotationLayer.deselect()}),ot(nt(o),"addAnnotation",function(e){return o.annotationLayer.addOrUpdateAnnotation(e.clone())}),ot(nt(o),"removeAnnotation",function(e){return o.annotationLayer.removeAnnotation(e.clone())}),ot(nt(o),"setAnnotations",function(e){return o.annotationLayer.init(e.map(function(e){return e.clone()}))}),ot(nt(o),"getAnnotations",function(){return o.annotationLayer.getAnnotations().map(function(e){return e.clone()})}),ot(nt(o),"selectAnnotation",function(e){var t=o.annotationLayer.selectAnnotation(e);if(t)return t.clone();o.clearState()}),ot(nt(o),"panTo",function(e,t){return o.annotationLayer.panTo(e,t)}),ot(nt(o),"fitBounds",function(e,t){return o.annotationLayer.fitBounds(e,t)}),o}return e=i,(t=[{key:"componentDidMount",value:function(){this.annotationLayer=new Ye(this.props),this.annotationLayer.on("mouseEnterAnnotation",this.props.onMouseEnterAnnotation),this.annotationLayer.on("mouseLeaveAnnotation",this.props.onMouseLeaveAnnotation),this.annotationLayer.on("select",this.handleSelect),this.annotationLayer.on("moveSelection",this.handleMoveSelection)}},{key:"componentWillUnmount",value:function(){this.annotationLayer.destroy()}},{key:"render",value:function(){return this.state.selectedAnnotation&&y.default.createElement(d,{wrapperEl:this.props.wrapperEl,annotation:this.state.selectedAnnotation,selectedElement:this.state.selectedDOMElement,readOnly:this.props.readOnly,onAnnotationCreated:this.onCreateOrUpdateAnnotation("onAnnotationCreated"),onAnnotationUpdated:this.onCreateOrUpdateAnnotation("onAnnotationUpdated"),onAnnotationDeleted:this.onDeleteAnnotation,onCancel:this.onCancelAnnotation},y.default.createElement(d.CommentWidget,null))}}])&&Qe(e.prototype,t),n&&Qe(e,n),i}();n(80);function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(e,t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,st),at(this,"handleAnnotationSelected",function(e){return n._emitter.emit("selectAnnotation",e.underlying)}),at(this,"handleAnnotationCreated",function(e){return n._emitter.emit("createAnnotation",e.underlying)}),at(this,"handleAnnotationUpdated",function(e,t){return n._emitter.emit("updateAnnotation",e.underlying,t.underlying)}),at(this,"handleAnnotationDeleted",function(e){return n._emitter.emit("deleteAnnotation",e.underlying)}),at(this,"handleMouseEnterAnnotation",function(e,t){return n._emitter.emit("mouseEnterAnnotation",e.underlying,t)}),at(this,"handleMouseLeaveAnnotation",function(e,t){return n._emitter.emit("mouseLeaveAnnotation",e.underlying,t)}),at(this,"addAnnotation",function(e){return n._app.current.addAnnotation(new A(e))}),at(this,"removeAnnotation",function(e){return n._app.current.removeAnnotation(new A(e))}),at(this,"loadAnnotations",function(e){return i.a.get(e).then(function(e){var t=e.data.map(function(e){return new A(e)});return n._app.current.setAnnotations(t),t})}),at(this,"setAnnotations",function(e){var t=e.map(function(e){return new A(e)});n._app.current.setAnnotations(t)}),at(this,"getAnnotations",function(){return n._app.current.getAnnotations().map(function(e){return e._annotation})}),at(this,"_wrap",function(e){return"Annotation"===(null==e?void 0:e.type)?new A(e):e}),at(this,"selectAnnotation",function(e){var t=n._app.current.selectAnnotation(n._wrap(e));return null==t?void 0:t.underlying}),at(this,"panTo",function(e,t){return n._app.current.panTo(n._wrap(e),t)}),at(this,"fitBounds",function(e,t){return n._app.current.fitBounds(n._wrap(e),t)}),at(this,"setAuthInfo",function(e){return v.user=e}),at(this,"clearAuthInfo",function(){return v.user=null}),at(this,"setServerTime",function(e){return v.setServerTime(e)}),at(this,"destroy",function(){return y.default.unmountComponentAtNode(n.appContainerEl)}),at(this,"on",function(e,t){return n._emitter.on(e,t)}),at(this,"off",function(e,t){return n._emitter.off(e,t)});var r=t||{};this._app=y.default.createRef(),this._emitter=new a.a;var o=e.element;o.style.position||(o.style.position="relative"),function(e){if(e){var t="auto"===e?window.navigator.userLanguage||window.navigator.language:e;try{b.init(t.split("-")[0].toLowerCase())}catch(e){console.warn("Unsupported locale '".concat(t,"'. Falling back to default en."))}}}(r.locale),this.appContainerEl=document.createElement("DIV"),o.appendChild(this.appContainerEl),y.default.render(y.default.createElement(it,{ref:this._app,viewer:e,wrapperEl:o,readOnly:r.readOnly,onAnnotationSelected:this.handleAnnotationSelected,onAnnotationCreated:this.handleAnnotationCreated,onAnnotationUpdated:this.handleAnnotationUpdated,onAnnotationDeleted:this.handleAnnotationDeleted,onMouseEnterAnnotation:this.handleMouseEnterAnnotation,onMouseLeaveAnnotation:this.handleMouseLeaveAnnotation}),this.appContainerEl)}t.default=function(e,t){return new st(e,t)}}],e={},f.m=d,f.c=e,f.d=function(e,t,n){f.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},f.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.t=function(t,e){if(1&e&&(t=f(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(f.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)f.d(n,r,function(e){return t[e]}.bind(null,r));return n},f.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(t,"a",t),t},f.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},f.p="",f(f.s=82).default;function f(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return d[t].call(n.exports,n,n.exports,f),n.l=!0,n.exports}var d,e});
//# sourceMappingURL=openseadragon-annotorious.min.js.map